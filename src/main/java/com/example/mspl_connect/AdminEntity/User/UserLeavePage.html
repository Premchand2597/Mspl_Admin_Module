<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">

  <title>Leaves</title>
  <meta content="" name="description">
  <meta content="" name="keywords">

  <!-- Favicons -->
  <link href="assets/img/favicon.png" rel="icon">
  <link href="assets/img/apple-touch-icon.png" rel="apple-touch-icon">

  <!-- Google Fonts -->
  <link href="https://fonts.gstatic.com" rel="preconnect">
  <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i|Nunito:300,300i,400,400i,600,600i,700,700i|Poppins:300,300i,400,400i,500,500i,600,600i,700,700i" rel="stylesheet">

  <!-- Vendor CSS Files -->
  <link href="assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
  <link href="assets/vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet">
  <link href="assets/vendor/boxicons/css/boxicons.min.css" rel="stylesheet">
  <link href="assets/vendor/quill/quill.snow.css" rel="stylesheet">
  <link href="assets/vendor/quill/quill.bubble.css" rel="stylesheet">
  <link href="assets/vendor/remixicon/remixicon.css" rel="stylesheet">
  <link href="assets/vendor/simple-datatables/style.css" rel="stylesheet">

  <!-- Template Main CSS File -->
  <link href="assets/css/style.css" rel="stylesheet">
  <script src="https://code.highcharts.com/highcharts.js"></script>
  <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">


  <!-- DataTables CSS -->
  <link rel="stylesheet" href="https://cdn.datatables.net/1.13.6/css/jquery.dataTables.min.css">
  <!-- DataTables JS -->
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="https://cdn.datatables.net/1.13.6/js/jquery.dataTables.min.js"></script>

  <link rel="stylesheet" href="https://cdn.datatables.net/fixedheader/3.3.3/css/fixedHeader.dataTables.min.css">
  <script src="https://cdn.datatables.net/fixedheader/3.3.3/js/dataTables.fixedHeader.min.js"></script>

  <!-- =======================================================
  * Template Name: NiceAdmin
  * Template URL: https://bootstrapmade.com/nice-admin-bootstrap-admin-html-template/
  * Updated: Apr 20 2024 with Bootstrap v5.3.3
  * Author: BootstrapMade.com
  * License: https://bootstrapmade.com/license/
  ======================================================== -->
  <style>
  
	   .main{
	    	font-size: 14px;
	   }  
 	   .card {
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 20px;
        }
        .info-card {
            background-color: #fff;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
        #attendence-chart{
            width: 100%;
            height: 190px; /* Adjust the height as needed */
        }
        /* Example CSS to style disabled items */
		.activity-item .disabled {
		    pointer-events: none; /* Disable interactions */
		    opacity: 0.5; /* Make the item appear grayed out */
		}
		
	   
	    #pagination button {
		    border-radius: 5px;
		}
		#pagination button:hover {
		    background-color: #0056b3;
		    color: #fff;
		}
		 
		.holidayTable th, .holidayTable td {
		   white-space: nowrap; /* Prevent text from wrapping to the next line */
		   text-align: center; /* Optional: Align text to the left for better readability */
		   padding: 8px 5px; /* Add padding for better spacing */
		 }
		 
		 	/* Fullscreen overlay with dim background */
	#loadingPopup {
	    position: fixed;
	    top: 0;
	    left: 0;
	    width: 100%;
	    height: 100%;
	    background: rgba(0, 0, 0, 0.5); /* Dim background */
	    display: flex;
	    flex-direction: column;
	    justify-content: center;
	    align-items: center;
	    z-index: 9999;
	    font-family: Arial, sans-serif;
	    color: white; /* Text color for better contrast */
	}
	
	/* Spinner animation */
	.spinner {
	    width: 50px;
	    height: 50px;
	    border: 6px solid rgba(255, 255, 255, 0.3); /* Semi-transparent border */
	    border-top-color: white; /* Bright top border */
	    border-radius: 50%;
	    animation: spin 1s linear infinite;
	}
	
	/* Loading text */
	#loadingPopup p {
	    margin-top: 20px;
	    font-size: 18px;
	    font-weight: bold;
	    color: white;
	}
	
	
</style>
</head>

<body>
  <!-- ======= Header ======= -->
  <header id="header" class="header fixed-top d-flex align-items-center" th:if="${empDetailsByEmpId.deptId > 0}">

		   <div class="d-flex align-items-center" style="width:100%; margin:0 0 0 10px; padding:5px;">
				    <a class="app-logo" th:href=@{/dashboard}>
				        <img class="d-none d-lg-block" src="assets/img/logo.png" alt="logo" style="width:200px; height:50px; max-width:100%; padding:0 2px 0 10px; margin:0;">
				    </a>
				  <!--   <i class="bi bi-chevron-double-left toggle-sidebar-btn" onclick="toggleIconRotation()"></i> -->
			</div>	
   <!-- Include the header fragment -->
   <div th:replace="fragments/header :: header"></div>

  </header><!-- End Header -->
  
   <!-- =======Super Admin Header ======= -->
  <header id="header" class="header fixed-top d-flex align-items-center" th:if="${empDetailsByEmpId.deptId == 0}">

    <div class="d-flex align-items-center" style="width:100%; margin:0 0 0 10px; padding:5px;">
				    <a class="app-logo" th:href=@{/dashboard}>
				        <img class="d-none d-lg-block" src="assets/img/logo.png" alt="logo" style="width:200px; height:50px; max-width:100%; padding:0 2px 0 10px; margin:0;">
				    </a>
				   <!--  <i class="bi bi-chevron-double-left toggle-sidebar-btn" onclick="toggleIconRotation()"></i> -->
	</div><!-- End Logo -->

    <div th:replace="fragments/superAdminHeader :: header"></div>

  </header><!-- End Header -->

  <!-- ======= Sidebar ======= -->
  
<aside id="sidebar" class="sidebar">
<input type="hidden" id="employee-id" th:value="${empDetailsByEmpId.deptId}">
    <ul class="sidebar-nav" id="sidebar-nav">
		 
<li class="nav-item" th:if="${empDetailsByEmpId.deptId>0}">
            <a class="nav-link" th:href="@{/userDashboard}">
                <i class="bi bi-grid"></i>
                <span>Dashboard</span>
            </a>
        </li>
         <li class="nav-item" th:if="${empDetailsByEmpId.deptId>0}">
            <a class="nav-link" th:href="@{/viewAdminProfile(empid=${empDetailsByEmpId.empid})}">
                <i class="bi bi-person"></i>
                 <span>My Profile</span>
            </a>
        </li>  
        <li class="nav-item" th:if="${empDetailsByEmpId.deptId>0}">
            <a class="nav-link" th:href="@{/attendanceLive(email=${empDetailsByEmpId.email})}">
                <i class="bi bi-calendar3"></i>
                <span>Attendence</span>
            </a> 
        </li>      
        <li class="nav-item" th:if="${empDetailsByEmpId.deptId>0}">
            <a class="nav-link" th:href="@{/groupMailId}">
                <i class="bi bi-telephone"></i>
                <span>Communications</span>
            </a>
        </li>
       <!--  <li class="nav-item" th:if="${empDetailsByEmpId.deptId>0}">
            <a class="nav-link " th:href="@{/InterCommDetails}">
                <i class="bi bi-telephone"></i>
                <span>InterComm Details</span>
            </a>
        </li> -->
        <li class="nav-item" th:if="${empDetailsByEmpId.deptId>0}">
            <a class="nav-link" th:href="@{/adminHoliday}">
                <i class="bi bi-calendar4-week"></i>
                <span>Holiday List</span>
            </a>
        </li>
        <li class="nav-item" th:if="${empDetailsByEmpId.deptId>0}">
		    <a class="nav-link" th:href="@{/employee}">
		        <i class="bi bi-people"></i>	
		        <span>Employee</span>
		    </a>
	   </li> 
        <li class="nav-item" th:if="${empDetailsByEmpId.deptId>0}">
            <a class="nav-link active" th:href="@{/viewAdminLeaves(empid=${empDetailsByEmpId.empid})}">
                <i class="bi bi-card-text"></i>
                <span>Team Leaves</span>
            </a>
        </li>
       <li class="nav-item" th:if="${empDetailsByEmpId.deptId>0}">
            <a class="nav-link" th:href="@{/events}">
                <i class="bi bi-megaphone"></i>
                <span>Announcement</span>
            </a>
        </li>                
        <li class="nav-item" th:if="${empDetailsByEmpId.deptId>0}">
            <a class="nav-link" th:href="@{/asset}">
                <i class="bi bi-wallet"></i>
                <span>Assets</span>
            </a>
        </li>
        <li class="nav-item" th:if="${empDetailsByEmpId.deptId>0}">
            <a class="nav-link" th:href="@{/ongoingProject}">
                <i class="bi bi-card-heading"></i>
                <span>Projects</span>
            </a>
        </li>   
         <!-- <li class="nav-item" th:if="${empDetailsByEmpId.deptId>0}">
            <a class="nav-link" th:href="@{/viewAdminPayslip(empid=${empDetailsByEmpId.empid})}">
                <i class="bi bi-file-text"></i>
                <span>Payslip</span>
            </a>
        </li>  -->    
         <!-- Loop through the permissions map -->
       <li class="nav-item" th:if="${permissions.interviewAccess && empDetailsByEmpId.deptId>0}" >
            <a class="nav-link" th:href="@{/moatIframe}">
                <i class="bi bi-vector-pen"></i>
                <span>Interview</span>
            </a>
        </li>
        <li class="nav-item" th:if="${permissions.sales && empDetailsByEmpId.deptId>0}" >
            <a class="nav-link" th:href="@{/sales}">
                <i class="bi bi-cart3"></i>
                <span>Sales</span>
            </a>
        </li>
        <li class="nav-item" th:if="${permissions.accountsAccess && empDetailsByEmpId.deptId>0}" >
            <a class="nav-link" th:href="@{/accounts}">
                <i class="bi bi-person-vcard"></i>
                <span>Accounts</span>
            </a>
        </li>
        <li class="nav-item" th:if="${permissions.storeAccess && empDetailsByEmpId.deptId>0}" >
            <a class="nav-link" th:href="@{/store}">
                <i class="bi bi-shop-window"></i>
                <span>Store</span>
            </a>
        </li>
        <li class="nav-item" th:if="${permissions.apprisalAccess && empDetailsByEmpId.deptId>0}" >
            <a class="nav-link" id="apprisalLink" th:href="@{/apprisal(empid=${empDetailsByEmpId.empid})}">
		        <i class="bi bi-file-text"></i>
		        <span>Appraisal</span>
		    </a>
        </li>
        <li class="nav-item" th:if="${empDetailsByEmpId.deptId>0}">
		    <a class="nav-link" id="apprisalLink" th:href="@{/employeeApprisal(empid=${empDetailsByEmpId.empid})}">
		        <i class="bi bi-file-text"></i>
		        <span>Employee Appraisal</span>
		    </a>
		</li>
		<li class="nav-item" th:if="${empDetailsByEmpId.deptId>0}">
				<a class="nav-link" th:href="@{/my-favorites}">
					<i class="bi bi-layout-text-window-reverse"></i>
					<span>To-Chat & Remind</span>
				</a>
		</li>
        
        <li class="nav-item" th:if="${empDetailsByEmpId.deptId==0}">
		    <a class="nav-link " th:href="@{/navbar}">
		        <i class="bi bi-grid"></i>
		        <span>Dashboard</span>
		    </a>
	    </li>
	    <li class="nav-item" th:if="${empDetailsByEmpId.deptId==0}">
            <a class="nav-link" th:href="@{/attendanceLive(email=${empDetailsByEmpId.email})}">
                <i class="bi bi-calendar3"></i>
                <span>Attendence</span>
            </a>
       </li>
        <li class="nav-item" th:if="${empDetailsByEmpId.deptId==0}">
		    <a class="nav-link" th:href="@{/adminHoliday}">
		        <i class="bi bi-calendar4-week"></i>
		        <span>Holiday List</span>
		    </a>
	 </li>	
	 
	 <li class="nav-item" th:if="${empDetailsByEmpId.deptId==0}">
		    <a class="nav-link" th:href="@{/groupMailId}">
		        <i class="bi bi-telephone"></i>
		        <span>Employee Contacts</span>
		    </a>
	 </li>
	  <!-- <li class="nav-item" th:if="${empDetailsByEmpId.deptId==0}">
            <a class="nav-link"  th:href="@{/InterCommDetails}">
                <i class="bi bi-telephone"></i>
                <span>InterComm Details</span>
            </a>
      </li> -->
      <li class="nav-item" th:if="${empDetailsByEmpId.deptId==0}">
		    <a class="nav-link" th:classappend="${empDetailsByEmpId.deptId==0} ? ' active'" th:href="@{/viewAdminLeaves(empid=${empDetailsByEmpId.empid})}">
		        <i class="bi bi-calendar4-week"></i>
		        <span>Team Leaves</span>
		    </a>
	 </li>
	 <li class="nav-item" th:if="${empDetailsByEmpId.deptId==0}">
		    <a class="nav-link" th:href="@{/events}">
		        <i class="bi bi-megaphone"></i>
		        <span>Announcement</span>
		    </a>
	 </li> 
        <li class="nav-item" th:if="${empDetailsByEmpId.deptId==0}">
		    <a class="nav-link" th:href="@{/addDepartment}">
		        <i class="bi bi-calendar4-week"></i>
		        <span>Department</span>
		    </a>
	   </li>
	 <li class="nav-item" th:if="${empDetailsByEmpId.deptId==0}">
		    <a class="nav-link"  th:href="@{/addRole}">
		        <i class="bi bi-receipt"></i>
		        <span>Role</span>
		    </a>
	 </li>
	 <li class="nav-item" th:if="${empDetailsByEmpId.deptId==0}">
		    <a class="nav-link" th:href="@{/employee}">
		        <i class="bi bi-people"></i>
		        <span>Employees</span>
		    </a>
	 </li> 
	
      <li class="nav-item" th:if="${empDetailsByEmpId.deptId==0}">
            <a class="nav-link"  th:href="@{/ongoingProject}">
                <i class="bi bi-calendar3"></i>
                <span>Projects</span>
            </a>
      </li>  
      <li class="nav-item" th:if="${empDetailsByEmpId.deptId==0}">
            <a class="nav-link"  th:href="@{/asset}">
                <i class="bi bi-wallet"></i>
                <span>Assets</span>
            </a>
      </li>   
      <li class="nav-item" th:if="${permissions.interviewAccess && empDetailsByEmpId.deptId==0}" >
            <a class="nav-link" th:href="@{/moatIframe}">
                <i class="bi bi-vector-pen"></i>
                <span>Interview</span>
            </a>
        </li>
        <li class="nav-item" th:if="${permissions.sales && empDetailsByEmpId.deptId==0}" >
            <a class="nav-link" th:href="@{/sales}">
                <i class="bi bi-cart3"></i>
                <span>Sales</span>
            </a>
        </li>
        <li class="nav-item" th:if="${permissions.accountsAccess && empDetailsByEmpId.deptId==0}" >
            <a class="nav-link" th:href="@{/accounts}">
                <i class="bi bi-person-vcard"></i>
                <span>Accounts</span>
            </a>
        </li>
        <li class="nav-item" th:if="${permissions.storeAccess && empDetailsByEmpId.deptId==0}" >
            <a class="nav-link" th:href="@{/store}">
                <i class="bi bi-shop-window"></i>
                <span>Store</span>
            </a>
        </li> 
        <li class="nav-item" th:if="${permissions.storeAccess && empDetailsByEmpId.deptId==0}">
				<a class="nav-link" th:href="@{/my-favorites}">
					<i class="bi bi-layout-text-window-reverse"></i>
					<span>To-Chat & Remind</span>
				</a>
		</li>
    </ul>
</aside>

  <main id="main" class="main">
<input type="hidden" id="emp_idSessionValue" th:value="${empDetailsByEmpId.empid}">
    
   <div class="pagetitle d-flex"  th:if="${empDetailsByEmpId.deptId==0}">
      <i class="bi bi-chevron-double-left toggle-sidebar-btn mb-1" onclick="toggleIconRotation()" style="font-size:24px;color:#2F73B9;padding:0 10px;margin-left:-10px;margin-top:-10px"></i>
      <nav>
        <ol class="breadcrumb">
          <li class="breadcrumb-item"><a th:href="@{/navbar}">Home</a></li>
          <li class="breadcrumb-item active">Leave Request</li>
        </ol>
      </nav>
    </div><!-- End Page Title --><!-- End Page Title -->
    
    <div class="pagetitle mb-0 d-flex"  th:if="${empDetailsByEmpId.deptId>0}">
     <i class="bi bi-chevron-double-left toggle-sidebar-btn mb-1" onclick="toggleIconRotation()" style="font-size:24px;color:#2F73B9;padding:0 10px;margin-left:-10px;margin-top:-10px"></i>
      <nav>
        <ol class="breadcrumb mb-0">
          <li class="breadcrumb-item"><a th:href="@{/userDashboard}">Home</a></li>
          <li class="breadcrumb-item active">Leave Request</li>
        </ol>
      </nav>
    </div><!-- End Page Title -->
    
    <input type="hidden" id="roleValue" th:value="${session.role_name}">
    <!-- Modal -->
	<div class="modal fade" id="confirmModal" tabindex="-1" aria-labelledby="confirmModalLabel" aria-hidden="true">
	  <div class="modal-dialog">
	    <div class="modal-content">
	      <div class="modal-header">
	        <h5 class="modal-title" id="confirmModalLabel">Confirm Action</h5>
	        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
	      </div>
	      <div class="modal-body">
	        Are you sure you want to <span id="actionType"></span> this leave request?
	      </div>
	      <div class="modal-footer">
	        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
	        <button type="button" class="btn btn-primary" id="confirmButton">Confirm</button>
	      </div>
	    </div>
	  </div>
	</div>
	<!-- Success Modal -->
	<div class="modal fade" id="successModal" tabindex="-1" aria-labelledby="successModalLabel" aria-hidden="true">
	  <div class="modal-dialog">
	    <div class="modal-content">
	      <div class="modal-header">
	        <h5 class="modal-title" id="successModalLabel">Success</h5>
	        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
	      </div>
	      <div class="modal-body">
	        The leave request was successfully <span id="successAction"></span>.
	      </div>
	      <div class="modal-footer">
	        <button type="button" id="successOkButton" class="btn btn-primary" data-bs-dismiss="modal">OK</button>
	      </div>
	    </div>
	  </div>
	</div>

	<!-- Error Modal -->
	<div class="modal fade" id="errorModal" tabindex="-1" aria-labelledby="errorModalLabel" aria-hidden="true">
	  <div class="modal-dialog">
	    <div class="modal-content">
	      <div class="modal-header">
	        <h5 class="modal-title" id="errorModalLabel">Error</h5>
	        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
	      </div>
	      <div class="modal-body">
	        There was an error <span id="errorAction"></span> the leave request. Please try again.
	      </div>
	      <div class="modal-footer">
	        <button type="button" class="btn btn-danger" data-bs-dismiss="modal" style="color:white">OK</button>
	      </div>
	    </div>
	  </div>
	</div>
	<!-- Rejection Reason Modal -->
	<div class="modal fade" id="rejectModal" tabindex="-1" aria-labelledby="rejectModalLabel" aria-hidden="true">
	  <div class="modal-dialog">
	    <div class="modal-content">
	      <div class="modal-header">
	        <h5 class="modal-title" id="rejectModalLabel">Reject Leave Request</h5>
	        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
	      </div>
	      <div class="modal-body">
	        <div class="mb-3">
	          <label for="rejectionReason" class="form-label">Please provide a reason for rejection:</label>
	          <textarea class="form-control" id="rejectionReason" rows="3"></textarea>
	        </div>
	      </div>
	      <div class="modal-footer">
	        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
	        <button type="button" class="btn btn-primary" id="confirmRejectButton">Reject</button>
	      </div>
	    </div>
	  </div>
	</div>
					<!-- Feedback Modal -->
			<div class="modal fade" id="feedbackModal" tabindex="-1" aria-labelledby="feedbackModalLabel" aria-hidden="true">
			    <div class="modal-dialog">
			        <div class="modal-content rounded-4 shadow-lg">
			            <div class="modal-header border-0">
			                <h5 class="modal-title" id="feedbackModalLabel">Feedback Form</h5>
			                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
			            </div>
			            <div class="modal-body">
			                <form id="feedbackForm" method="post" enctype="multipart/form-data">
			                    <div class="mb-3" style="display: none;">
			                        <label for="feedbackName" class="form-label fw-bold">Your Name</label>
			                        <input type="text" class="form-control" id="feedbackName" name="name" th:value="${empDetailsByEmpId.fullName}" readonly>
			                    </div>
			                    <div class="mb-3" style="display: none;">
			                        <label for="feedbackEmail" class="form-label fw-bold">Your Email</label>
			                        <input type="email" class="form-control" id="feedbackEmail" name="email" th:value="${empDetailsByEmpId.email}" readonly>
			                    </div>
			                    <div class="mb-3">
			                        <label for="feedbackEmailyy" class="form-label fw-bold">To</label>
			                        <div class="to-field-container">
			                            <span class="to-field rounded-pill px-3 py-2 shadow-sm">bugs_msplconnect@melangesystems.com</span>
			                        </div>
			                    </div>
								<div class="mb-3">
								    <label for="bugType" class="form-label fw-bold">Bug Type</label>
								    <select class="form-control" id="bugType" name="bugType" required>
								        <option value="About Application">About Application</option>
								        <option value="New Feature">New Feature</option>
								    </select>
								</div>

			                    <div class="mb-3">
			                        <label for="feedbackMessage" class="form-label fw-bold">Message</label>
			                        <textarea class="form-control" id="feedbackMessage" name="message" rows="4" placeholder="Enter your feedback here..." required></textarea>
			                    </div>
			                    <div class="mb-3">
			                        <label for="feedbackAttachment" class="form-label fw-bold">Attachment (optional)</label>
			                        <input type="file" class="form-control" id="feedbackAttachment" name="attachment" accept=".png, .jpg, .jpeg" multiple>
			                        <small class="text-muted">Max size: 5MB. You can upload multiple images.</small>
			                    </div>
			                    <button type="submit" class="btn btn-primary w-100 mt-3 py-2 shadow-sm" id="submitFeedbackBtn">Submit Feedback</button>
			                </form>
			            </div>
			        </div>
			    </div>
			</div>
	<!-- model to edit leave request -->

	<div id="editModal" class="modal fade" tabindex="-1" role="dialog" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-xl" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Edit Leave Request</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <form id="editForm" class="row g-3">
                    <!-- Left Column -->
                    <div class="col-md-6">
                        <div class="mb-3">
                        	<input type="hidden" id="reqEmpId">
                        	<input type="hidden" id="reqId">
                            <label for="employeeName" class="form-label">Emloyee Name</label>
                            <input type="text" id="employeeName" class="form-control" readonly>
                        </div>
                         <div class="mb-3">
                            <label for="fromDate" class="form-label">From Date</label>
                            <input type="date" id="fromDate" class="form-control">
                        </div>
                         <div class="mb-3">
						    <label class="form-label">Day Duration</label>
						    <div>
						        <input type="radio" id="fullDay" name="leaveDuration" value="Full Day">
						        <label for="fullDay">Full Day</label>
						        <input type="radio" id="halfDay" name="leaveDuration" value="Half Day">
						        <label for="halfDay">Half Day</label>
						    </div>
						</div>
                    </div>

                    <!-- Right Column -->
                    <div class="col-md-6">
                        <div class="mb-3">
                            <label for="leaveType" class="form-label">Leave Type</label>
                            <select id="leaveType" class="form-select">
                                <option value="CL">Casual Leave</option>
                                <option value="SL">SL</option>
                                <option value="lOP">LOP</option>
                                <option value="EL">Earned Leave</option>
                            </select>
                        </div>
                        
                        <div class="mb-3">
                            <label for="toDate" class="form-label">To Date</label>
                            <input type="date" id="toDate" class="form-control">
                        </div>
                      
                       
                    </div>

                    <!-- Full-Width Row -->
                    <div class="col-12">
                        <div class="mb-3">
                            <label for="reason" class="form-label">Reason</label>
                            <textarea id="reason" class="form-control"></textarea>
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                <button type="button" class="btn btn-primary" onclick="saveChanges()">Save Changes</button>
            </div>
        </div>
    </div>
</div>
<!-- model to display leave Request -->
<div class="modal fade" id="leaveDetailsModal" tabindex="-1" role="dialog"
							aria-labelledby="leaveDetailsModalLabel" aria-hidden="true">
							<div class="modal-dialog" role="document">
								<div class="modal-content">
									<div class="modal-header">
										<h5 class="modal-title" id="leaveDetailsModalLabel">Leave Details</h5>
										<button type="button" class="btn-close" data-bs-dismiss="modal"
											aria-label="Close"></button>
									</div>
									<div class="modal-body">
										<table class="table">
											<thead>
												<tr>
													<th>Leave Type</th>
													<th>Added</th>
													<th>Used</th>
													<th>Remaining</th>
												</tr>
											</thead>
											<tbody id="leaveRecordsTable">
												<!-- Dynamic content will be inserted here -->
											</tbody>
										</table>
									</div>
									<div class="modal-footer">
										<button type="button" class="btn btn-secondary"
											data-bs-dismiss="modal">Close</button>
									</div>
								</div>
							</div>
						</div>


				<!-- modal for display success or failure of leave request modification -->
				<div class="modal fade" id="statusModal" tabindex="-1" aria-labelledby="statusModalLabel" aria-hidden="true">
				  <div class="modal-dialog modal-dialog-centered">
				    <div class="modal-content">
				      <div class="modal-header">
				        <h5 class="modal-title" id="statusModalLabel">Status</h5>
				        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
				      </div>
				      <div class="modal-body" id="statusModalBody">
				        <!-- Message will be set dynamically -->
				      </div>
				      <div class="modal-footer">
				        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
				      </div>
				    </div>
				  </div>
				</div>
			<!-- loding spinner -->
			<div id="loadingPopup" style="display:none">
			    <div class="spinner"></div>
			    <p>Loading please wait...</p>
			</div> 
			<!-- end edit model -->
			    
			    <section class="section dashboard">
			      <div class="row">

            <!-- <div class="col-lg-4" id="groupMailIdForm">
					<div class="card">
						<div class="card-body">
							<h5 class="card-title">Group Mail Id Form</h5>

						<form class="addCompProjectForm addEmployeeFormWithValidation" action="saveGroupMailIdList" method="post">
							<input type="date" style="display: none;" name="announced_date" id="assignedSubmitDate">
							<div class="row jumbotron box8">
							
								   <div class="col-sm-12 form-group mb-4">
										<input type="email"
											class="form-control eventCustom_textfield"
											name="main_mail_id" id="main_mail_id" placeholder="Main mail id"
											required>
									</div>
									<div class="col-sm-12 form-group mb-4">
										<input type="email" name="sub_mail_id"
													class="form-control eventCustom_textfield" id="sub_mail_id"
													placeholder="Sub mail id">
									</div>
									<div class="col-sm-12 form-group mb-4">
										<textarea
												class="form-control compProjectCustom_textArea2 groupMailIdCustom_textArea"
												placeholder="Group mail id with comma seperated" id="group_mail_id"
												name="group_mail_id" required></textarea>
									</div>

									<div class="col-sm-12 form-group mb-4 customize_btn_div">
										<button type="submit" class="btn btn-outline-primary">Add</button>
										<button type="reset" class="btn btn-outline-secondary">Clear</button>
									</div>
							</div>
						</form>

						</div>
					</div>
				</div> -->
				
				<div class="col-lg-12" id="groupMailIdTable">
					<div class="row">
						<div class="col-lg-12">	
							<div class="card">
								<div class="card-body table-responsive p-0">
								  <div class="d-flex justify-content-between">
								 	 <h5 class="card-title mt-0 pt-0">Leave Requests</h5>
								 	 <div>
									   <div id="searchUnapproved" class="search-box m-1">
										    <button class="btn-search searchUnprovedTable" title="Search"><i class="bi bi-search"></i></button>
										    <input type="text" oninput="searchUnprovedTable();" class="input-search searchUnprovedTable_inputSearch" placeholder="Search...">
										</div>
										<div id="searchApproved" class="search-box m-1" style="display: none;">
										    <button class="btn-search searchApprovedTable" title="Search"><i class="bi bi-search"></i></button>
										    <input type="text" oninput="searchApprovedTable();" class="input-search searchApprovedTable_inputSearch" placeholder="Search...">
										</div>
										<div id="searchRejected" class="search-box m-1" style="display: none;">
										    <button class="btn-search searchRejectedTable" title="Search"><i class="bi bi-search"></i></button>
										    <input type="text" oninput="searchRejectedTable();" class="input-search searchRejectedTable_inputSearch" placeholder="Search...">
										</div>
									</div>
								  </div>
										 <!-- Bordered Tabs Justified -->
							              <ul class="nav nav-tabs nav-tabs-bordered d-flex" id="borderedTabJustified" role="tablist">
										    <li class="nav-item flex-fill" role="presentation">
										        <button class="nav-link w-100 active" id="home-tab" data-bs-toggle="tab" data-bs-target="#bordered-justified-home" type="button" role="tab" aria-controls="home" aria-selected="true">Unapproved</button>
										    </li>
										    <li class="nav-item flex-fill" role="presentation">
										        <button class="nav-link w-100" id="profile-tab" data-bs-toggle="tab" data-bs-target="#bordered-justified-profile" type="button" role="tab" aria-controls="profile" aria-selected="false">Approved</button>
										    </li>
										    <li class="nav-item flex-fill" role="presentation">
										        <button class="nav-link w-100" id="profile-tab" data-bs-toggle="tab" data-bs-target="#bordered-justified-rejected" type="button" role="tab" aria-controls="profile" aria-selected="false">Rejected</button>
										    </li>
										</ul>
									

									<div class="tab-content pt-2" id="borderedTabJustifiedContent">

										<!-- Home Tab Content -->
										<div class="tab-pane fade show active"
											id="bordered-justified-home" role="tabpanel"
											aria-labelledby="home-tab"	>
											<!-- Dropdown to select rows per page -->
											<!-- <div style="margin-bottom: 10px;">
												<label for="rowsPerPage">Rows per page:</label> <select
													id="rowsPerPage" onchange="updateRowsPerPage()">
													<option value="5">5</option>
													<option value="10">10</option>
													<option value="15">15</option>
													<option value="20">20</option>
													<option value="All">All</option>
													"All" option
												</select>
											</div> -->
											
											
											
											<div style="max-height: 400px;min-height:390px; overflow-y: auto;">
		   											 <table id="holidayTable2" class="table table-striped table-hover mb-0 holidayTable">
														<thead style="position: sticky; top: 0; background-color: #f8f9fa; z-index: 10;">
															<tr>
																<th>Sl No</th>
																<th>Action</th>
		
																<th>Employee Id</th>
																<th>Employee Name</th>
																<th>Leave Type</th>
		
																<th>From</th>
																<th>To</th>
																<th>Requested On</th>
		
																<th>Duration</th>
																<th>Reason</th>
		
																<th>Status</th>
																<!-- <th>Approved/Rejected By</th> -->
																<!-- <th>Rejected Reason</th>	 -->
															</tr>
														</thead>
														<tbody>
														  
															<tr th:if="${usersList.empty}">
																<td colspan="11" class="text-center">No data found</td>
															</tr>
															
															<tr th:each="userlist, stat : ${usersList}" th:attr="data-way=${userlist.way}">
																<td th:text="${stat.index + 1}"
																	th:classappend="${userlist.way==1?'highlight-row':''}"></td>
																<td th:classappend="${userlist.way==1?'highlight-row':''}"
																	style="white-space: nowrap;">
																	<div
																		style="display: flex; gap: 10px; align-items: center;">
																		
																		<i class="bx bx-check text-success" title="Approve"
																			th:onclick="approveLeave('[[${userlist.id}]]','Approved')"
																			style="font-size: 22px;"></i> 
																			
																	   <i class="bx bx-x text-danger" title="Reject"
																			th:onclick="approveLeave('[[${userlist.id}]]','Reject')"
																			style="font-size: 22px;"></i> 
																	 		
																	   <i class="bx bx-calendar-check text-success"
																			title="Leave Balance"
																			th:onclick="displayLeaveBalance('[[${userlist.employeeEmail}]]')"
																			style="font-size: 22px; cursor: pointer;"></i> 
																			
																	   <i class="bx bx-edit text-primary" title="Edit"
																			th:data-id="${userlist.id}"
																			th:data-emp-id="${userlist.empid}"
																			th:data-employee-name="${userlist.employee_name}"
																			th:data-leave-type="${userlist.leaveType}"
																			th:data-from-date="${userlist.from_date}"
																			th:data-to-date="${userlist.to_date}"
																			th:data-reason="${userlist.reason}"
																			th:data-duration="${userlist.leaveDuration}"
																			th:if="${userlist.edit_flag == 0}"
																			onclick="openEditModal(this)" style="font-size: 22px;">
																		</i>
																	</div>
																</td>
																<td th:text="${userlist.empid}"
																	th:classappend="${userlist.way==1?'highlight-row':''}"></td>
																<td th:text="${userlist.employee_name}"
																	th:classappend="${userlist.way==1?'highlight-row':''}"></td>
																<td th:text="${userlist.leaveType}"
																	th:classappend="${userlist.way==1?'highlight-row':''}"></td>
																<td th:text="${userlist.from_date}"
																	th:classappend="${userlist.way==1?'highlight-row':''}"></td>
																<td th:text="${userlist.to_date}"
																	th:classappend="${userlist.way==1?'highlight-row':''}"></td>
																<td th:text="${userlist.requested_date}"
																	th:classappend="${userlist.way==1?'highlight-row':''}"></td>
																<td th:text="${userlist.leaveDuration}"
																	th:classappend="${userlist.way==1?'highlight-row':''}"></td>
																<td th:text="${userlist.reason}"
																	th:classappend="${userlist.way==1?'highlight-row':''}"></td>
																<td th:text="${userlist.approvedstatus}"
																	th:classappend="${userlist.way==1?'highlight-row':''}"></td>
																<!-- <td th:text="${userlist.approved_by}"
																	th:classappend="${userlist.way==1?'highlight-row':''}"></td> -->
																<!-- <td th:text="${userlist.rejection_reason}"
																	th:classappend="${userlist.way==1?'highlight-row':''}"></td> -->
															</tr>
														</tbody>	
													</table>
											</div>
										</div>
										<!-- Profile Tab Content -->
										<div class="tab-pane fade" id="bordered-justified-profile" role="tabpanel" th:if="${empDetailsByEmpId.deptId!=74}"
											aria-labelledby="profile-tab">
											
											<div style="max-height: 400px;min-height:390px; overflow-y: auto;">
											    <table id="holidayTable3" class="table table-striped table-hover mb-0 holidayTable">
											        <thead style="position: sticky; top: 0; background-color: #f8f9fa; z-index: 10;">
											            <tr>
											                <th>Sl No</th>  
											                <th>Action</th>
											                <th>Employee Id</th>
											                <th>Employee Name</th>
											                <th>Leave Type</th>                                               
											                <th>From</th>
											                <th>To</th>
											                <th>Requested On</th>
											                <th>Duration</th>
											                <th>Reason</th>
											                <th>Status</th>
											                <th>Approved By</th>
											                <!-- <th>Rejected Reason</th> -->
											            </tr>
											        </thead>
											        <tbody>
											        
											            <!-- Rows with data -->
											            <tr th:each="adminDeptProccessedLeaveRequest, stat1 : ${adminDeptProccessedLeaveRequests}">
											                <td th:text="${stat1.index + 1}"></td>
											                <td>
											                    <div style="display: flex; gap: 10px; align-items: center;">
											                        <i class="bx bx-check text-success" title="Approve"
											                           th:onclick="approveLeave('[[${adminDeptProccessedLeaveRequest.id}]]','Approved')"
											                           style="font-size: 22px;"></i>
											                        <i class="bx bx-x text-danger" title="Reject"
											                           th:onclick="approveLeave('[[${adminDeptProccessedLeaveRequest.id}]]','Reject')"
											                           style="font-size: 22px;"></i>
											                        <i class="bx bx-calendar-check text-success" title="Leave Balance"
											                           th:onclick="displayLeaveBalance('[[${adminDeptProccessedLeaveRequest.employeeEmail}]]')"
											                           style="font-size: 22px; cursor: pointer;"></i>
											                        <i class="bx bx-edit text-primary" title="Edit"
											                           th:data-id="${adminDeptProccessedLeaveRequest.id}"
											                           th:data-emp-id="${adminDeptProccessedLeaveRequest.empid}"
											                           th:data-employee-name="${adminDeptProccessedLeaveRequest.employee_name}"
											                           th:data-leave-type="${adminDeptProccessedLeaveRequest.leaveType}"
											                           th:data-from-date="${adminDeptProccessedLeaveRequest.from_date}"
											                           th:data-to-date="${adminDeptProccessedLeaveRequest.to_date}"
											                           th:data-reason="${adminDeptProccessedLeaveRequest.reason}"
											                           th:data-duration="${adminDeptProccessedLeaveRequest.leaveDuration}"
											                           th:if="${adminDeptProccessedLeaveRequest.edit_flag == 0}"
											                           onclick="openEditModal(this)" style="font-size: 22px;"></i>
											                    </div>
											                </td>
											                <td th:text="${adminDeptProccessedLeaveRequest.empid}"></td>
											                <td th:text="${adminDeptProccessedLeaveRequest.employee_name}"></td>
											                <td th:text="${adminDeptProccessedLeaveRequest.leaveType}"></td>
											                <td th:text="${adminDeptProccessedLeaveRequest.from_date}"></td>
											                <td th:text="${adminDeptProccessedLeaveRequest.to_date}"></td>
											                <td th:text="${adminDeptProccessedLeaveRequest.requested_date}"></td>
											                <td th:text="${adminDeptProccessedLeaveRequest.leaveDuration}"></td>
											                <td th:text="${adminDeptProccessedLeaveRequest.reason}"></td>
											                <td th:text="${adminDeptProccessedLeaveRequest.approvedstatus}"></td>
											                <td th:text="${adminDeptProccessedLeaveRequest.approved_by}"></td>
											                <!-- <td th:text="${adminDeptProccessedLeaveRequest.rejection_reason}"></td> -->
											            </tr>
											            
											             <tr th:if="${#lists.isEmpty(adminDeptProccessedLeaveRequests)}">
												                <td colspan="12" class="text-center">No data found</td>
												         </tr>
											        </tbody>
											    </table>
											</div>

										</div>
										<div class="tab-pane fade" id="bordered-justified-rejected"
											role="tabpanel" th:if="${empDetailsByEmpId.deptId!=74}"
											aria-labelledby="profile-tab">

											<div style="max-height: 400px;min-height:390px; overflow-y: auto;">
												<table id="rejectedLeaves" class="table table-striped table-hover mb-0 holidayTable">
													<thead style="position: sticky; top: 0; background-color: #f8f9fa; z-index: 10;">
														<tr>
															<th>Sl  No</th>
															<th style="margin: 0 30px;">Action</th>
															<th>Employee Id</th>
															<th>Employee Name</th>
															<th>Leave Type</th>

															<th>From</th>
															<th>To</th>
															<th>Requested On</th>
															<th>Duration</th>
															<th>Reason</th>
															<th>Status</th>
															<th>Rejected By</th>
															<th>Rejected Reason</th>
														</tr>
													</thead>
													<tbody>														 
														<tr th:each="adminDeptRejectedLeaveRequest, stat : ${adminDeptRejectedLeaveRequests}"
															th:if="${adminDeptRejectedLeaveRequest.approvedstatus == 'Rejected'}">
															<td th:text="${stat.index + 1}"></td>
															<td>
																<div
																	style="display: flex; gap: 10px; align-items: center;">
																	<i class="bx bx-check text-success" title="Approve"
																		th:onclick="approveLeave('[[${adminDeptRejectedLeaveRequest.id}]]','Approved')"
																		style="font-size: 22px;"></i> <i
																		class="bx bx-x text-danger" title="Reject"
																		th:onclick="approveLeave('[[${adminDeptRejectedLeaveRequest.id}]]','Reject')"
																		style="font-size: 22px;"></i> <i
																		class="bx bx-calendar-check text-success"
																		title="Leave Balance"
																		th:onclick="displayLeaveBalance('[[${adminDeptRejectedLeaveRequest.employeeEmail}]]')"
																		style="font-size: 22px; cursor: pointer;"></i> <i
																		class="bx bx-edit text-primary" title="Edit"
																		th:data-id="${adminDeptRejectedLeaveRequest.id}"
																		th:data-emp-id="${adminDeptRejectedLeaveRequest.empid}"
																		th:data-employee-name="${adminDeptRejectedLeaveRequest.employee_name}"
																		th:data-leave-type="${adminDeptRejectedLeaveRequest.leaveType}"
																		th:data-from-date="${adminDeptRejectedLeaveRequest.from_date}"
																		th:data-to-date="${adminDeptRejectedLeaveRequest.to_date}"
																		th:data-reason="${adminDeptRejectedLeaveRequest.reason}"
																		th:data-duration="${adminDeptRejectedLeaveRequest.leaveDuration}"
																		th:if="${adminDeptRejectedLeaveRequest.edit_flag == 0}"
																		onclick="openEditModal(this)" style="font-size: 22px;"></i>
																</div>
															</td>
															<td th:text="${adminDeptRejectedLeaveRequest.empid}"></td>
															<td
																th:text="${adminDeptRejectedLeaveRequest.employee_name}"></td>
															<td th:text="${adminDeptRejectedLeaveRequest.leaveType}"></td>

															<td th:text="${adminDeptRejectedLeaveRequest.from_date}"></td>
															<td th:text="${adminDeptRejectedLeaveRequest.to_date}"></td>
															<td
																th:text="${adminDeptRejectedLeaveRequest.requested_date}"></td>
															<td
																th:text="${adminDeptRejectedLeaveRequest.leaveDuration}"></td>
															<td th:text="${adminDeptRejectedLeaveRequest.reason}"></td>
															<td
																th:text="${adminDeptRejectedLeaveRequest.approvedstatus}"></td>
															<td
																th:text="${adminDeptRejectedLeaveRequest.approved_by}"></td>
															<td
																th:text="${adminDeptRejectedLeaveRequest.rejection_reason}"></td>
														</tr>
														 <!-- Display 'No data found' if the list is empty -->
											            <tr th:unless="${!#lists.isEmpty(adminDeptRejectedLeaveRequests)}">
											                <td colspan="13" style="text-align: center;">No data found</td>
											            </tr>
													</tbody>
												</table>
											</div>
										</div>
									</div>
									<!-- Pagination container -->
									<!-- <div id="pagination" style="text-align: center; margin-top: 10px;"></div> -->
								</div>
							</div>
						</div>
					</div>
				</div>
			</div><!-- End Left side columns -->
    </section>
  </main><!-- End #main -->

  <!-- ======= Footer ======= -->
  <footer id="footer" class="footer">
    <div class="copyright">
       Copyright &copy; <span id="currentYear"></span> <strong><span>Melange Systems Private Limited</span></strong>. All Rights Reserved
    </div>
  </footer>
  
  <script>
      var currentYear = new Date().getFullYear();
      document.getElementById("currentYear").innerHTML = currentYear;
  </script>

  <a href="#" class="back-to-top d-flex align-items-center justify-content-center"><i class="bi bi-arrow-up-short"></i></a>

  <!-- Vendor JS Files -->
  <script src="assets/vendor/apexcharts/apexcharts.min.js"></script>
  <script src="assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
  <script src="assets/vendor/chart.js/chart.umd.js"></script>
  <script src="assets/vendor/echarts/echarts.min.js"></script>
  <script src="assets/vendor/quill/quill.js"></script>
  <script src="assets/vendor/simple-datatables/simple-datatables.js"></script>
  <script src="assets/vendor/tinymce/tinymce.min.js"></script>
  <script src="assets/vendor/php-email-form/validate.js"></script>

  <!-- Template Main JS File -->
  <script src="assets/js/main.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>


<script>

var formattedDate;

$.ajax({
    type: 'GET', 
    url: 'fetchGroupMailIdData', 
    success: function(data) {
		console.log(JSON.stringify(data));
		updateGroupMailIdDetails(data);
		},
    error: function(xhr, status, error) {
        console.error('Error fetching data:', error);
        console.log('Error fetching data. Please try again.');
    }
});
  
function updateGroupMailIdDetails(data) {
    const tbody = $('#viewEmpDetailsTBody');
    tbody.empty();

    let currentMainMailId = null;
    let mainMailIdRowSpan = 0;
    let mainMailIdIndex = 0;

    data.forEach((item, index) => {
        if (item.main_mail_id !== currentMainMailId) {
            if (mainMailIdRowSpan > 1) {
                tbody.find(`tr:eq(${mainMailIdIndex}) td:eq(1)`).attr('rowspan', mainMailIdRowSpan);
            }

            currentMainMailId = item.main_mail_id;
            mainMailIdRowSpan = 1;
            mainMailIdIndex = tbody.children().length;

            tbody.append(`
                <tr>
                    <td class="cell border">${index + 1}</td>
                    <td class="cell border">${item.main_mail_id}</td>
                    <td class="cell border">${item.sub_mail_id || '-'}</td>
                    <td class="cell border">${formatGroupMailIds(item.group_mail_id)}</td>
                </tr>
            `);
        } else {
            mainMailIdRowSpan++;
            tbody.append(`
                <tr>
                    <td class="cell border">${index + 1}</td>
                    <td class="cell border" style="display: none;"></td>
                    <td class="cell border">${item.sub_mail_id || '-'}</td>
                    <td class="cell border">${formatGroupMailIds(item.group_mail_id)}</td>
                </tr>
            `);
        }
    });

    if (mainMailIdRowSpan > 1) {
        tbody.find(`tr:eq(${mainMailIdIndex}) td:eq(1)`).attr('rowspan', mainMailIdRowSpan);
    }
}

function formatGroupMailIds(groupMailIds) {
    if (!groupMailIds) return '';
    const ids = groupMailIds.split(',');
    let formatted = '<ul>';
    ids.forEach(id => {
        formatted += `<li>${id}</li>`;
    });
    formatted += '</ul>';
    return formatted;
}
  
</script>

<script>
	var loggedInRole = document.getElementById('roleValue').value;
	
	if(loggedInRole === "HR"){
		document.getElementById('employeeLink').style.display="block";
		document.getElementById('groupMailIdForm').style.display="block";
		//document.getElementById('compProjectLink').style.display="none";
		//document.getElementById('addEmployeeLink').style.display="block";
	}else if(loggedInRole === "Super Admin"){
		document.getElementById('employeeLink').style.display="none";
		document.getElementById('groupMailIdForm').style.display="none";
		document.getElementById('groupMailIdTable').style.width="100%";
		//document.getElementById('addEmployeeLink').style.display="none";
	}
</script>  

<!-- script to notification -->
<script>
// Function to fetch flag value from the backend
function fetchFlag() {
    $.get("/flag", function(response) {
        var leaveRequestCountValue = response;
        
       // If total notification count is greater than 0, show the bell icon
        if (leaveRequestCountValue.totalNotificationCount > 0) {
            $("#notificationBellIcon").show();  // Show bell icon
        } else {
            $("#notificationBellIcon").hide();  // Hide bell icon if no notifications
        }

        if (leaveRequestCountValue.leaveRequestFlagCount > 0) {
            $("#notificationBellIcon").show();  // Show bell icon
            $("#leaveRequestNotification").show();  // Show specific notification
            
            $("#leaveRequestMessage").text(leaveRequestCountValue.leaveRequestFlagCount + " leave request(s)");
            $(".badge-number").text(leaveRequestCountValue.leaveRequestFlagCount);
            $("#leaveRequestFlagCount").text(leaveRequestCountValue.leaveRequestFlagCount);
        }
        //display the asset notifu=ication based on asset count value
        if(leaveRequestCountValue.asseteRequestFlagCount>0){
        	
        	 $("#notificationBellIcon").show();  // Show bell icon
             $("#assetRequestNotification").show();  // Show specific notification
             
             $("#assetRequestMessage").text(leaveRequestCountValue.asseteRequestFlagCount + " asset request(s)");
             $(".badge-number").text(leaveRequestCountValue.totalNotificationCount);
             $("#asseteRequestFlagCount").text(leaveRequestCountValue.asseteRequestFlagCount);
        		
        }
        
        //display the new project notification based on asset count value
        if(leaveRequestCountValue.newPrjectValueCount>0){
        	 $("#notificationBellIcon").show();  // Show bell icon
             $("#newProjectNotification").show();  // Show specific notification
             
             $("#newProjectMessage").text(leaveRequestCountValue.newPrjectValueCount + " project request(s)");
             $(".badge-number").text(leaveRequestCountValue.totalNotificationCount);
             $("#newPrjectValueCount").text(leaveRequestCountValue.asseteRequestFlagCount);
        }

    	
    	//display the appraisal from HR notification ]
            if(leaveRequestCountValue.appraisalCount>0){
            	 $("#notificationBellIcon").show();  // Show bell icon
                 $("#hrAppraisal").show();  // Show specific notification
                 
                 $("#newProjectMessage").text(leaveRequestCountValue.appraisalCount + " Appraisal Form");
                 $(".badge-number").text(leaveRequestCountValue.totalNotificationCount);
                 $("#newPrjectValueCount").text(leaveRequestCountValue.asseteRequestFlagCount);
            }
            
          //display the appraisal from employee notification 
            if(leaveRequestCountValue.empAppraisalflag>0){
            	 $("#notificationBellIcon").show();  // Show bell icon
                 $("#empAppraisal").show();  // Show specific notification
                 
                 $("#apprisalempNotification").text(leaveRequestCountValue.empAppraisalflag + " employees sent appraisal");
                 $(".badge-number").text(leaveRequestCountValue.totalNotificationCount);
                 $("#newPrjectValueCount").text(leaveRequestCountValue.asseteRequestFlagCount);
            }
            
            //display the appraisal Due date notification 
            if(leaveRequestCountValue.adminAppraisalDuedate>0){
            	 $("#dueAppraisal").show();  // Show bell icon
                 $("#empAppraisal").show();  // Show specific notification
                 
                 $("#apprisalDueNotification").text("Tomorrow is the due date for submit appraisal");
                 $(".badge-number").text(leaveRequestCountValue.totalNotificationCount);
                 $("#newPrjectValueCount").text(leaveRequestCountValue.asseteRequestFlagCount);
            }
            
          //display the announcement notification based on asset count value
            if(leaveRequestCountValue.announcementNotification>0){
            	 $("#notificationBellIcon").show();  // Show bell icon
                 $("#newAnnouncementNotification").show();  // Show specific notification
                 
                 $("#newannouncement").text(leaveRequestCountValue.announcementNotification + " announcement(s)");
                 $(".badge-number").text(leaveRequestCountValue.totalNotificationCount);
                 
            	 	
            } 
       
    });
}

//Function to fetch flag value from the backend
function fetchsuperAdminFlag() {
    $.get("/flag", function(response) {
    	
        var requestCount = response;
         
        // If total notification count is greater than 0, show the bell icon and notifications
        if (requestCount.totalNotificationCount > 0) {
            $("#notificationBellIcon").show();  // Show bell icon
            $("#leaveRequestNotification").show();  // Show specific notification
            
            $("#leaveRequestMessage").text(requestCount.leaveRequestFlagCount + " leave request(s)");
            $(".badge-number").text(requestCount.totalNotificationCount);
            $("#leaveRequestFlagCount").text(requestCount.leaveRequestFlagCount);
        } else {
            // If total notification count is 0, hide the bell icon and notification
            $("#notificationBellIcon").hide();
        }
        //display the asset notifu=ication based on asset count value
        if(requestCount.asseteRequestFlagCount>0){
        	 $("#notificationBellIcon").show();  // Show bell icon
             $("#assetRequestNotification").show();  // Show specific notification
             
             $("#assetRequestMessage").text(requestCount.asseteRequestFlagCount + " asset request(s)");
             $(".badge-number").text(requestCount.totalNotificationCount);
             $("#asseteRequestFlagCount").text(requestCount.asseteRequestFlagCount);
        		
        }
        else {
            // If total notification count is 0, hide the bell icon and notification
            $("#assetRequestNotification").hide();
        }
    });
}

// Periodically fetch flag value every second (adjust as needed)
const employeeId = document.getElementById('employee-id').value; // This is a string

if(employeeId === "0") {
	//alert("hii");
	setInterval(fetchsuperAdminFlag, 1000);
}
else{
	setInterval(fetchFlag, 1000);
}

</script>
 
 
<!-- script to approve leave -->
<script>
let currentEmpId = null;
let currentStatus = null;

function approveLeave(empid, status) {
	//alert("hi");
    currentEmpId = empid;
    currentStatus = status;

    if (status === 'Approved') {
        // Call approve function directly if the status is 'Approve'
        confirmApproval();
    } else if (status === 'Reject') {
        // Show the rejection reason modal
        var rejectModal = new bootstrap.Modal(document.getElementById('rejectModal'));
        rejectModal.show();
    }
}




// Function to confirm approval
function confirmApproval() {
	const loadingPopup = document.getElementById('loadingPopup');
    loadingPopup.style.display = 'flex'; // Show the overlay

    fetch('/admin/leaveApproveByAdmin', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json'
        },
        body: JSON.stringify({ empid: currentEmpId, status: currentStatus })
    })
    .then(response => {
        if (response.ok) {
        	 // Hide the loading popup
            loadingPopup.style.display = 'none';
            document.getElementById('successAction').innerText = currentStatus.toLowerCase();
            var successModal = new bootstrap.Modal(document.getElementById('successModal'));
            successModal.show();
        } else {
            document.getElementById('errorAction').innerText = currentStatus.toLowerCase();
            var errorModal = new bootstrap.Modal(document.getElementById('errorModal'));
            errorModal.show();
        }
    })
    .catch(error => {
        console.error('Error:', error);
        // Hide the loading popup
        loadingPopup.style.display = 'none';
        document.getElementById('errorAction').innerText = currentStatus.toLowerCase();
        var errorModal = new bootstrap.Modal(document.getElementById('errorModal'));
        errorModal.show();
    });
}


//function to display leave balance modal
function displayLeaveBalance(email){
	
    // Remove surrounding double quotes if they exist
    email = email.replace(/^"|"$/g, ''); 
	
	
	fetch(`/leaveRecords/${email}`, { method: 'GET' })
		                .then(response => {
		                    console.log("Fetch request sent for leave records");

		                    if (!response.ok) {
		                        throw new Error('Network response was not ok for leave records');
		                    }
		                    return response.json();
		                })
		                .then(data => {
		                    console.log("Leave records data received from backend:", data);

		                    const tbody = document.querySelector('#leaveRecordsTable');
		                    tbody.innerHTML = ''; // Clear existing rows

		                    if (!data || data.length === 0) {
		                        const sickLeaveRow = document.createElement('tr');
		                        sickLeaveRow.innerHTML = `
		                            <td>Sick Leave</td>
		                            <td>0</td>
		                            <td>0</td>
		                            <td>0</td>
		                        `;
		                        tbody.appendChild(sickLeaveRow);

		                        const casualLeaveRow = document.createElement('tr');
		                        casualLeaveRow.innerHTML = `
		                            <td>Casual Leave</td>
		                            <td>0</td>
		                            <td>0</td>
		                            <td>0</td>
		                        `;
		                        tbody.appendChild(casualLeaveRow);
		                    } else {
		                        data.forEach(record => {
		                            const row = document.createElement('tr');
		                            row.innerHTML = `
		                                <td>${record.leaveType}</td>
		                                <td>${record.totalAdded || '0'}</td>
		                                <td>${record.totalUsed || '0'}</td>
		                                <td>${record.remaining || '0'}</td>
		                            `;
		                            tbody.appendChild(row);
		                        });
		                    }

		                    return fetch('/fetchMaternityLeave/${email}', { method: 'GET' });
		                })
		                 .then(() => fetch(`/calculate-earned-leave?year=${new Date().getFullYear()}&email=${email}`, { method: 'GET' }))
		                .then(response => {
		                    console.log("Fetch request sent for calculated earned leave");
		                    console.log("Fetch request sent for calculated earned leave");
		                    console.log("Calculated Earned Leave Response Status:", response.status);

		                    if (!response.ok) {
		                        throw new Error('Network response was not ok for calculated earned leave');
		                    }
		                    return response.json();
		                })
		                .then(earnedLeave => {
		                    console.log("Calculated leave data received from backend:", earnedLeave);

		                    const row = document.createElement('tr');
		                    row.innerHTML = `
		                        <td>Earned Leave</td>
		                        <td>${earnedLeave.earnedLeave || '0'}</td>
		                        <td>${earnedLeave.elUsed || '0'}</td>
		                        <td>${earnedLeave.elRemaining || '0'}</td>
		                    `;
		                    const tbody = document.querySelector('#leaveRecordsTable');
		                    tbody.appendChild(row);

		                    // Hide the spinner and show the modal
		                    loadingSpinner.style.display = "none";

		                    const modal = new bootstrap.Modal(document.getElementById('leaveDetailsModal'));
		                    modal.show();
		                })
		                .catch(error => {
		                    console.error('Error fetching data:', error);

		                    // Hide the spinner on error
		                    loadingSpinner.style.display = "none";
		                });
	
	
	
	
	const modal = new bootstrap.Modal(document.getElementById('leaveDetailsModal'));
    modal.show();
    
}
// Event listener for the Reject modal's confirm button
document.getElementById('confirmRejectButton').addEventListener('click', function() {
	
	const loadingPopup = document.getElementById('loadingPopup');
    loadingPopup.style.display = 'flex'; // Show the overlay
    
    var rejectionReason = document.getElementById('rejectionReason').value;
    //alert(currentStatus);
    if (rejectionReason.trim() === "") {
        alert('Please provide a reason for rejection');
        return;
    }

    // Close the rejection modal
    var rejectModal = bootstrap.Modal.getInstance(document.getElementById('rejectModal'));
    rejectModal.hide();

    // Send the rejection data to the backend
    fetch('/admin/leaveApproveByAdmin', { 
        method: 'POST',
        headers: {
            'Content-Type': 'application/json'
        },
        body: JSON.stringify({ empid: currentEmpId, status: 'Rejected', reason: rejectionReason })
    })
    .then(response => {
        if (response.ok) {
       	    
        	// Hide the loading popup
            loadingPopup.style.display = 'none';
            document.getElementById('successAction').innerText = "rejected";
            var successModal = new bootstrap.Modal(document.getElementById('successModal'));
            successModal.show();
            
        } else {
            document.getElementById('errorAction').innerText = "rejecting";
            var errorModal = new bootstrap.Modal(document.getElementById('errorModal'));
            errorModal.show();
        }
    })
    .catch(error => {
        console.error('Error:', error);
        document.getElementById('errorAction').innerText = "rejecting";
        var errorModal = new bootstrap.Modal(document.getElementById('errorModal'));
        errorModal.show();
    });
});

// Event listener for the OK button on the success modal
document.getElementById('successOkButton').addEventListener('click', function() {
    location.reload();  // Reload the page
});
</script>

<!-- script to apply the background color for pending leave requests -->
<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Select all rows with the 'highlight-row' class
        var rows = document.querySelectorAll('.highlight-row');

        // Apply additional styles if needed
        rows.forEach(function(row) {
            row.style.backgroundColor = '#EBF5FB'; // Ensure background color
            row.style.color = 'black'; // Ensure text color
        });
    });
</script>
<!-- script to notification link redirect -->
<script th:inline="javascript">
    function redirectToLeaveRequest() {
        var empid = /*[[${empDetailsByEmpId.empid}]]*/ 'defaultEmpId';
        window.location.href = '/viewAdminLeaves?empid=' + empid;
    }
    
    function redirectToAsset() {
        //var empid = /*[[${empDetailsByEmpId.empid}]]*/ 'defaultEmpId';
        window.location.href = '/asset';
    }
    function redirectToProject() {
        //var empid = /*[[${empDetailsByEmpId.empid}]]*/ 'defaultEmpId';
        window.location.href = '/ongoingProject';
    }
    function redirectToAppraisal() {
    	var empid = /*[[${empDetailsByEmpId.empid}]]*/ 'defaultEmpId';
    	window.location.href = '/apprisal?empid=' + empid;
    }
    function redirectToemployeeAppraisal() {
		var empid = /*[[${empDetailsByEmpId.empid}]]*/ 'defaultEmpId';
		window.location.href = '/employeeApprisal?empid=' + empid;
	}
    function redirectToAnnouncement() {
    	var empid = /*[[${empDetailsByEmpId.empid}]]*/ 'defaultEmpId';
    	window.location.href = '/events';
    }
</script>



<!-- script for profile pic -->
<script>
$.ajax({
    type: "GET",
    url: "fetchEmployeeDocumentDetailsOnlyByEmpId",
    data: {
        "emp_id": $('#emp_idSessionValue').val()
    },
    success: function(data) {
    	console.log("++++data"+JSON.stringify(data));
        $('#dynamicProfilePic').attr('src', `${data.profilePicPath}`);
    },
    error: function(xhr, status, error) {
        console.error("Error invoking data:", error);
    }
});
</script>

<!-- script to edit leave request -->
<script>

function convertToISODate(dateString) {
    // Split the DD-MM-YYYY string into components
    const [day, month, year] = dateString.split('-');
    // Return the ISO format (YYYY-MM-DD)
    return `${year}-${month}-${day}`;
}
function openEditModal(element) {
	// Retrieve data-* attributes from the clicked element
	
	//const id = element.getAttribute('data-id');
	const id = element.getAttribute('data-id');
    const empId = element.getAttribute('data-emp-id');
    const employeeName = element.getAttribute('data-employee-name');
    const leaveType = element.getAttribute('data-leave-type');
    const fromDate = element.getAttribute('data-from-date');
    const toDate = element.getAttribute('data-to-date');
    const reason = element.getAttribute('data-reason');
    const duration = element.getAttribute('data-duration'); // New attribute
    console.log("Original to date= " + toDate);

    // Convert dates to ISO format
    const isoFromDate = convertToISODate(fromDate);
    const isoToDate = convertToISODate(toDate);

    console.log("Converted from date= " + isoFromDate);
    console.log("Converted to date= " + isoToDate);

    // Assign default values to the form fields
    document.getElementById('reqId').value = id;
    document.getElementById('reqEmpId').value = empId;
    document.getElementById('employeeName').value = employeeName;
    document.getElementById('leaveType').value = leaveType;
    document.getElementById('fromDate').value = isoFromDate;
    document.getElementById('toDate').value = isoToDate;
    document.getElementById('reason').value = reason;
    
 // Set the default duration
    if (duration === 'Full Day') {
        document.getElementById('fullDay').checked = true;
    } else if (duration === 'Half Day') {
        document.getElementById('halfDay').checked = true;
    }

    // Show the modal
    const editModal = new bootstrap.Modal(document.getElementById('editModal'));
    editModal.show();
}



function saveChanges() {
    const updatedData = {
        id: document.getElementById('reqId').value,
        empid: document.getElementById('reqEmpId').value,
        employee_name: document.getElementById('employeeName').value,
        leaveType: document.getElementById('leaveType').value,
        from_date: document.getElementById('fromDate').value,
        to_date: document.getElementById('toDate').value,
        leaveDuration: document.querySelector('input[name="leaveDuration"]:checked')?.value,
        reason: document.getElementById('reason').value,
    };

    console.log('Updated Data:', updatedData); // Debug the payload

    fetch('/admin/updateLeaveRequest', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json',
        },
        body: JSON.stringify(updatedData), // Send as JSON
    })
        .then(response => {
            if (response.ok) {
                const editModal = bootstrap.Modal.getInstance(document.getElementById('editModal')); // Get the instance of the editModal
                editModal.hide(); // Close the editModal

                const successModal = new bootstrap.Modal(document.getElementById('successModal'));
                successModal.show(); // Show the successModal
            } else {
                console.error('Failed to update leave request:', response.statusText);
            }
        })
        .catch(error => {
            console.error('Error during fetch:', error);
        });
}


</script>


<!-- script to search button on leave request table -->
<script>
document.getElementById("searchInput").addEventListener("keyup", function () {
    const input = this.value.toLowerCase();
    const rows = document.querySelectorAll("#holidayTable2 tbody tr");

    rows.forEach((row) => {
        const cells = Array.from(row.querySelectorAll("td"));

        if (!input) {
            // Clear highlights and show all rows if input is empty
            row.style.display = "";
            cells.forEach((cell) => {
                cell.innerHTML = cell.textContent; // Reset cell content
            });
        } else {
            let isMatch = false;
            cells.forEach((cell) => {
                const text = cell.textContent.toLowerCase();

                if (text.includes(input)) {
                    isMatch = true;

                    // Highlight the matched text
                    const regex = new RegExp(`(${input})`, "gi");
                    cell.innerHTML = cell.textContent.replace(regex, `<span class="highlight">$1</span>`);
                } else {
                    // Remove highlights if no match in this cell
                    cell.innerHTML = cell.textContent;
                }
            });

            // Show or hide the row based on matches
            row.style.display = isMatch ? "" : "none";
        }
    });
});

</script>
<!-- script to search proccesed table -->
<script>
document.getElementById("searchInput").addEventListener("keyup", function () {
    const input = this.value.toLowerCase();
    const rows = document.querySelectorAll("#holidayTable3 tbody tr");

    rows.forEach((row) => {
        const cells = Array.from(row.querySelectorAll("td"));

        if (!input) {
            // Clear highlights and show all rows if input is empty
            row.style.display = "";
            cells.forEach((cell) => {
                cell.innerHTML = cell.textContent; // Reset cell content
            });
        } else {
            let isMatch = false;
            cells.forEach((cell) => {
                const text = cell.textContent.toLowerCase();

                if (text.includes(input)) {
                    isMatch = true;
                    // Highlight the matched text
                    const regex = new RegExp(`(${input})`, "gi");
                    cell.innerHTML = cell.textContent.replace(regex, `<span class="highlight">$1</span>`);
                } else {
                    // Remove highlights if no match in this cell
                    cell.innerHTML = cell.textContent;
                }
                
            });

            // Show or hide the row based on matches
            row.style.display = isMatch ? "" : "none";
        }
    });
});

</script>



<!-- script to pagination -->
<!-- <script>
let rowsPerPage = 5; // Default rows per page
let currentPage = 1;

document.addEventListener("DOMContentLoaded", function () {
    const table = document.getElementById("holidayTable2");
    const tbody = table.querySelector("tbody");
    const rows = Array.from(tbody.querySelectorAll("tr")).filter(row => {
        return row.getAttribute("data-way") === "1"; // Filter rows based on the condition
    });
    
    function showPage(page) {
        const totalRows = rows.length;
        
        // If "All" is selected, display all rows
        if(rowsPerPage === "All") {
            rows.forEach(row => row.style.display = "");
            return;
        }
        
        const start = (page - 1) * rowsPerPage;
        const end = start + rowsPerPage;

        rows.forEach((row, index) => {
            row.style.display = index >= start && index < end ? "" : "none";
        });

        renderPagination(page, totalRows);
    }

    function renderPagination(currentPage, totalRows) {
        const totalPages = Math.ceil(totalRows / rowsPerPage);
        const pagination = document.getElementById("pagination");
        pagination.innerHTML = "";  // Clear previous pagination

        for (let i = 1; i <= totalPages; i++) {
            const button = document.createElement("button");
            button.textContent = i;
            button.style.margin = "0 5px";
            button.style.padding = "5px 10px";
            button.style.border = "1px solid #ccc";
            button.style.cursor = "pointer";
            button.style.backgroundColor = i === currentPage ? "#007bff" : "#fff";
            button.style.color = i === currentPage ? "#fff" : "#000";

            button.addEventListener("click", () => {
                currentPage = i;
                showPage(i);
            });
            pagination.appendChild(button);
        }
    }

    // Function to update rows per page
    function updateRowsPerPage() {
        const selectedValue = document.getElementById("rowsPerPage").value;
        rowsPerPage = selectedValue === "All" ? "All" : parseInt(selectedValue, 10);
        showPage(1);  // Show the first page after updating rows per page
    }

    // Initialize the table with the first page
    showPage(currentPage);
    
    // Bind the rows per page dropdown change event
    document.getElementById("rowsPerPage").addEventListener("change", updateRowsPerPage);
});
</script>


script to pagination for proccesed table
<script>
let rowsPerPage1 = 5; // Default rows per page
let currentPage1 = 1;

document.addEventListener("DOMContentLoaded", function () {
    const table = document.getElementById("holidayTable3");
    const tbody = table.querySelector("tbody");
    const rows = Array.from(tbody.querySelectorAll("tr"));
    
    function showPage(page) {
        const totalRows = rows.length;
        
        // If "All" is selected, display all rows
        if (rowsPerPage1 === "All") {
            rows.forEach(row => row.style.display = "");
            return;
        }
        
        const start = (page - 1) * rowsPerPage1;
        const end = start + rowsPerPage1;

        rows.forEach((row, index) => {
            row.style.display = index >= start && index < end ? "" : "none";
        });

        renderPagination(page, totalRows);
    }

    function renderPagination(currentPage1, totalRows) {
        const totalPages = Math.ceil(totalRows / rowsPerPage1);
        const pagination = document.getElementById("pagination");
        pagination.innerHTML = "";  // Clear previous pagination

        for (let i = 1; i <= totalPages; i++) {
            const button = document.createElement("button");
            button.textContent = i;
            button.style.margin = "0 5px";
            button.style.padding = "5px 10px";
            button.style.border = "1px solid #ccc";
            button.style.cursor = "pointer";
            button.style.backgroundColor = i === currentPage1 ? "#007bff" : "#fff";
            button.style.color = i === currentPage1 ? "#fff" : "#000";

            button.addEventListener("click", () => {
                currentPage1 = i;
                showPage(i);
            });
            pagination.appendChild(button);
        }
    }

    // Function to update rows per page
    function updateRowsPerPage() {
        const selectedValue = document.getElementById("rowsPerPage1").value;
        rowsPerPage1 = selectedValue === "All" ? "All" : parseInt(selectedValue, 10);
        showPage(1);  // Show the first page after updating rows per page
    }

    // Initialize the table with the first page
    showPage(currentPage1);
    
    // Bind the rows per page dropdown change event
    document.getElementById("rowsPerPage1").addEventListener("change", updateRowsPerPage);
});
</script> -->

<!-- script to sort proccessed table -->
<!-- <script>
$(document).ready(function () {
    $('#holidayTable2').DataTable({
    	scrollX: true,
        paging: true, // Disable pagination
        order: [], // Default no sorting
        columnDefs: [
            { orderable: true, targets: [0, 2, 3,4,5,6,7,8] }, // Enable sorting for Sl No and Employee Id
            { orderable: false, targets: '_all' } // Disable sorting for other columns
        ]
    });
});
</script>

script to sort Unproccessed table
<script>
$(document).ready(function () {
    $('#holidayTable3').DataTable({
    	scrollX: true,
        paging: true, // Disable pagination
        order: [], // Default no sorting
        columnDefs: [
            { orderable: true, targets: [0, 2, 3,4,5,6,7,8] }, // Enable sorting for Sl No and Employee Id
            { orderable: false, targets: '_all' } // Disable sorting for other columns
        ]
    });
});
</script>
<script>
$(document).ready(function () {
    $('#rejectedLeaves').DataTable({
        paging: true, // Enable pagination
        pageLength: 10, // Number of rows per page (default is 10)
        lengthChange: true, // Allow changing the number of rows per page
        scrollX: true, // Enable horizontal scrolling
        order: [], // Default no sorting
        columnDefs: [
            { orderable: true, targets: [0, 2, 3, 4, 5, 6, 7, 8] }, // Enable sorting for specific columns
            { orderable: false, targets: '_all' } // Disable sorting for other columns
        ]
    });
});
</script> -->

<!-- script to enable or disable the search button based on active tab -->
<script>
document.addEventListener("DOMContentLoaded", function () {
    // Add event listeners for the tab buttons
    document.querySelectorAll('.nav-tabs button').forEach((button) => {
        button.addEventListener('click', function () {
            // Hide all search boxes
            document.getElementById("searchUnapproved").style.display = "none";
            document.getElementById("searchApproved").style.display = "none";
            document.getElementById("searchRejected").style.display = "none";

            // Show the search box corresponding to the active tab
            if (this.id === "home-tab") {
                document.getElementById("searchUnapproved").style.display = "block";
            } else if (this.id === "profile-tab" && this.getAttribute("data-bs-target") === "#bordered-justified-profile") {
                document.getElementById("searchApproved").style.display = "block";
            } else if (this.id === "profile-tab" && this.getAttribute("data-bs-target") === "#bordered-justified-rejected") {
                document.getElementById("searchRejected").style.display = "block";
            }
        });
    });
});
</script>

<!-- script to search box for unapproved text box -->
<script>

document.querySelector('.searchUnprovedTable').addEventListener('click', function () {
    document.querySelector('.searchUnprovedTable_inputSearch').focus();
  });

    function searchUnprovedTable() {
        
    	var input, filter, table, tr, td, i, j, txtValue;
        
        input = document.querySelector(".searchUnprovedTable_inputSearch");
        filter = input.value.toUpperCase();
        
        //table = document.getElementById("customTable");
        table = document.querySelector("#holidayTable2");
        if (!table) return;
        
        tr = table.getElementsByTagName("tr");
        for (i = 1; i < tr.length; i++) {
            tr[i].style.display = "none";
            td = tr[i].getElementsByTagName("td");
            for (j = 0; j < td.length; j++) {
                if (td[j]) {
                    txtValue = td[j].textContent || td[j].innerText;
                    if (txtValue.toUpperCase().indexOf(filter) > -1) {
                        tr[i].style.display = "";
                        break;
                    }
                }
            }
        }
    }    
</script>

<!-- script to search box for approved text box -->
<script>

document.querySelector('.searchApprovedTable').addEventListener('click', function () {
    document.querySelector('.searchApprovedTable_inputSearch').focus();
  });

    function searchApprovedTable() {
        
    	var input, filter, table, tr, td, i, j, txtValue;
        
        input = document.querySelector(".searchApprovedTable_inputSearch");
        filter = input.value.toUpperCase();
        
        //table = document.getElementById("customTable");
        table = document.querySelector("#holidayTable3");
        if (!table) return;
        
        tr = table.getElementsByTagName("tr");
        for (i = 1; i < tr.length; i++) {
            tr[i].style.display = "none";
            td = tr[i].getElementsByTagName("td");
            for (j = 0; j < td.length; j++) {
                if (td[j]) {
                    txtValue = td[j].textContent || td[j].innerText;
                    if (txtValue.toUpperCase().indexOf(filter) > -1) {
                        tr[i].style.display = "";
                        break;
                    }
                }
            }
        }
    }    
</script>

<!-- script to search box for rejected text box -->
<script>
	document.querySelector('.searchRejectedTable').addEventListener('click', function () {
	    document.querySelector('.searchRejectedTable_inputSearch').focus();
	});

    function searchRejectedTable() {
        
    	var input, filter, table, tr, td, i, j, txtValue;
        
        input = document.querySelector(".searchRejectedTable_inputSearch");
        filter = input.value.toUpperCase();
        
        //table = document.getElementById("customTable");
        table = document.querySelector("#rejectedLeaves");
        if (!table) return;
        
        tr = table.getElementsByTagName("tr");
        for (i = 1; i < tr.length; i++) {
            tr[i].style.display = "none";
            td = tr[i].getElementsByTagName("td");
            for (j = 0; j < td.length; j++) {
                if (td[j]) {
                    txtValue = td[j].textContent || td[j].innerText;
                    if (txtValue.toUpperCase().indexOf(filter) > -1) {
                        tr[i].style.display = "";
                        break;
                    }
                }
            }
        }
    }    
</script>
</body>
</html>