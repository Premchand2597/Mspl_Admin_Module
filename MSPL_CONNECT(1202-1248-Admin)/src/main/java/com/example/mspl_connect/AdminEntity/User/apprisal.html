<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">

  <title>Appraisal</title>
  <meta content="" name="description">
  <meta content="" name="keywords">

  <!-- Favicons -->
  <link href="assets/img/favicon.png" rel="icon">
  <link href="assets/img/apple-touch-icon.png" rel="apple-touch-icon">

  <!-- Google Fonts -->
  <link href="https://fonts.gstatic.com" rel="preconnect">
  <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i|Nunito:300,300i,400,400i,600,600i,700,700i|Poppins:300,300i,400,400i,500,500i,600,600i,700,700i" rel="stylesheet">

  <!-- Vendor CSS Files -->
  <link href="assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
  <link href="assets/vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet">
  <link href="assets/vendor/boxicons/css/boxicons.min.css" rel="stylesheet">
  <link href="assets/vendor/quill/quill.snow.css" rel="stylesheet">
  <link href="assets/vendor/quill/quill.bubble.css" rel="stylesheet">
  <link href="assets/vendor/remixicon/remixicon.css" rel="stylesheet">
  <link href="assets/vendor/simple-datatables/style.css" rel="stylesheet">

  <!-- Template Main CSS File -->
  <link href="assets/css/style.css" rel="stylesheet">
  <script src="https://code.highcharts.com/highcharts.js"></script>
  <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

  <!-- =======================================================
  * Template Name: NiceAdmin
  * Template URL: https://bootstrapmade.com/nice-admin-bootstrap-admin-html-template/
  * Updated: Apr 20 2024 with Bootstrap v5.3.3
  * Author: BootstrapMade.com
  * License: https://bootstrapmade.com/license/
  ======================================================== -->
<style>  
       .card {
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 20px;
        }
        .info-card {
            background-color: #fff;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
        #attendence-chart{
            width: 100%;
            height: 190px; /* Adjust the height as needed */
        }
       #attendence-chart {
        font-size: 3rem; /* Large font size */
        font-weight: bold; /* Make it bold */
        color: #012970; /* Green color for a nice appearance */
        text-align: center; /* Center the text */
        margin-top: 10px; /* Add some space above the running time */
      }
      
        /* Example CSS to style disabled items */
		.activity-item .disabled {
		    pointer-events: none; /* Disable interactions */
		    opacity: 0.5; /* Make the item appear grayed out */
		}
		.activity {
		    max-height: 190px; /* Set the maximum height as per your requirement */
		    overflow: hidden; /* Hide content that overflows */
		    position: relative;
		    transition: max-height 0.3s ease; /* Add a smooth transition */
		}
		
		.activity.expanded {
		    max-height: none; /* Remove the height limit when expanded */
		}
		
		.view-more {
		    display: block;
		    cursor: pointer;
		    color: #007bff; /* Change to your preferred color */
		    text-align: center;
		    padding: 10px;
		    background: white;
		    border-top: 1px solid #ddd;
		    position: absolute;
		    bottom: 0;
		    width: 100%;
		}
		.view-more.hidden {
		    display: none; /* Hide the button when it's not needed */
		}
		.profile-picture {
		    width: 40px;  /* Adjust the size as needed */
		    height: 150px; /* Ensure the height and width are the same */
		    border-radius: 50%; /* This makes the image a circle */
		    object-fit: cover;  /* Ensures the image fits within the circle */
		}		
              .list-group-item {
		    padding: 10px 15px;
		    display: flex;
		    align-items: center;
		}
		
		.list-group-item img {
		    border-radius: 50%; /* Ensures user image is circular */
		}
		
		.list-group-item .ms-3 {
		    margin-left: 15px; /* Spacing between the icon and text */
		}
		.leaveLists small{
			color:#99A3A4;
		}
	   /* CSS for highlighting the focused link */
		.highlighted {
		    background-color: yellow;
		    border: 2px solid #ffa500; /* Example border */
		    color: black; /* Change the text color if needed */
		}
    /* Keyframes for changing background color */
    @keyframes backgroundColorChange {
        0% {
            background-color: #1e3c72; /* Start with dark blue */
        }
        50% {
            background-color: #2a69ac; /* Transition to a lighter blue */
        }
        100% {
            background-color: #1e3c72; /* Back to dark blue */
        }
    }

    /* Keyframes for star movement */
    @keyframes moveStars {
        0% {
            transform: translateX(0) translateY(0);
            opacity: 1;
        }
        50% {
            transform: translateX(20px) translateY(-20px);
            opacity: 0.5;
        }
        100% {
            transform: translateX(40px) translateY(-40px);
            opacity: 0;
        }
    }

     /* Blinking animation */
    @keyframes blink {
        0%, 100% {
            opacity: 1; /* Fully visible */
        }
        50% {
            opacity: 0; /* Invisible */
        }
    }

    /* Target only the Apprisal link for the blinking effect */
    #apprisalLink.blinking {
        animation: blink 0.5s ease-in-out 3; /* Blinks 3 times in 0.5s intervals */
    }
	                
  </style>
</head>

<body>

  <!-- ======= Header ======= -->
 <header id="header" class="header fixed-top d-flex align-items-center">
	
		   <div class="d-flex align-items-center" style="width:100%; margin:0 0 0 10px; padding:5px;">
				    <a class="app-logo" th:href=@{/dashboard}>
				        <img class="d-none d-lg-block" src="assets/img/logo.png" alt="logo" style="width:200px; height:50px; max-width:100%; padding:0 2px 0 10px; margin:0;">
				    </a>
				    <i class="bi bi-chevron-double-left toggle-sidebar-btn" onclick="toggleIconRotation()"></i>
			</div>
				
   <!-- Include the header fragment -->
   <div th:replace="fragments/header :: header"></div>
  
  </header><!-- End Header -->

  <!-- ======= Sidebar ======= -->
  <aside id="sidebar" class="sidebar">
    <ul class="sidebar-nav" id="sidebar-nav">
         <li class="nav-item">
            <a class="nav-link" th:href="@{/userDashboard}">
                <i class="bi bi-grid"></i>
                <span>Dashboard</span>
            </a>
         </li>
         <li class="nav-item">
            <a class="nav-link" th:href="@{/viewAdminProfile(empid=${empDetailsByEmpId.empid})}">
                <i class="bi bi-person"></i>
                 <span>My Profile</span>
            </a>
        </li>  
        <li class="nav-item">
			<a class="nav-link" th:href="@{/attendanceLive(email=${empDetailsByEmpId.email})}">
				<i class="bi bi-calendar3"></i>
				<span>Attendance</span>
			</a>
	    </li>
       
         <li class="nav-item">
            <a class="nav-link" th:href="@{/groupMailId}">
                <i class="bi bi-telephone"></i>
                <span>Employee Contacts</span>
            </a>
        </li>
        <!-- <li class="nav-item">
            <a class="nav-link" th:href="@{/InterCommDetails}">
                <i class="bi bi-telephone"></i>
                <span>InterComm Details</span>
            </a>
        </li> -->
        <li class="nav-item">
            <a class="nav-link" th:href="@{/adminHoliday}">
                <i class="bi bi-calendar4-week"></i>
                <span>Holiday List</span>
            </a>
        </li>
        <li class="nav-item">
		    <a class="nav-link" th:href="@{/employee}">
		        <i class="bi bi-people"></i>	
		        <span>Employee</span>
		    </a>
	    </li> 
        <li class="nav-item">
            <a class="nav-link" th:href="@{/viewAdminLeaves(empid=${empDetailsByEmpId.empid})}">
                <i class="bi bi-card-text"></i>
                <span>Team Leaves</span>
            </a>
        </li>  
        <li class="nav-item" th:if="${empDetailsByEmpId.deptId>0}">
            <a class="nav-link" th:href="@{/events}">
                <i class="bi bi-megaphone"></i>
                <span>Announcement</span>
            </a>
        </li>
          
        <li class="nav-item">
            <a class="nav-link" th:href="@{/asset}">
                <i class="bi bi-wallet"></i>
                <span>Assets</span>
            </a>
        </li>  
        <li class="nav-item">
			<a class="nav-link" th:href="@{/ongoingProject}">
				<i class="bi bi-card-heading"></i>
				<span>Projects</span>
			</a>
	    </li> 
	   
	   <!-- <li class="nav-item">
            <a class="nav-link" th:href="@{/viewAdminPayslip(empid=${empDetailsByEmpId.empid})}">
                <i class="bi bi-file-text"></i>
                <span>Payslip</span>
            </a>
        </li> -->  
        
	   <!-- Loop through the permissions map -->
       <li class="nav-item" th:if="${permissions.interviewAccess}">
            <a class="nav-link" th:href="@{/moatIframe}">
                <i class="bi bi-vector-pen"></i>
                <span>Interview</span>
            </a>
        </li>
         <li class="nav-item" th:if="${permissions.sales}">
            <a class="nav-link" th:href="@{/sales}">
                <i class="bi bi-cart3"></i>
                <span>Sales</span>
            </a>
        </li>
        
          <li class="nav-item" th:if="${permissions.accountsAccess}">
            <a class="nav-link" th:href="@{/accounts}">
                <i class="bi bi-person-vcard"></i>
                <span>Accounts</span>
            </a>
        </li>
        
        <li class="nav-item" th:if="${permissions.storeAccess}">
            <a class="nav-link" th:href="@{/store}">
                <i class="bi bi-shop-window"></i>
                <span>Store</span>
            </a>
        </li>
		<li class="nav-item" th:if="${permissions.apprisalAccess}">
		    <a class="nav-link active" id="apprisalLink" th:href="@{/apprisal(empid=${empDetailsByEmpId.empid})}">
		        <i class="bi bi-file-text"></i>
		        <span>Apprisal</span>
		    </a>
		</li>
		<li class="nav-item">
		    <a class="nav-link" id="apprisalLink" th:href="@{/employeeApprisal(empid=${empDetailsByEmpId.empid})}">
		        <i class="bi bi-file-text"></i>
		        <span>Employee Appraisal</span>
		    </a>
		</li>
		<li class="nav-item">
				<a class="nav-link" th:href="@{/my-favorites}">
					<i class="bi bi-layout-text-window-reverse"></i>
					<span>To-Chat & Remind</span>
				</a>
		</li>
    </ul>
</aside>


  <main id="main" class="main">
<input type="hidden" id="emp_idSessionValue" th:value="${empDetailsByEmpId.empid}">
    
    <div class="pagetitle"  th:if="${empDetailsByEmpId.deptId==0}">
      <nav>
        <ol class="breadcrumb">
          <li class="breadcrumb-item"><a th:href="@{/navbar}">Home</a></li>
          <li class="breadcrumb-item active">Appraisal </li>
        </ol>
      </nav>
    </div><!-- End Page Title -->
    <div class="pagetitle" th:if="${empDetailsByEmpId.deptId>0}">
      <nav>
        <ol class="breadcrumb">
          <li class="breadcrumb-item"><a th:href="@{/userDashboard}">Home</a></li>
          <li class="breadcrumb-item active">Appraisal </li>
        </ol>
      </nav>
    </div><!-- End Page Title -->
    				<!-- Feedback Modal -->
			<div class="modal fade" id="feedbackModal" tabindex="-1" aria-labelledby="feedbackModalLabel" aria-hidden="true">
			    <div class="modal-dialog">
			        <div class="modal-content rounded-4 shadow-lg">
			            <div class="modal-header border-0">
			                <h5 class="modal-title" id="feedbackModalLabel">Feedback Form</h5>
			                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
			            </div>
			            <div class="modal-body">
			                <form id="feedbackForm" method="post" enctype="multipart/form-data">
			                    <div class="mb-3" style="display: none;">
			                        <label for="feedbackName" class="form-label fw-bold">Your Name</label>
			                        <input type="text" class="form-control" id="feedbackName" name="name" th:value="${empDetailsByEmpId.fullName}" readonly>
			                    </div>
			                    <div class="mb-3" style="display: none;">
			                        <label for="feedbackEmail" class="form-label fw-bold">Your Email</label>
			                        <input type="email" class="form-control" id="feedbackEmail" name="email" th:value="${empDetailsByEmpId.email}" readonly>
			                    </div>
			                    <div class="mb-3">
			                        <label for="feedbackEmailyy" class="form-label fw-bold">To</label>
			                        <div class="to-field-container">
			                            <span class="to-field rounded-pill px-3 py-2 shadow-sm">bugs_msplconnect@melangesystems.com</span>
			                        </div>
			                    </div>
								<div class="mb-3">
								    <label for="bugType" class="form-label fw-bold">Bug Type</label>
								    <select class="form-control" id="bugType" name="bugType" required>
								        <option value="About Application">About Application</option>
								        <option value="New Feature">New Feature</option>
								    </select>
								</div>

			                    <div class="mb-3">
			                        <label for="feedbackMessage" class="form-label fw-bold">Message</label>
			                        <textarea class="form-control" id="feedbackMessage" name="message" rows="4" placeholder="Enter your feedback here..." required></textarea>
			                    </div>
			                    <div class="mb-3">
			                        <label for="feedbackAttachment" class="form-label fw-bold">Attachment (optional)</label>
			                        <input type="file" class="form-control" id="feedbackAttachment" name="attachment" accept=".png, .jpg, .jpeg" multiple>
			                        <small class="text-muted">Max size: 5MB. You can upload multiple images.</small>
			                    </div>
			                    <button type="submit" class="btn btn-primary w-100 mt-3 py-2 shadow-sm" id="submitFeedbackBtn">Submit Feedback</button>
			                </form>
			            </div>
			        </div>
			    </div>
			</div>
    <section class="section dashboard">
    
             
     <div class="col-lg-12" id="appraisalForm">
      <!-- Bordered Tabs Justified -->
              
				    <div class="row">
				    
				        <div class="col-lg-12">
				        
				            <div class="card pt-0">
								  
					              <div class="tab-content pt-2" id="borderedTabJustifiedContent">
					                <div class="tab-pane fade show active" id="bordered-justified-home" role="tabpanel" aria-labelledby="home-tab">
					                 
					                    <div class="card-body">
						                   
						                	<h5 class="card-title pt-0">
												Appraisal Form&nbsp;|&nbsp;<span th:text="${empName}"></span>
											</h5>
					                    
					                    <!-- <form id="appraisalFormDetails">
					                        <input type="hidden" id="empId" th:value="${appraisalEmpId}"></input>
					                        
					                        
					                         <input type="text" id="dept" th:value="${hrAppraisalData.department}"></input>
					                         <input type="text" id="quarter" th:value="${hrAppraisalData.quarter}"></input>
					                         <input type="text" id="quarterYear" th:value="${hrAppraisalData.quarterMonthYear}"></input>
					                         
					                        Project Section
					                        <div class="form-group">
					                            
					                            <label><strong>1. Project: 65 Points</strong></label>
					                            <p><strong>Description:</strong> Evaluation of the employee’s contribution to project success, based on the value received from the application and project outcomes.</p>
					                            <p><strong>Rating Explanation:</strong> This category assesses the employee's performance on specific projects, achievement of project goals, and overall impact on the team or organization.</p>
					                           <label for="projectRating">Rating</label>
												<strong><label for="projectRating">Rating</label></strong>
					                            <select id="projectRating" name="projectRating" class="form-control" required>
													<option value="" disabled>Select your Rating</option>
											            <option value="65" th:selected="${appraisalByEmpId?.projectScore == 5}">5 - Consistently exceeds expectations (65 points)</option>
											            <option value="60" th:selected="${appraisalByEmpId?.projectScore == 4}">4 - Meets expectations with minor contributions (58-64 points)</option>
											            <option value="50" th:selected="${appraisalByEmpId?.projectScore == 3}">3 - Meets basic expectations, needs improvement (45-57 points)</option>
											            <option value="35" th:selected="${appraisalByEmpId?.projectScore == 2}">2 - Lack of impact, frequent issues (30-44 points)</option>
											            <option value="20" th:selected="${appraisalByEmpId?.projectScore == 1}">1 - Did not meet requirements, poor contribution (0-29 points)</option>
											        </select>
					                            <label for="projectComments">Comments</label>
					                            <textarea id="projectComments" th:text="${appraisalByEmpId?.projectComments}" name="projectComments" class="form-control" placeholder="Add comments"></textarea>
					                        </div>
	
					                        Attendance Section
					                        <div class="form-group mt-2">
					                            <label><strong>2. Attendance: 10 Points</strong></label>
					                            <p><strong>Description:</strong> Evaluating the employee's reliability and punctuality. The employee is expected to maintain good attendance and avoid misuse of leave types.</p>
					                            <p><strong>Rating Explanation:</strong> Absenteeism, tardiness, or frequent unapproved leave can impact the overall work performance.</p>
					                            <label for="attendanceRating">Rating</label>
					                            <select id="attendanceRating" name="attendanceRating" class="form-control" required>
													<option value="" disabled selected>Select your Rating</option>
					                                <option value="5" th:selected="${appraisalByEmpId?.attendanceScore == 5}">5 - Perfect attendance (10 points)</option>
					                                <option value="4" th:selected="${appraisalByEmpId?.attendanceScore == 4}">4 - Minor issues, acceptable (8-9 points)</option>
					                                <option value="3" th:selected="${appraisalByEmpId?.attendanceScore == 3}">3 - Occasional issues (6-7 points)</option>
					                                <option value="2" th:selected="${appraisalByEmpId?.attendanceScore == 2}">2 - Frequent absenteeism (4-5 points)</option>
					                                <option value="1" th:selected="${appraisalByEmpId?.attendanceScore == 1}">1 - Unacceptable attendance (0-3 points)</option>
					                            </select>
					                            <label for="attendanceComments">Comments</label>
					                            <textarea id="attendanceComments" th:text="${appraisalByEmpId?.attendanceComments}" name="attendanceComments" class="form-control" placeholder="Add comments"></textarea>
					                        </div>
	
					                        Team Collaboration Section
					                        <div class="form-group mt-2">
					                            <label><strong>3. Team Collaboration: 5 Points</strong></label>
					                            <p><strong>Description:</strong> Evaluating the employee's ability to collaborate and work effectively with others. Team collaboration includes working harmoniously with peers, sharing knowledge, and supporting colleagues.</p>
												<p><strong>Rating Explanation:</strong>: The employee is assessed on teamwork, mutual respect, and contribution to team success.</p>
					                            <label for="collaborationRating">Rating</label>
					                            <select id="collaborationRating" name="collaborationRating" class="form-control" required>
													<option value="" disabled selected>Select your Rating</option>
					                                <option value="5" th:selected="${appraisalByEmpId?.teamCollaborationScore == 5}">5 - Consistently fosters cooperation (5 points)</option>
					                                <option value="4" th:selected="${appraisalByEmpId?.teamCollaborationScore == 4}">4 - Meets expectations (4 points)</option>
					                                <option value="3" th:selected="${appraisalByEmpId?.teamCollaborationScore == 3}">3 - Generally works well (3 points)</option>
					                                <option value="2" th:selected="${appraisalByEmpId?.teamCollaborationScore == 2}">2 - Difficulty working with team (2 points)</option>
					                                <option value="1" th:selected="${appraisalByEmpId?.teamCollaborationScore == 1}">1 - Fails to collaborate (0-1 points)</option>
					                            </select>
					                            <label for="collaborationComments">Comments</label>
					                            <textarea id="collaborationComments" th:text="${appraisalByEmpId?.teamCollaborationComments}" name="collaborationComments" class="form-control" placeholder="Add comments"></textarea>
					                        </div>
	
					                        Communication Section
					                        <div class="form-group mt-2">
					                            <label><strong>4. Communication: 5 Points</strong></label>
					                            <p><strong>Description:</strong> Assessing clarity and effectiveness in communication.</p>
												<p><strong>Rating Explanation:</strong>Assessing the clarity and effectiveness of the employee’s communication, both verbal and written. This includes how well the employee conveys information, listens, and responds to others.</p>
															                          
					                            <label for="communicationRating">Rating</label>
					                            <select id="communicationRating" name="communicationRating" class="form-control" required>
													<option value="" disabled selected>Select your Rating</option>
					                                <option value="5" th:selected="${appraisalByEmpId?.communicationScore == 1}">5 - Clear, effective communication (5 points)</option>
					                                <option value="4" th:selected="${appraisalByEmpId?.communicationScore == 2}">4 - Generally clear, minor improvements (4 points)</option>
					                                <option value="3" th:selected="${appraisalByEmpId?.communicationScore == 3}">3 - Lacks clarity or promptness (3 points)</option>
					                                <option value="2" th:selected="${appraisalByEmpId?.communicationScore == 4}">2 - Significant issues causing delays (2 points)</option>
					                                <option value="1" th:selected="${appraisalByEmpId?.communicationScore == 5}">1 - Ineffective communication (0-1 points)</option>
					                            </select>
					                            <label for="communicationComments">Comments</label>
					                            <textarea id="communicationComments" th:text="${appraisalByEmpId?.communicationComments}" name="communicationComments"  class="form-control" placeholder="Add comments"></textarea>
					                        </div>
	
					                        Initiative Section
					                        <div class="form-group mt-2">
					                            <label><strong>5. Initiative: 5 Points</strong></label>
					                            <p><strong>Description:</strong>Evaluating the employee's willingness to take on new tasks, solve problems, and improve processes within the organization.</p>
												<p><strong>Rating Explanation:</strong>Initiative is a key driver of personal and team growth. Employees who demonstrate initiative take ownership of challenges and contribute ideas for improvement.</p>
															                          
					                            <label for="initiativeRating">Rating</label>
					                            <select id="initiativeRating" name="initiativeRating" class="form-control" required>
													<option value="" disabled selected>Select your Rating</option>
					                                <option value="5" th:selected="${appraisalByEmpId?.initiativeScore == 5}">5 - Proactively identifies improvements (5 points)</option>
					                                <option value="4" th:selected="${appraisalByEmpId?.initiativeScore == 4}">4 - Occasionally shows initiative (4 points)</option>
					                                <option value="3" th:selected="${appraisalByEmpId?.initiativeScore == 3}">3 - Needs improvement in proactivity (3 points)</option>
					                                <option value="2" th:selected="${appraisalByEmpId?.initiativeScore == 2}">2 - Rarely shows initiative (2 points)</option>
					                                <option value="1" th:selected="${appraisalByEmpId?.initiativeScore == 1}">1 - Shows no initiative (0-1 points)</option>
					                            </select>
					                            <label for="initiativeComments">Comments</label>
					                            <textarea id="initiativeComments" th:text="${appraisalByEmpId?.initiativeComments}"  name="initiativeComments" class="form-control" placeholder="Add comments"></textarea>
					                        </div>
	
					                        Leadership Section
					                        <div class="form-group mt-2">
					                            <label><strong>6. Leadership (if applicable): 5 Points</strong></label>
					                            <p><strong>Description:</strong> If the employee holds a leadership role, this criterion assesses their ability to motivate, guide, and manage their team effectively.</p>
												<p><strong>Rating Explanation:</strong>Leadership involves directing the team, resolving conflicts, and ensuring the team achieves its objectives.</p>
															                          
					                            <label for="leadershipRating">Rating</label>
					                            <select id="leadershipRating" name="leadershipRating" class="form-control" required>
													<option value="" disabled selected>Select your Rating</option>
					                                <option value="5" th:selected="${appraisalByEmpId?.leadershipScore == 5}">5 - Excellent leadership (5 points)</option>
					                                <option value="4" th:selected="${appraisalByEmpId?.leadershipScore == 4}">4 - Effective leader (4 points)</option>
					                                <option value="3" th:selected="${appraisalByEmpId?.leadershipScore == 3}">3 - Satisfactory, needs improvement (3 points)</option>
					                                <option value="2" th:selected="${appraisalByEmpId?.leadershipScore == 2}">2 - Limited leadership capabilities (2 points)</option>
					                                <option value="1" th:selected="${appraisalByEmpId?.leadershipScore == 1}">1 - Ineffective leadership (0-1 points)</option>
					                            </select>
					                            <label for="leadershipComments">Comments</label>
					                            <textarea id="leadershipComments" th:text="${appraisalByEmpId?.leadershipComments}" name="leadershipComments" class="form-control" placeholder="Add comments"></textarea>
					                        </div>
	
					                        Extra-Curricular Activities Section
					                        <div class="form-group mt-2">
					                            <label><strong>7. Extra-Curricular Activities: 5 Points</strong></label>
					                            <p><strong>Description:</strong> : Willingness to participate in office or team-building activities that promote a positive work culture.</p>
												<p><strong>Rating Explanation:</strong>Engagement in extra-curricular activities shows an employee’s interest in contributing to the work environment beyond just completing tasks.</p>
															                          
					                            <label for="extraCurricularRating">Rating</label>
					                            <select id="extraCurricularRating" name="extraCurricularRating" class="form-control" required>
													<option value="" disabled selected>Select your Rating</option>
					                                <option value="5" th:selected="${appraisalByEmpId?.extraCurricularScore == 5}">5 - Regularly participates in activities (5 points)</option>
					                                <option value="4" th:selected="${appraisalByEmpId?.extraCurricularScore == 4}">4 - Occasionally participates (4 points)</option>
					                                <option value="3" th:selected="${appraisalByEmpId?.extraCurricularScore == 3}">3 - Participates only when necessary (3 points)</option>
					                                <option value="2" th:selected="${appraisalByEmpId?.extraCurricularScore == 2}">2 - Shows little interest (2 points)</option>
					                                <option value="1" th:selected="${appraisalByEmpId?.extraCurricularScore == 1}">1 - Does not participate (0-1 points)</option>
					                            </select>
					                            <label for="extraCurricularComments">Comments</label>
					                            <textarea id="extraCurricularComments" th:text="${appraisalByEmpId?.extraCurricularComments}" name="extraCurricularComments" class="form-control" placeholder="Add comments"></textarea>
					                        </div>
	
					                        Total Score and Overall Rating Section
					                        <div class="row mt-4">
					                            <div class="col-lg-6">
					                                <label>Total Score:</label>
					                                <span id="totalScore" th:text="${appraisalByEmpId?.totalScore}">0</span>
					                            </div>
					                            <div class="col-lg-6">
					                                <label>Overall Rating:</label>
					                                <span id="overallRating">N/A</span>
					                            </div>
					                        </div>
					                        
					                        Submit Button
											<button type="submit" id="submitAppraisal" class="btn btn-primary mt-3">Submit Appraisal</button>
					                    </form> -->
					                    
					                    
					                    <form id="evaluationForm">
					                         
					                         <input type="hidden" name="emp_id" id="empId" th:value="${appraisalEmpId}"></input>
					                         <input type="hidden" name="dept" id="dept" th:value="${hrAppraisalData.department}"></input>
					                         <input type="hidden" name="quarter" id="quarter" th:value="${hrAppraisalData.quarter}"></input>
					                         <input type="hidden" name="quarter_year" id="quarter_year" th:value="${hrAppraisalData.quarterMonthYear}"></input>
					                         
								             <!-- Project Planning and Management -->
								             <div class="mb-4">
								                <label class="form-label fw-bold">1. Project Planning and Management (20 points)</label>
								                <p><b>Rating Explanation:</b>Developing project plans, setting objectives, timelines, and milestones, allocating resources
												   effectively, and ensuring timely completion of deliverables.</p>
								                <select class="form-select" name="projectPlanningRating" required>
								                    <option value="" disabled selected>-- Select Rating --</option>
								                    <option value="5">5 - Exceeds performance (16-20 Exceeds performance, consistently exceeds expectations)</option>
								                    <option value="4">4 - Meets expectations (11-15 Meets expectations, occasionally exceeds expectations)</option>
								                    <option value="3">3 - Needs improvement (6-10 Needs improvement, satisfactory performance)</option>
								                    <option value="2">2 - Unsatisfactory (3-5 Unsatisfactory, needs improvement)</option>
								                    <option value="1">1 - Unacceptable (0-2 Unacceptable performance, does not meet expectations)</option>
								                </select>
								                <label class="form-label mt-2">Specify Points (According to Your Selected Rating Range)</label>
    											<input type="number" class="form-control" name="projectPlanningPoints" min="0" placeholder="Enter points (e.g., 16)" required>
    
								                <textarea class="form-control mt-2" name="projectPlanningComments" rows="3" placeholder="Comments (optional)"></textarea>
								             </div>
								             <!-- Team Leadership -->
								             <div class="mb-4">
								                <label class="form-label fw-bold">2. Team Leadership (20 points)</label>
								                <p><b>Rating Explanation:</b>Providing direction, guidance, and motivation to the project team, fostering collaboration,
												   resolving conflicts, and ensuring team members are working efficiently towards project goals</p>
								                <select class="form-select" name="teamLeadershipRating" required>
								                    <option value="" disabled selected>-- Select Rating --</option>
								                    <option value="5">5 - Exceeds performance (16-20 Exceeds performance, consistently exceeds expectations)</option>
								                    <option value="4">4 - Meets expectations (11-15 Meets expectations, occasionally exceeds expectations)</option>
								                    <option value="3">3 - Needs improvement (6-10 Needs improvement, satisfactory performance)</option>
								                    <option value="2">2 - Unsatisfactory (3-5 Unsatisfactory, needs improvement)</option>
								                    <option value="1">1 - Unacceptable (0-2 Unacceptable performance, does not meet expectations)</option>
								                </select>
								                <label class="form-label mt-2">Specify Points (According to Your Selected Rating Range)</label>
    											<input type="number" class="form-control" name="teamLeadershipPoints" min="0" placeholder="Enter points (e.g., 16)" required>
    
								                <textarea class="form-control mt-2" name="teamLeadershipComments" rows="3" placeholder="Comments (optional)"></textarea>
								             </div>
								             <!-- Stakeholder Communication -->
								             <div class="mb-4">
								                <label class="form-label fw-bold">3. Stakeholder Communication (20 points)</label>
								                <p><b>Rating Explanation:</b>Managing communication with internal and external stakeholders, updating them on project
													progress, addressing concerns, and ensuring stakeholders are informed throughout the project
													lifecycle</p>
								                <select class="form-select" name="stakeholderCommunicationRating" required>
								                    <option value="" disabled selected>-- Select Rating --</option>
								                    <option value="5">5 - Exceeds performance (16-20 Exceeds performance, consistently exceeds expectations)</option>
								                    <option value="4">4 - Meets expectations (11-15 Meets expectations, occasionally exceeds expectations)</option>
								                    <option value="3">3 - Needs improvement (6-10 Needs improvement, satisfactory performance)</option>
								                    <option value="2">2 - Unsatisfactory (3-5 Unsatisfactory, needs improvement)</option>
								                    <option value="1">1 - Unacceptable (0-2 Unacceptable performance, does not meet expectations)</option>
								                </select>
								                <label class="form-label mt-2">Specify Points (According to Your Selected Rating Range)</label>
    											<input type="number" class="form-control" name="stakeholderCommunicationPoints" min="0" placeholder="Enter points (e.g., 16)" required>
								                <textarea class="form-control mt-2" name="stakeholderCommunicationComments" rows="3" placeholder="Comments (optional)"></textarea>
								             </div>
								             <!-- Budget and Cost Management -->
								             <div class="mb-4">
								                <label class="form-label fw-bold">4. Budget and Cost Management (20 points)</label>
								                <p><b>Rating Explanation:</b>Monitoring project budgets, expenses, and financial resources, ensuring cost-effective measures
												   are taken, and making decisions to keep the project within budget constraints</p>
								                <select class="form-select" name="budgetCostManagementRating" required>
								                    <option value="" disabled selected>-- Select Rating --</option>
								                    <option value="5">5 - Exceeds performance (16-20 Exceeds performance, consistently exceeds expectations)</option>
								                    <option value="4">4 - Meets expectations (11-15 Meets expectations, occasionally exceeds expectations)</option>
								                    <option value="3">3 - Needs improvement (6-10 Needs improvement, satisfactory performance)</option>
								                    <option value="2">2 - Unsatisfactory (3-5 Unsatisfactory, needs improvement)</option>
								                    <option value="1">1 - Unacceptable (0-2 Unacceptable performance, does not meet expectations)</option>
								                </select>
								                <label class="form-label mt-2">Specify Points (According to Your Selected Rating Range)</label>
    											<input type="number" class="form-control" name="budgetCostManagementPoints" min="0"  placeholder="Enter points (e.g., 16)" required>
								                <textarea class="form-control mt-2" name="budgetCostManagementComments" rows="3" placeholder="Comments (optional)"></textarea>
								             </div>
								             <!-- Risk Management -->
								             <div class="mb-4">
								                <label class="form-label fw-bold">5. Risk Management (10 points)</label>
								                <p><b>Rating Explanation:</b>Identifying potential risks to the project, developing risk mitigation strategies, monitoring risk
													factors, and implementing contingency plans to address any unforeseen issues that may impact
													project deliverables</p>
								                <select class="form-select" name="riskManagementRating" required>
								                    <option value="" disabled selected>-- Select Rating --</option>
								                    <option value="5">5 - Exceeds performance (10 Exceeds performance, consistently exceeds expectations)</option>
								                    <option value="4">4 - Meets expectations (7-9 Meets expectations, occasionally exceeds expectations)</option>
								                    <option value="3">3 - Needs improvement (5-6 Needs improvement, satisfactory performance)</option>
								                    <option value="2">2 - Unsatisfactory (3-4 Unsatisfactory, needs improvement)</option>
								                    <option value="1">1 - Unacceptable (0-2 Unacceptable performance, does not meet expectations)</option>
								                </select>
								                <label class="form-label mt-2">Specify Points (According to Your Selected Rating Range)</label>
    											<input type="number" class="form-control" name="riskManagementPoints" min="0"  placeholder="Enter points (e.g., 16)" required>
								                <textarea class="form-control mt-2" name="riskManagementComments" rows="3" placeholder="Comments (optional)"></textarea>
								             </div>
								            
								              <!-- Quality Assurance -->
								             <div class="mb-4">
								                <label class="form-label fw-bold">6. Quality Assurance (10 points)</label>
								                <p><b>Rating Explanation:</b>Ensuring project deliverables meet quality standards and requirements, conducting quality
												   checks and reviews, and taking corrective actions to maintain quality throughout the project.
												</p>
								                <select class="form-select" name="qualityAssuranceRatings" required>
								                    <option value="" disabled selected>-- Select Rating --</option>
								                    <option value="5">5 - Exceeds performance (10 Exceeds performance, consistently exceeds expectations)</option>
								                    <option value="4">4 - Meets expectations (7-9 Meets expectations, occasionally exceeds expectations)</option>
								                    <option value="3">3 - Needs improvement (5-6 Needs improvement, satisfactory performance)</option>
								                    <option value="2">2 - Unsatisfactory (3-4 Unsatisfactory, needs improvement)</option>
								                    <option value="1">1 - Unacceptable (0-2 Unacceptable performance, does not meet expectations)</option>
								                </select>
								                
								                <label class="form-label mt-2">Specify Points (According to Your Selected Rating Range)</label>
    											<input type="number" class="form-control" name="qualityAssurancePoints" min="0"  placeholder="Enter points (e.g., 16)" required>
    											
								                <textarea class="form-control mt-2" name="qualityAssuranceComments" rows="3" placeholder="Comments (optional)"></textarea>
								             </div>
								             
								             
								             <input type="text" name="totalScore">
								             <!-- Submit Button -->
								             <button type="submit" class="btn btn-primary w-100">Submit</button>
								        </form>
					                </div>
					                 
					                </div>
					                <div class="tab-pane fade" id="bordered-justified-profile" role="tabpanel" aria-labelledby="profile-tab">
            								<div class="card-body">
									              <h5 class="card-title pt-0">Employees Appraisals</h5>
									
									              <!-- Table with stripped rows -->
									              <table class="table datatable">
									                <thead>
									                  <tr>
									                    <th>
									                      Sl no.
									                    </th>
									                    <th>Emp Id</th>
									                    <th>Dept</th>
									                    <!-- <th data-type="date" data-format="YYYY/DD/MM">Start Date</th> -->
									                    <th>Action</th>
									                  </tr>
									                </thead>
									                <tbody>
									                  
									                <tr th:each="appraisal, iterStat : ${appraisal}">
												        <td th:text="${iterStat.index + 1}">1</td> <!-- Sl. no. (starting from 1) -->
												        <td th:text="${appraisal.empId}">Emp ID</td> <!-- Employee ID -->
												        <td th:text="${appraisal.department}">Department</td> <!-- Department -->
												        <td>
														    <a th:href="@{/apprisal(empid=${appraisal.empId})}">
														        <i class="bi bi-pencil-square"></i> <!-- Edit icon -->
														        Edit
														    </a>
														</td>
														 <!-- Edit Action button -->
												    </tr>
									                </tbody>
									              </table>
									              <!-- End Table with stripped rows -->									
									            </div>
					                </div>
					                
					              </div>
				                
				            </div>
				        </div>
				    </div>
				</div>
				
<!-- script to save admin KRA sheet -->
<script>
document.getElementById("evaluationForm").addEventListener("submit", function (event) {
    event.preventDefault();

    const formData = new FormData(event.target);
    const data = Object.fromEntries(formData.entries());
    
    
    

    fetch("/saveAdminKRA", {
        method: "POST",
        headers: {
            "Content-Type": "application/json",
        },
        
        body: JSON.stringify({ 
        	
        	empId: data.emp_id,
            department: data.dept,
            quarter: data.quarter,
            quarterYear: data.quarter_year,
            
            projectPlanningRatings: parseInt(data.projectPlanningRating),            
            projectPlanningPoints: data.projectPlanningPoints,            
            projectPlanningDesc: data.projectPlanningComments,
            
            teamLeadershipPoints: parseInt(data.teamLeadershipPoints), 
            teamLeadershipRatings: parseInt(data.teamLeadershipRating),
            teamLeadershipDesc: data.teamLeadershipComments,
            
            stakeholderCommPoints: parseInt(data.stakeholderCommunicationPoints),  
            stakeholderCommRatings: parseInt(data.stakeholderCommunicationRating),   
            stakeholderCommDesc: data.stakeholderCommunicationComments,
            
            
            budgetCostPoints: parseInt(data.budgetCostManagementPoints),
            budgetCostRatings: parseInt(data.budgetCostManagementRating),
            budgetCostDescription: data.budgetCostManagementComments,
            
            riskManagementPoints: parseInt(data.riskManagementPoints),
            riskManagementRatings: parseInt(data.riskManagementRating),
            riskManagementDesc: data.riskManagementComments,
            
            qualityAssurancePoints: parseInt(data.qualityAssurancePoints), 
            qualityAssuranceRatings: parseInt(data.qualityAssuranceRatings), 
            qualityAssuranceDesc: data.qualityAssuranceComments,

            total_score: data.totalScore,
            
        }),
    })
        .then((response) => {
            if (response.ok) {
            	 alert("Evaluation submitted successfully!");
                 window.location.href = "/userDashboard";
                
            } else {
                alert("Failed to submit evaluation.");
            }
        })
        .catch((error) => console.error("Error:", error));
});
</script>
<!-- script to update total score to total score field -->
<script>
document.addEventListener("DOMContentLoaded", function () {
    const pointsFields = [
        "projectPlanningPoints",
        "teamLeadershipPoints",
        "stakeholderCommunicationPoints",
        "budgetCostManagementPoints",
        "riskManagementPoints",
        "qualityAssurancePoints",
    ];

    const totalScoreField = document.querySelector("input[name='totalScore']");

    // Function to calculate and update the total score
    function updateTotalScore() {
        let totalScore = 0;

        pointsFields.forEach((fieldName) => {
            const field = document.querySelector(`input[name='${fieldName}']`);
            const value = parseInt(field.value) || 0; // Default to 0 if the field is empty or invalid
            totalScore += value;
        });

        totalScoreField.value = totalScore; // Update the total score field
    }

    // Add event listeners to all points fields
    pointsFields.forEach((fieldName) => {
        const field = document.querySelector(`input[name='${fieldName}']`);
        field.addEventListener("input", updateTotalScore);
    });
});
</script>
				
				<script>
				    // Calculate total score and overall rating
				    document.getElementById('appraisalFormDetails').addEventListener('input', calculateTotal);

				    function calculateTotal() {
				        const ratings = [
				            parseInt(document.getElementById('projectRating').value) || 0,
				            parseInt(document.getElementById('attendanceRating').value) || 0,
				            parseInt(document.getElementById('collaborationRating').value) || 0,
				            parseInt(document.getElementById('communicationRating').value) || 0,
				            parseInt(document.getElementById('initiativeRating').value) || 0,
				            parseInt(document.getElementById('leadershipRating').value) || 0,
				            parseInt(document.getElementById('extraCurricularRating').value) || 0,
				        ];

				        const totalScore = ratings.reduce((sum, value) => sum + value, 0);
				        document.getElementById('totalScore').innerText = totalScore;

				        let overallRating;
				        if (totalScore >= 90) overallRating = 'Outstanding';
				        else if (totalScore >= 75) overallRating = 'Exceeds Expectations';
				        else if (totalScore >= 60) overallRating = 'Meets Expectations';
				        else overallRating = 'Needs Improvement';

				        document.getElementById('overallRating').innerText = overallRating;
				    }
					
					document.getElementById('submitAppraisal').addEventListener('click', function(event) {
					    event.preventDefault();  // Prevent the default form submission to handle it manually

					    // Check if all ratings are selected
					    if (!isAllRatingsSelected()) {
					        Swal.fire({
					            title: 'Incomplete Form',
					            text: 'Please fill in all the ratings before submitting.',
					            icon: 'error',
					            confirmButtonText: 'Ok'
					        });
					        return;  // Prevent submission if ratings are missing
					    }

					    // Show a SweetAlert confirmation dialog
					    Swal.fire({
					        title: 'Are you sure?',
					        text: "Please review your input carefully. Once submitted, the action cannot be reversed.",
					        icon: 'warning',
					        showCancelButton: true,
					        confirmButtonText: 'Yes, submit!',
					        cancelButtonText: 'No, cancel',
					        reverseButtons: true
					    }).then((result) => {
					        if (result.isConfirmed) {
					            // Collect form data only if user confirmed
					            const formData = {
					            	empId:document.getElementById('empId').value,
					            	department:document.getElementById('dept').value,
					            	quarter:document.getElementById('quarter').value,
					            	quarter_year:document.getElementById('quarterYear').value,
					            	
					                projectScore: getFirstRatingNumber('projectRating'),  // Extract the first number from the rating
					                projectComments: document.getElementById('projectComments').value,
					                attendanceScore: getFirstRatingNumber('attendanceRating'),  // Extract the first number from the rating
					                attendanceComments: document.getElementById('attendanceComments').value,
					                teamCollaborationScore: document.getElementById('collaborationRating').value,
					                teamCollaborationComments: document.getElementById('collaborationComments').value,
					                communicationScore: document.getElementById('communicationRating').value,
					                communicationComments: document.getElementById('communicationComments').value,
					                initiativeScore: document.getElementById('initiativeRating').value,
					                initiativeComments: document.getElementById('initiativeComments').value,
					                leadershipScore: document.getElementById('leadershipRating').value,
					                leadershipComments: document.getElementById('leadershipComments').value,
					                extraCurricularScore: document.getElementById('extraCurricularRating').value,
					                extraCurricularComments: document.getElementById('extraCurricularComments').value,
					                totalScore: document.getElementById('totalScore').innerText,
					                overallRating: document.getElementById('overallRating').innerText
					            };

					            console.log('Form Data:', formData);

					            // Send AJAX request after user confirmation
					            fetch('/save-appraisal', {
					                method: 'POST',
					                headers: {
					                    'Content-Type': 'application/json'
					                },
					                body: JSON.stringify(formData)
					            })
					            .then(response => response.json())
					            .then(data => {
					                if (data.success) {
					                    Swal.fire({
					                        title: 'Success!',
					                        text: 'Appraisal submitted successfully!',
					                        icon: 'success',
					                        confirmButtonText: 'Ok'
					                    }).then(() => {
					                        // Redirect to dashboard after user clicks "Ok"
					                        window.location.href = '/userDashboard';
					                    });
					                } else {
					                    Swal.fire('Error!', 'There was an error submitting the appraisal.', 'error');
					                }
					            })
					            .catch(error => {
					                console.error('Error:', error);
					                Swal.fire('Error!', 'An error occurred. Please try again later.', 'error');
					            });
					        } else {
					            // If the user cancels, show a cancellation message
					            Swal.fire('Cancelled', 'Your submission was cancelled.', 'info');
					        }
					    });
					});


					// Helper function to extract the first rating number (5, 4, 3, etc.) from the option text
					function getFirstRatingNumber(selectId) {
					    const selectElement = document.getElementById(selectId);
					    const selectedOption = selectElement.options[selectElement.selectedIndex];
					    const optionText = selectedOption.textContent || selectedOption.innerText;

					    // Extract the first number from the option text (before the hyphen or dash)
					    const ratingNumber = optionText.split(' -')[0];  // Split at the first " -"
					    
					    return ratingNumber;  // Return the extracted number (5, 4, 3, etc.)
					}
					// Function to check if all ratings are selected
					function isAllRatingsSelected() {
					    return (
					        document.getElementById('projectRating').value &&
					        document.getElementById('attendanceRating').value &&
					        document.getElementById('collaborationRating').value &&
					        document.getElementById('communicationRating').value &&
					        document.getElementById('initiativeRating').value &&
					        document.getElementById('leadershipRating').value &&
					        document.getElementById('extraCurricularRating').value
					    );
					}
				</script>


			</div><!-- End Left side columns -->
    </section>

  </main><!-- End #main -->

  <!-- ======= Footer ======= -->
  <footer id="footer" class="footer">
    <div class="copyright">
      &copy; Copyright <strong><span>Melange System pvt ltd</span></strong>. All Rights Reserved
    </div>
  </footer><!-- End Footer -->

  <a href="#" class="back-to-top d-flex align-items-center justify-content-center"><i class="bi bi-arrow-up-short"></i></a>

  <!-- Vendor JS Files -->
  <script src="assets/vendor/apexcharts/apexcharts.min.js"></script>
  <script src="assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
  <script src="assets/vendor/chart.js/chart.umd.js"></script>
  <script src="assets/vendor/echarts/echarts.min.js"></script>
  <script src="assets/vendor/quill/quill.js"></script>
  <script src="assets/vendor/simple-datatables/simple-datatables.js"></script>
  <script src="assets/vendor/tinymce/tinymce.min.js"></script>
  <script src="assets/vendor/php-email-form/validate.js"></script>

  <!-- Template Main JS File -->
  <script src="assets/js/main.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<div id="attendence-chart"></div>
<script src="/path/to/your/timer.js"></script>
    <script>
        // Function to calculate elapsed time
        function calculateElapsedTime(loggedInTime) {
            const currentTime = new Date();
            
            // Parse the logged-in time (format: HH:mm:ss) into a date object for today
            const [hours, minutes, seconds] = loggedInTime.split(":").map(Number);
            const loggedInDate = new Date();
            loggedInDate.setHours(hours, minutes, seconds, 0);  // Set the time

            // Calculate the difference in milliseconds
            const elapsedMs = currentTime - loggedInDate;

            // Convert milliseconds into hours, minutes, and seconds
            const totalSeconds = Math.floor(elapsedMs / 1000);
            const hoursWorked = Math.floor(totalSeconds / 3600);
            const minutesWorked = Math.floor((totalSeconds % 3600) / 60);
            const secondsWorked = totalSeconds % 60;

            // Format as HH:mm:ss
            const formattedElapsedTime = `${String(hoursWorked).padStart(2, '0')}:${String(minutesWorked).padStart(2, '0')}:${String(secondsWorked).padStart(2, '0')}`;

            return formattedElapsedTime;
        }

        // Function to update elapsed time every second
        function startTimer(loggedInTime) {
            if (loggedInTime === "" || loggedInTime === "00:00:00") {
                document.getElementById('elapsedTime').textContent = "00:00:00";
            } else {
                setInterval(() => {
                    const elapsedTime = calculateElapsedTime(loggedInTime);
                    document.getElementById('elapsedTime').textContent = elapsedTime;
                }, 1000);
            }
        }

        // Get the logged-in time from the HTML and start the timer
        const loggedInTime = document.getElementById('start-time').textContent || "00:00:00";
        startTimer(loggedInTime);
    </script>




<!-- script to notification -->
<script>
//Function to fetch flag value from the backend
function fetchFlag() {
    $.get("/flag", function(response) {
    	console.log("admin");
        var leaveRequestCountValue = response;
        console.log(leaveRequestCountValue);
       // If total notification count is greater than 0, show the bell icon
        if (leaveRequestCountValue.totalNotificationCount > 0) {
            $("#notificationBellIcon").show();  // Show bell icon
        } else {
            $("#notificationBellIcon").hide();  // Hide bell icon if no notifications
        }

        if (leaveRequestCountValue.leaveRequestFlagCount > 0) {
            $("#notificationBellIcon").show();  // Show bell icon
            $("#leaveRequestNotification").show();  // Show specific notification
            
            $("#leaveRequestMessage").text(leaveRequestCountValue.leaveRequestFlagCount + " leave request(s)");
            $(".badge-number").text(leaveRequestCountValue.leaveRequestFlagCount);
            $("#leaveRequestFlagCount").text(leaveRequestCountValue.leaveRequestFlagCount);
        }
        //display the asset notifu=ication based on asset count value
        if(leaveRequestCountValue.asseteRequestFlagCount>0){
        	 
        	 $("#notificationBellIcon").show();  // Show bell icon
             $("#assetRequestNotification").show();  // Show specific notification
              
             $("#assetRequestMessage").text(leaveRequestCountValue.asseteRequestFlagCount + " asset request(s)");
             $(".badge-number").text(leaveRequestCountValue.totalNotificationCount);
             $("#asseteRequestFlagCount").text(leaveRequestCountValue.asseteRequestFlagCount);
        	 	
        }
        
        //display the new project notification based on asset count value
        if(leaveRequestCountValue.newPrjectValueCount>0){
        	 $("#notificationBellIcon").show();  // Show bell icon
             $("#newProjectNotification").show();  // Show specific notification
             
             $("#newProjectMessage").text(leaveRequestCountValue.newPrjectValueCount + " project request(s)");
             $(".badge-number").text(leaveRequestCountValue.totalNotificationCount);
             $("#newPrjectValueCount").text(leaveRequestCountValue.asseteRequestFlagCount);
        }
        //display the appraisal from HR notification ]
        if(leaveRequestCountValue.appraisalCount>0){
        	 $("#notificationBellIcon").show();  // Show bell icon
             $("#hrAppraisal").show();  // Show specific notification
             
             $("#newProjectMessage").text(leaveRequestCountValue.appraisalCount + " Appraisal Form");
             $(".badge-number").text(leaveRequestCountValue.totalNotificationCount);
             $("#newPrjectValueCount").text(leaveRequestCountValue.asseteRequestFlagCount);
        }
      //display the appraisal from employee notification 
        if(leaveRequestCountValue.empAppraisalflag>0){
        	 $("#notificationBellIcon").show();  // Show bell icon
             $("#empAppraisal").show();  // Show specific notification
             
             $("#apprisalempNotification").text(leaveRequestCountValue.empAppraisalflag + " employees sent appraisal");
             $(".badge-number").text(leaveRequestCountValue.totalNotificationCount);
             $("#newPrjectValueCount").text(leaveRequestCountValue.asseteRequestFlagCount);
        }
        
        //display the appraisal Due date notification 
        if(leaveRequestCountValue.adminAppraisalDuedate>0){
        	 $("#dueAppraisal").show();  // Show bell icon
             $("#empAppraisal").show();  // Show specific notification
             
             $("#apprisalDueNotification").text("Tomorrow is the due date for submit appraisal");
             $(".badge-number").text(leaveRequestCountValue.totalNotificationCount);
             $("#newPrjectValueCount").text(leaveRequestCountValue.asseteRequestFlagCount);
        }
      //display the announcement notification based on asset count value
        if(leaveRequestCountValue.announcementNotification>0){
        	 $("#notificationBellIcon").show();  // Show bell icon
             $("#newAnnouncementNotification").show();  // Show specific notification
             
             $("#newannouncement").text(leaveRequestCountValue.announcementNotification + " announcement(s)");
             $(".badge-number").text(leaveRequestCountValue.totalNotificationCount);
        }
        //display the leave request status change notification
        if(leaveRequestCountValue.leaveRequestStatusChangeValue > 0){
        	 
        	 $("#notificationBellIcon").show();  // Show bell icon
             $("#leaveRequestSatusChangeNotification").show();  // Show specific notification
             
             $("#leaveRequestSatusChangeMessage").text("Your leave request status has been");
             $(".badge-number").text(leaveRequestCountValue.totalNotificationCount);             
        	 	
        } 
       
    });
}

// Periodically fetch flag value every second (adjust as needed)
setInterval(fetchFlag, 1000);
</script>

<!-- script to notification link redirect -->
<script th:inline="javascript">
    function redirectToLeaveRequest() {
        var empid = /*[[${empDetailsByEmpId.empid}]]*/ 'defaultEmpId';
        window.location.href = '/viewAdminLeaves?empid=' + empid;
    }
    function redirectToAsset() {
        //var empid = /*[[${empDetailsByEmpId.empid}]]*/ 'defaultEmpId';
        window.location.href = '/asset';
    }
    function redirectToProject() {
        //var empid = /*[[${empDetailsByEmpId.empid}]]*/ 'defaultEmpId';
        window.location.href = '/ongoingProject';
    }    
    function redirectToAppraisal() {
    	var empid = /*[[${empDetailsByEmpId.empid}]]*/ 'defaultEmpId';
    	window.location.href = '/apprisal?empid=' + empid;
    }    
    function redirectToemployeeAppraisal() {
    	var empid = /*[[${empDetailsByEmpId.empid}]]*/ 'defaultEmpId';
    	window.location.href = '/employeeApprisal?empid=' + empid;
    }    
    function redirectToAnnouncement() {
    	var empid = /*[[${empDetailsByEmpId.empid}]]*/ 'defaultEmpId';
    	window.location.href = '/events';
    }
    
    function redirectToAttendence() {
    	var email = /*[[${empDetailsByEmpId.email}]]*/ 'defaultEmpId';
    	window.location.href = '/attendanceLive?email=' +email;
    }
</script>




<!-- script for display attendence graph -->
<script>
const data = [
    { name: 'Present', count: 23 },
    { name: 'Absent', count: 6},
   
];
        	//console.log(data);
            // Initialize the chart with the fetched data
            Highcharts.chart('attendence-chart1', {
                chart: {
                    type: 'pie'
                },
                title: {
                    text: ''
                },
                plotOptions: {
                    pie: {
                        dataLabels: {
                            enabled: true,
                            distance: 5, // Move labels slightly outside the pie
                            formatter: function() {
                                return this.point.name + ': <br>' + this.point.y;
                            },
                            style: {
                                color: 'black',
                                textOutline: 'none'
                            }
                        }
                    }
                },
                series: [{
                    name: 'Employees',
                    data: data.map(dept => [dept.name, dept.count])
                }]
            });
       
</script>



<!-- script for profile pic -->
<script>
$.ajax({
    type: "GET",
    url: "fetchEmployeeDocumentDetailsOnlyByEmpId",
    data: {
        "emp_id": $('#emp_idSessionValue').val()
    },
    success: function(data) {
    	console.log("++++data"+JSON.stringify(data));
        $('#dynamicProfilePic').attr('src', `${data.profilePicPath}`);
    },
    error: function(xhr, status, error) {
        console.error("Error invoking data:", error);
    }
});
</script>

</body>

</html>