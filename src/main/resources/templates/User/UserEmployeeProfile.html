<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head>

  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">

  <title>User Profile</title>
  <meta content="" name="description">
  <meta content="" name="keywords">

  <!-- Favicons -->
  <link href="assets/img/favicon.png" rel="icon">
  <link href="assets/img/apple-touch-icon.png" rel="apple-touch-icon">

  <!-- Google Fonts -->
  <!-- <link href="https://fonts.gstatic.com" rel="preconnect">
  <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i|Nunito:300,300i,400,400i,600,600i,700,700i|Poppins:300,300i,400,400i,500,500i,600,600i,700,700i" rel="stylesheet"> -->
  
  <link rel="stylesheet" href="/assets/font/fonts.css">
  
  <!-- Vendor CSS Files -->
  <link href="assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
  <link href="assets/vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet">
  <link href="assets/vendor/boxicons/css/boxicons.min.css" rel="stylesheet">
  <link href="assets/vendor/quill/quill.snow.css" rel="stylesheet">
  <link href="assets/vendor/quill/quill.bubble.css" rel="stylesheet">
  <link href="assets/vendor/remixicon/remixicon.css" rel="stylesheet">
  <link href="assets/vendor/simple-datatables/style.css" rel="stylesheet">

  <!-- Template Main CSS File -->
  <link href="assets/css/style.css" rel="stylesheet">
  
  <!-- SweetAlert2 Library -->
  <!--   <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script> -->
   
  <script src="assets/js/sweetalert2@11.js"></script>

  <!-- =======================================================
  
  * Template Name: NiceAdmin
  * Template URL: https://bootstrapmade.com/nice-admin-bootstrap-admin-html-template/
  * Updated: Apr 20 2024 with Bootstrap v5.3.3
  * Author: BootstrapMade.com
  * License: https://bootstrapmade.com/license/
  
  ======================================================== -->
  
  <style>
  
  .profileDownloadSpan,.panDownloadSpan{
	background: #636262; 
	color: #fff; 
	padding: 8px; 
	border-radius: 50%;
	cursor: pointer;
}
			
.profileDownloadSpan:hover,.panDownloadSpan:hover{
	background: #474747;
}
  .employee_type_btn_div{
	display: flex;
	align-items: center;
	/* background: red; */
	padding: 5px;
}

.employee_type_btn_div button{
	/* border: none;
	outline: none; */
	font-size: 14px;
	border-radius: 0;
	padding: 4px 6px;
}

.employee_type_btn_div .btn-outline-primary{
	border-top-left-radius: 5px;
	border-bottom-left-radius: 5px;
}

.employee_type_btn_div .btn-outline-danger{
	border-left: none;
	border-top-right-radius: 5px;
	border-bottom-right-radius: 5px;
}

.activeBtnStyle{
	background: #0d6efd;
	color: #fff;
}

.inActiveBtnStyle{
	background: #dc3545;
	color: #fff;
}

  .inactiveReasonModal {
		    position: fixed;
		    top: 0;
		    left: 0;
		    width: 100%;
		    height: 100%;
		    background-color: rgba(0, 0, 0, 0.5);
		    display: none;
		    justify-content: center;
		    align-items: center;
		    z-index: 999;
		}
		
		.modal-content2 {
		    background-color: #fff;
		    padding: 20px;
		    border-radius: 5px;
		    width: 400px;
		    margin: 1% auto;
		}
		
		.modal-footer {
		    text-align: right;
		}
		.profile-card .table {
		    width: 100%; /* Ensure table takes the full width of the parent */
		    table-layout: auto; /* Allow the table to adjust column widths based on content */
		}
		
		.profile-card .table th, .profile-card .table td {
		    word-wrap: break-word; /* Allows long words to break and wrap onto the next line */
		    white-space: normal; /* Allows text to wrap onto the next line */
		}
		.table{
			font-size:14px;
		}
   
        .form-label{
        	font-size: 0.9rem;
        }
        
        .profile-table th{
        	 font-weight: 600;
   			 color: rgba(1, 41, 112, 0.6);
        }
        
        .updateEmployeeForm input,
        .updateEmployeeForm select,
        .updateEmployeeForm textarea
        {
        	font-size:14px;
        }
        
        .changePassword label{
        	font-size:14px;
        }
        
        /* Custom select container */
		.select-container {
		  position: relative;
		  display: inline-block;
		}
		
		/* Hide default arrow */
		.select-container select {
		  appearance: none;
		  -webkit-appearance: none;
		  -moz-appearance: none;
		  background: transparent;
		  padding-right: 2.5rem; /* Adjust based on the size of the arrow */
		}
		
		/* Custom arrow icon */
		.select-container::after {
		  content: "";
		  position: absolute;
		  
		  right: 0.5rem; /* Adjust based on the size of the arrow */
		  transform: translateY(-50%);
		  width: 2rem; /* Adjust based on the size of the arrow */
		  height: 0.8rem; /* Adjust based on the size of the arrow */
		  background: url('assets/img/down-arrow.png') no-repeat center center;
		  background-size: contain;
		  pointer-events: none;
		}
		
		/* Optional: Add focus style to the select element */
		.select-container select:focus {
		  outline: none;
		}
		
		 /* Footer styles */
        .footer {
            background-color: #f8f9fa;
            text-align: center;
        }
        span.error {
		    color: red;
		    font-size: 0.9em;
		}
        .edit-icon {
		    cursor: pointer;
		    color: #007bff;
		    transition: color 0.2s;
		}
		
		.edit-icon:hover {
		    color: #0056b3;
		}
		
		@media (min-width: 1070px) {
		    .custom-padding {
		        padding-left: 0px !important;
		    }
		}	
		
		
		/* Fullscreen overlay with dim background */
				#loadingPopup {
				    position: fixed;
				    top: 0;
				    left: 0;
				    width: 100%;
				    height: 100%;
				    background: rgba(0, 0, 0, 0.5); /* Dim background */
				    display: flex;
				    flex-direction: column;
				    justify-content: center;
				    align-items: center;
				    z-index: 9999;
				    font-family: Arial, sans-serif;
				    color: white; /* Text color for better contrast */
				}
				
				/* Spinner animation */
				.spinner {
				    width: 50px;
				    height: 50px;
				    border: 6px solid rgba(255, 255, 255, 0.3); /* Semi-transparent border */
				    border-top-color: white; /* Bright top border */
				    border-radius: 50%;
				    animation: spin 1s linear infinite;
				}
				
				/* Loading text */
				#loadingPopup p {
				    margin-top: 20px;
				    font-size: 18px;
				    font-weight: bold;
				    color: white;
				}
				
				/* Spinner keyframe animation */
				@keyframes spin {
				    to {
				        transform: rotate(360deg);
				    }
				}	
				
				.replied-message {
								    padding: 5px;
								    margin-bottom: 5px;
								    font-size: 14px;
								    color: #333;
								    border-radius: 5px;
								    border-left: 4px solid;
								}

								.right .replied-message { /* When the logged-in user is the sender */
								    background-color: #e1f3ff; /* Light blue */
								    border-left-color: #99d1ff; /* Slightly darker blue */
								}

								.left .replied-message { /* When the logged-in user is the recipient */
								    background-color: #e2e2e2; /* Soft gray with a hint of white */
								    border-left: 4px solid #bdbdbd; /* Slightly darker gray for subtle contrast */
								}
								/* css to reduce the font size of form validation err */
								span[id$="_error"] {
								    font-size: 12px; /* Reduce font size */
								    color: red; /* Keep error messages in red */
								    display: block; /* Ensure errors appear on a new line */
								    margin-top: 2px; /* Add a little spacing */
								}
								 
								
								.table-fixed-height {
								    max-height: 400px; /* Adjust height as needed */
								    overflow-y: auto;
								    border: 1px solid #dee2e6;
								}
								
								.sticky-header-table thead th {
								    position: sticky;
								    top: 0;
								    background-color: #f8f9fa; /* Matches Bootstrap .table-light */
								    z-index: 1;
								}
				
  </style>
</head>

<body>

  <!-- ======= Header ======= -->
  <header id="header" class="header fixed-top d-flex align-items-center" th:if="${empDetailsByEmpId.deptId>0}">

   <!--  <div class="app-branding" style="width:100%; margin:0 0 0 10px; padding:5px;">
				    <a class="app-logo" th:href=@{/dashboard}>
				        <img class="logo-icon" src="assets/img/logo.png" alt="logo" style="width:200px; height:50px; max-width:100%; padding:0 2px 0 10px; margin:0;">
				    </a>
				</div> --><!-- End Logo -->
	
		   <div class="d-flex align-items-center logo-container" style="width:45%; margin:0 0 0 10px; padding:5px;">
				    <a class="app-logo" th:href=@{/userDashboard}>
				        <img class="d-none d-lg-block" src="assets/img/logo.png" alt="logo" style="width:200px; height:50px; max-width:100%; padding:0 2px 0 10px; margin:0;">
				    </a>
				    <!-- <i class="bi bi-chevron-double-left toggle-sidebar-btn" onclick="toggleIconRotation()"></i> -->
			</div>
				
   <!--  <div class="search-bar">
      <form class="search-form d-flex align-items-center" method="POST" action="#">
        <input type="text" name="query" placeholder="Search" title="Enter search keyword">
        <button type="submit" title="Search"><i class="bi bi-search"></i></button>
      </form>
    </div> --><!-- End Search Bar -->

	<div th:replace="fragments/header :: header" ></div>
	
  </header><!-- End Header -->
  
  <!-- =======Super Admin Header ======= -->
  <header id="header" class="header fixed-top d-flex align-items-center" th:if="${empDetailsByEmpId.deptId == 0}">

    <div class="d-flex align-items-center logo-container" style="width:45%; margin:0 0 0 10px; padding:5px;">
				    <a class="app-logo" th:href=@{/navbar}>
				        <img class="d-none d-lg-block" src="assets/img/logo.png" alt="logo" style="width:200px; height:50px; max-width:100%; padding:0 2px 0 10px; margin:0;">
				    </a>
				    <!-- <i class="bi bi-chevron-double-left toggle-sidebar-btn" onclick="toggleIconRotation()"></i> -->
	</div><!-- End Logo -->

    <!-- <div class="search-bar">
      <form class="search-form d-flex align-items-center" method="POST" action="#">
        <input type="text" name="query" placeholder="Search" title="Enter search keyword">
        <button type="submit" title="Search"><i class="bi bi-search"></i></button>
      </form>
    </div> --><!-- End Search Bar -->

    <div th:replace="fragments/superAdminHeader :: header"></div>

  </header><!-- End Header -->


  <!-- ======= Sidebar ======= -->
  
<aside id="sidebar" class="sidebar">
<input type="hidden" id="employee-id" th:value="${empDetailsByEmpId.deptId}">
<input type="hidden" id="loggedEmpEmail" th:value="${empDetailsByEmpId.email}">

    <ul class="sidebar-nav" id="sidebar-nav">
		 
        <li class="nav-item" th:if="${empDetailsByEmpId.deptId>0}">
            <a class="nav-link" th:href="@{/userDashboard}">
                <i class="bi bi-grid"></i>
                <span>Dashboard</span>
            </a>
        </li>
        <li class="nav-item" th:if="${empDetailsByEmpId.deptId==0}">
		    <a class="nav-link " th:href="@{/navbar}">
		        <i class="bi bi-grid"></i>
		        <span>Dashboard</span>
		    </a>
	    </li>
	    <li class="nav-item" th:if="${empDetailsByEmpId.deptId>0}">
			<a class="nav-link" th:href="@{/Departmentdoc}">
				<i class="bi bi-journal-bookmark"></i>
				<span>MSPL DocVault</span>
			</a>
		</li>
		
		<li class="nav-item" th:if="${empDetailsByEmpId.deptId==0}">
			<a class="nav-link" th:href="@{/Departmentdoc}">
				<i class="bi bi-journal-bookmark"></i>
				<span>MSPL DocVault</span>
			</a>
		</li>   
		<li class="nav-item" th:if="${session.permissions.dispatch && empDetailsByEmpId.deptId==0}">
            <a class="nav-link" th:href="@{/dispatchIframe}">
                <i class="bi bi-truck"></i>
                <span>Dispatched Details</span>
            </a>
        </li>
         <li class="nav-item" th:if="${empDetailsByEmpId.deptId>0}">
            <a class="nav-link" th:classappend="${empDetailsByEmpId.email == employee.email ? 'active' : ''}"  th:href="@{/viewAdminProfile(empid=${empDetailsByEmpId.empid})}">
                <i class="bi bi-person"></i>
                 <span>My Profile</span>
            </a>
        </li>  
        <li class="nav-item" th:if="${empDetailsByEmpId.deptId>0}">
            <a class="nav-link" th:href="@{/attendanceLive(email=${empDetailsByEmpId.email})}">
                <i class="bi bi-calendar3"></i>
                <span>Attendence</span>
            </a> 
        </li>      
       <li class="nav-item" th:if="${empDetailsByEmpId.deptId>0}">
            <a class="nav-link" th:href="@{/groupMailId}">
                <i class="bi bi-telephone"></i>
                <span>Employee Contacts</span>
            </a>
        </li>
       <!--  <li class="nav-item" th:if="${empDetailsByEmpId.deptId>0}">
            <a class="nav-link " th:href="@{/InterCommDetails}">
                <i class="bi bi-telephone"></i>
                <span>InterComm Details</span>
            </a>
        </li> -->
        <li class="nav-item" th:if="${empDetailsByEmpId.deptId>0}">
            <a class="nav-link" th:href="@{/adminHoliday}">
                <i class="bi bi-calendar4-week"></i>
                <span>Holiday List</span>
            </a>
        </li>
        <li class="nav-item" th:if="${empDetailsByEmpId.deptId>0}">
		    <a class="nav-link" th:classappend="${empDetailsByEmpId.email != employee.email ? 'active' : ''}"  th:href="@{/employee}">
		        <i class="bi bi-people"></i>	
		        <span>Employee</span>
		    </a>
	   </li> 
        <li class="nav-item" th:if="${empDetailsByEmpId.deptId>0}">
            <a class="nav-link" th:href="@{/viewAdminLeaves(empid=${empDetailsByEmpId.empid})}">
                <i class="bi bi-card-text"></i>
                <span>Team Leaves</span>
            </a>
        </li>
        <li class="nav-item" th:if="${empDetailsByEmpId.deptId>0}">
            <a class="nav-link" th:href="@{/events}">
                <i class="bi bi-megaphone"></i>
                <span>Announcement</span>
            </a>
        </li>               
        <li class="nav-item" th:if="${empDetailsByEmpId.deptId>0}">
            <a class="nav-link" th:href="@{/asset}">
                <i class="bi bi-wallet"></i>
                <span>Assets</span>
            </a>
        </li>
        <li class="nav-item" th:if="${empDetailsByEmpId.deptId>0}">
            <a class="nav-link" th:href="@{/ongoingProject}">
                <i class="bi bi-card-heading"></i>
                <span>Projects</span>
            </a>
        </li>   
         <!-- <li class="nav-item" th:if="${empDetailsByEmpId.deptId>0}">
            <a class="nav-link" th:href="@{/viewAdminPayslip(empid=${empDetailsByEmpId.empid})}">
                <i class="bi bi-file-text"></i>
                <span>Payslip</span>
            </a>
        </li>     --> 
         <!-- Loop through the permissions map -->
       <li class="nav-item" th:if="${permissions.interviewAccess && empDetailsByEmpId.deptId>0}" >
            <a class="nav-link" th:href="@{/moatIframe}">
                <i class="bi bi-vector-pen"></i>
                <span>Interview</span>
            </a>
        </li>
         <li class="nav-item new-feature" th:if="${empDetailsByEmpId.deptId>0}">
			    <a class="nav-link collapsed" data-bs-target="#presales-submenu" data-bs-toggle="collapse" href="#">
			        <i class="bi bi-layout-text-window-reverse"></i>
			        <span>Pre-sales</span>
			        <i class="bi bi-chevron-down ms-auto"></i>
			    </a> 
			    <ul id="presales-submenu" class="nav-content collapse" data-bs-parent="#sidebar-nav">
			        <li>
			            <a th:href="@{/crm}">
			                <i class="bi bi-circle"></i><span>Activity</span>
			            </a>
			        </li>
			        <li>
			            <a th:href="@{/deals}">
			                <i class="bi bi-circle"></i><span>Pipedrive</span>
			            </a>
			        </li>
			    </ul>
			</li>
        <li class="nav-item" th:if="${permissions.sales && empDetailsByEmpId.deptId>0}" >
            <a class="nav-link" th:href="@{/sales}">
                <i class="bi bi-cart3"></i>
                <span>Sales</span>
            </a>
        </li>
        <li class="nav-item" th:if="${permissions.accountsAccess && empDetailsByEmpId.deptId>0}" >
            <a class="nav-link" th:href="@{/accounts}">
                <i class="bi bi-person-vcard"></i>
                <span>Accounts</span>
            </a>
        </li>
        <li class="nav-item" th:if="${permissions.storeAccess && empDetailsByEmpId.deptId>0}" >
            <a class="nav-link" th:href="@{/store}">
                <i class="bi bi-shop-window"></i>
                <span>Store</span>
            </a>
        </li>
        <li class="nav-item" th:if="${permissions.apprisalAccess && empDetailsByEmpId.deptId>0}" >
            <a class="nav-link" id="apprisalLink" th:href="@{/apprisal(empid=${empDetailsByEmpId.empid})}">
		        <i class="bi bi-file-text"></i>
		        <span>Appraisal</span>
		    </a>
        </li>
        <li class="nav-item" th:if="${empDetailsByEmpId.deptId>0}">
		    <a class="nav-link" id="apprisalLink" th:href="@{/employeeApprisal(empid=${empDetailsByEmpId.empid})}">
		        <i class="bi bi-file-text"></i>
		        <span>Employee Appraisal</span>
		    </a>
		</li>
       <li class="nav-item" th:if="${empDetailsByEmpId.deptId>0}">
				<a class="nav-link" th:href="@{/my-favorites}">
					<i class="bi bi-layout-text-window-reverse"></i>
					<span>To-Chat & Remind</span><span id="unreadCountBadge" class="badge bg-primary" style="display: none;"></span>
				</a>
		</li>
		<li class="nav-item new-feature" th:if="${empDetailsByEmpId.deptId>0}">
					    <a class="nav-link" th:href="@{/releasenotes}">
					        <i class="bi bi-layout-text-window-reverse"></i>
					        <span class="release-note-text">
					            Release Note 
					            <span class="version-number">(Policy Update)</span>
					        </span>
					    </a>
		</li> 
	    <!-- <li class="nav-item" th:if="${empDetailsByEmpId.deptId==0}">
            <a class="nav-link" th:href="@{/attendanceLive(email=${empDetailsByEmpId.email})}">
                <i class="bi bi-calendar3"></i>
                <span>Attendence</span>
            </a>
        </li>  -->
         <li class="nav-item" th:if="${empDetailsByEmpId.deptId==0}">
		    <a class="nav-link">
		        <i class="bi bi-calendar4-week"></i>
		        <span>Holiday List</span>
		    </a>
	 </li>	
	 
	<li class="nav-item" th:if="${empDetailsByEmpId.deptId==0}">
		     <a class="nav-link" th:href="@{/addInterComm}">
                <i class="bi bi-telephone"></i>
                <span>Communication</span>
            </a>
	 </li>
	 <li class="nav-item" th:if="${empDetailsByEmpId.deptId==0}">
		     <a class="nav-link" th:href="@{/groupMailId}">
                <i class="bi bi-envelope-open"></i>
                <span>Group Mail Id</span>
            </a>
	 </li>
	 <li class="nav-item" th:if="${empDetailsByEmpId.deptId==0}">
		<a class="nav-link" th:href="@{/hikeRatingForm}">
			<i class="bi bi-arrow-up-circle"></i><span>Appraisal Ratings</span>
		</a>
	</li>
	<li class="nav-item" th:if="${empDetailsByEmpId.deptId==0}">
		<a class="nav-link" th:href="@{/apprisalEmployee}">
			<i class="bi bi-check-square"></i><span>Submitted Appraisals</span>
		</a>
	</li>
	 <li class="nav-item" th:if="${empDetailsByEmpId.deptId==0}">
          <a class="nav-link" href="hrActivity">
	        <i class="bi bi-file-lock"></i><span>Permissions</span>
	    </a>
      </li>
	 <!--  <li class="nav-item" th:if="${empDetailsByEmpId.deptId==0}">
            <a class="nav-link"  th:href="@{/InterCommDetails}">
                <i class="bi bi-telephone"></i>
                <span>InterComm Details</span>
            </a>
      </li> -->
      <li class="nav-item" th:if="${empDetailsByEmpId.deptId==0}">
		    <a class="nav-link"  th:href="@{/viewAdminLeaves(empid=${empDetailsByEmpId.empid})}">
		        <i class="bi bi-calendar4-week"></i>
		        <span>Employee Leaves</span>
		    </a>
	 </li>
	 <li class="nav-item" th:if="${empDetailsByEmpId.deptId==0}">
		    <a class="nav-link" th:href="@{/events}">
		        <i class="bi bi-megaphone"></i>
		        <span>Announcement</span>
		    </a>
	 </li> 
        <li class="nav-item" th:if="${empDetailsByEmpId.deptId==0}">
		    <a class="nav-link" th:href="@{/addDepartment}">
		        <i class="bi bi-calendar4-week"></i>
		        <span>Department</span>
		    </a>
	   </li>
	 <li class="nav-item" th:if="${empDetailsByEmpId.deptId==0}">
		    <a class="nav-link"  th:href="@{/addRole}">
		        <i class="bi bi-receipt"></i>
		        <span>Role</span>
		    </a>
	 </li>
	 
	 <li class="nav-item" th:if="${empDetailsByEmpId.deptId==0}">
		    <a class="nav-link active" th:href="@{/employee}">
		        <i class="bi bi-people"></i>
		        <span>Employee</span>
		    </a>
	 </li> 
      <li class="nav-item" th:if="${empDetailsByEmpId.deptId==0}">
            <a class="nav-link"  th:href="@{/ongoingProject}">
                <i class="bi bi-calendar3"></i>
                <span>Projects</span>
            </a>
      </li>  
      <li class="nav-item" th:if="${empDetailsByEmpId.deptId==0}">
            <a class="nav-link"  th:href="@{/asset}">
                <i class="bi bi-wallet"></i>
                <span>Assets</span>
            </a>
      </li>  
      <li class="nav-item" th:if="${permissions.interviewAccess && empDetailsByEmpId.deptId==0}" >
            <a class="nav-link" th:href="@{/moatIframe}">
                <i class="bi bi-vector-pen"></i>
                <span>Interview</span>
            </a>
        </li>
         <li class="nav-item new-feature" th:if="${empDetailsByEmpId.deptId==0}">
			    <a class="nav-link collapsed" data-bs-target="#presales-submenu" data-bs-toggle="collapse" href="#">
			        <i class="bi bi-layout-text-window-reverse"></i>
			        <span>Pre-sales</span>
			        <i class="bi bi-chevron-down ms-auto"></i>
			    </a> 
			    <ul id="presales-submenu" class="nav-content collapse" data-bs-parent="#sidebar-nav">
			        <li>
			            <a th:href="@{/crm}">
			                <i class="bi bi-circle"></i><span>Activity</span>
			            </a>
			        </li>
			        <li>
			            <a th:href="@{/deals}">
			                <i class="bi bi-circle"></i><span>Pipedrive</span>
			            </a>
			        </li>
			    </ul>
			</li>
        <li class="nav-item" th:if="${permissions.sales && empDetailsByEmpId.deptId==0}" >
            <a class="nav-link" th:href="@{/sales}">
                <i class="bi bi-cart3"></i>
                <span>Sales</span>
            </a>
        </li>
        <li class="nav-item" th:if="${permissions.accountsAccess && empDetailsByEmpId.deptId==0}" >
            <a class="nav-link" th:href="@{/accounts}">
                <i class="bi bi-person-vcard"></i>
                <span>Accounts</span>
            </a>
        </li>
        <li class="nav-item" th:if="${permissions.storeAccess && empDetailsByEmpId.deptId==0}" >
            <a class="nav-link" th:href="@{/store}">
                <i class="bi bi-shop-window"></i>
                <span>Store</span>
            </a>
        </li>  
        <li class="nav-item" th:if="${empDetailsByEmpId.deptId==0}">
			    <a class="nav-link" href="feedbackReports">
			        <i class="bi bi-chat-square-text"></i>
			        <span>Feedback Reports</span>
			    </a>
		 </li>
        <li class="nav-item" th:if="${permissions.storeAccess && empDetailsByEmpId.deptId==0}">
				<a class="nav-link" th:href="@{/my-favorites}">
					<i class="bi bi-layout-text-window-reverse"></i>
					<span>To-Chat & Remind</span><span id="unreadCountBadge" class="badge bg-primary" style="display: none;"></span>
				</a>
		</li>
		<li class="nav-item new-feature"  th:if="${permissions.storeAccess && empDetailsByEmpId.deptId==0}">
					    <a class="nav-link" th:href="@{/releasenotes}">
					        <i class="bi bi-layout-text-window-reverse"></i>
					        <span class="release-note-text">
					            Release Note 
					            <span class="version-number">(Policy Update)</span>
					        </span>
					    </a>
		</li>
    </ul>
</aside>
<div id="loadingPopup" style="display:none">
    <div class="spinner"></div>
    <p>Loading please wait...</p>
</div>
<!-- End Sidebar-->

  <main id="main" class="main">
  
  <input type="hidden" id="loggedAdminEmpId2" th:value="${session.loggedAdminEmpId}">
  <input type="hidden" id="loggedAdminEmailId2" th:value="${session.email}">
  
  <div class="chat-app" style="display: none;">
                <div id="plist" class="people-list">
                        <div class="input-group mb-3">
                                <input type="text" id="searchInputModal" class="form-control" placeholder="Search..."
                                        aria-label="Search">
                                <span class="input-group-text">
                                        <i class="bi bi-search"></i>
                                </span>

                        </div>
                        <ul id="employeeNames" class="list-unstyled chat-list mt-2 mb-0">
                                <!-- Employee names will be dynamically populated here -->
                        </ul>
                </div>

                <div class="chat">
                        <div class="chat-header clearfix">
                                <div class="row w-100">

                                        <!-- Employee Photo and Name Section -->
                                        <div class="col-lg-6 d-flex align-items-center">
                                                <div class="chat-about d-flex align-items-center">
                                                        <img id="employeePhoto" class="employee-photo" src="default-avatar.png"
                                                                alt="Employee Photo" />
                                                        <h6 class="m-b-0 ml-2" id="employeeName">Select an Employee</h6>
                                                </div>
                                        </div>
                                        <!-- Right aligned three dots (Vertical) -->
                                        <div class="col-lg-6 text-right">
                                                <div class="dropdown custom-dropdown">
                                                        <button class="btn btn-outline-secondary" type="button" id="dropdownMenuButton"
                                                                data-bs-toggle="dropdown" aria-expanded="false">
                                                                <i class="fa fa-ellipsis-v"></i>
                                                        </button>
                                                        <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdownMenuButton">
                                                                <li><a class="dropdown-item" href="#">Delete Chat</a></li>
                                                                <li><a class="dropdown-item" href="#">Mute</a></li>
                                                                <li><a class="dropdown-item" href="#">Contact Info</a></li>
                                                        </ul>
                                                </div>
                                        </div>
                                </div>
                        </div>
                        <div id="chat-window" class="chat-history">
                                <ul class="m-b-0">
                                        <!-- Chat messages will be populated here dynamically -->

                                </ul>
                                <div id="message-icon-container" class="message-icon" style="display: none;">

                                        <!-- Plain square message icon SVG (behind) -->
                                        <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
                                                <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g>
                                                <g id="SVGRepo_iconCarrier">
                                                        <path
                                                                d="M10 9H17M10 13H17M7 9H7.01M7 13H7.01M21 20L17.6757 18.3378C17.4237 18.2118 17.2977 18.1488 17.1656 18.1044C17.0484 18.065 16.9277 18.0365 16.8052 18.0193C16.6672 18 16.5263 18 16.2446 18H6.2C5.07989 18 4.51984 18 4.09202 17.782C3.71569 17.5903 3.40973 17.2843 3.21799 16.908C3 16.4802 3 15.9201 3 14.8V7.2C3 6.07989 3 5.51984 3.21799 5.09202C3.40973 4.71569 3.71569 4.40973 4.09202 4.21799C4.51984 4 5.0799 4 6.2 4H17.8C18.9201 4 19.4802 4 19.908 4.21799C20.2843 4.40973 20.5903 4.71569 20.782 5.09202C21 5.51984 21 6.0799 21 7.2V20Z"
                                                                stroke="#94b7db" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path>
                                                </g>
                                        </svg>

                                        <!-- SVG with animation -->
                                        <svg class="animated-icon" viewBox="0 0 374 374" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                <g clip-path="url(#clip0)">
                                                        <path
                                                                d="M318.084 132.622C311.339 101.37 287.642 82 256.652 82C238.423 82 217.459 89.3248 197.954 102.509C191.574 106.904 182.642 106.904 176.079 102.672C155.298 88.9992 135.246 82 116.652 82C85.6626 82 61.9647 101.533 55.2199 133.111C44.2824 183.896 80.923 252.26 187.017 291C292.746 251.446 329.204 183.082 318.084 132.622Z" />
                                                        <path
                                                                d="M187.466 0C187.366 0 187.166 0 186.866 0C85.666 0 3.36603 82.3 3.36603 183.5C3.36603 224.8 17.466 264.9 43.266 297.2L16.566 359.3C14.366 364.4 16.766 370.3 21.766 372.4C23.566 373.2 25.566 373.4 27.466 373.1L125.366 355.9C144.966 363 165.566 366.6 186.366 366.5C287.566 366.5 369.866 284.2 369.866 183C370.066 82.1 288.366 0.1 187.466 0ZM192.966 269.8C188.966 271.3 184.666 271.3 180.666 269.8C149.066 257.1 124.466 238.3 109.466 215.4C95.966 194.7 90.766 171.4 94.866 149.9C100.466 121.4 121.866 102.3 148.266 102.3C160.966 102.3 173.866 106.5 186.766 114.7C199.366 106.5 212.466 102.3 225.066 102.3C251.866 102.3 272.866 120.9 278.466 149.6C286.066 188.8 262.666 241.3 192.966 269.8Z" />
                                                </g>
                                                <defs>
                                                        <clipPath id="clip0">
                                                                <rect width="373.232" height="373.232" fill="white" />
                                                        </clipPath>
                                                </defs>
                                        </svg>



                                        <!-- Dots Animation -->
                                        <div class="dots">
                                                <div class="dot"></div>
                                                <div class="dot"></div>
                                                <div class="dot"></div>
                                        </div>




                                </div>


                        </div>
                        <!-- Move the paragraph outside the chat window -->
                        <p id="logo-text"
                                style="text-align: center; font-size: 14px; color: #6c757d; margin-top: 10px; display: none;">
                                "Reach out to your colleagues and stay on top of your projects with quick, seamless communication."
                        </p>
                        <div class="chat-message clearfix">
                                <div class="custom-input-group mb-0">
                                        <input type="text" id="message" class="custom-form-control" placeholder="Enter your message..." />
                                        <div class="custom-input-group-append">
                                                <button class="custom-send-btn" onclick="sendMessage()">
                                                        <i class="ri ri-send-plane-2-fill"></i>
                                                </button>
                                        </div>
                                </div>

                        </div>
                </div>
        </div>
        <input type="hidden" th:value="${empDetailsByEmpId.email}" id="loggedInMail">
        <input type="hidden" id="loggedInDeptName" th:value="${empDetailsByEmpId.deptName}">
 	    <input type="hidden" id="employeeId1" name="empId" th:value="${empDetailsByEmpId.empid}">
 
  						<!-- Feedback Modal -->
						<div class="modal fade" id="feedbackModal" tabindex="-1" aria-labelledby="feedbackModalLabel" aria-hidden="true">
							    <div class="modal-dialog">
							        <div class="modal-content rounded-4 shadow-lg">
							            <div class="modal-header border-0">
							                <h5 class="modal-title" id="feedbackModalLabel">Feedback Form</h5>
							                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
							            </div>
							            <div class="modal-body">
							                <form id="feedbackForm" method="post" enctype="multipart/form-data">
							                	<!-- <input type="hidden" name="id" id="feedbackTicketNumber"> -->
							                    <div class="mb-3" style="display: none;">
							                        <label for="feedbackName" class="form-label fw-bold">Your Name</label>
							                        <input type="text" class="form-control" id="feedbackName" name="name" th:value="${empDetailsByEmpId.fullName}" readonly>
							                    </div>
							                    <div class="mb-3" style="display: none;">
							                        <label for="feedbackEmail" class="form-label fw-bold">Your Email</label>
							                        <input type="email" class="form-control" id="feedbackEmail" name="email" th:value="${empDetailsByEmpId.email}" readonly>
							                    </div>
							                    <div class="mb-3">
							                        <label for="feedbackEmailyy" class="form-label fw-bold">To</label>
							                        <div class="to-field-container">
							                            <span class="to-field rounded-pill px-3 py-2 shadow-sm">bugs_msplconnect@melangesystems.com</span>
							                        </div>
							                    </div>
												<div class="mb-3">
												    <label for="bugType" class="form-label fw-bold">Bug Type</label>
												    <select class="form-control" id="bugType" name="bugType" required>
												        <option value="MSPL Connect Application">MSPL Connect Application</option>
												        <option value="MSPL Connect New Feature">MSPL Connect New Feature</option>
												    </select>
												</div>
							
							                    <div class="mb-3">
							                        <label for="feedbackMessage" class="form-label fw-bold">Message</label>
							                        <textarea class="form-control" id="feedbackMessage" name="message" rows="4" placeholder="Enter your feedback here..." required></textarea>
							                    </div>
							                    <div class="mb-3">
							                        <label for="feedbackAttachment" class="form-label fw-bold">Attachment (optional)</label>
							                        <input type="file" class="form-control" id="feedbackAttachment" name="attachment" accept=".png, .jpg, .jpeg" multiple>
							                        <small class="text-muted">Max size: 5MB. You can upload multiple images.</small>
							                    </div>
							                    <button type="submit" class="btn btn-primary w-100 mt-3 py-2 shadow-sm" id="submitFeedbackBtn">Submit Feedback</button>
							                </form>
							            </div>
							        </div>
							    </div>
							</div>

							<!-- Asset Request Modal -->
							<div class="modal fade" id="assetRequestModal" tabindex="-1" aria-labelledby="assetRequestModalLabel" aria-hidden="true">
							  <div class="modal-dialog modal-lg"> <!-- or modal-md -->
							    <div class="modal-content">
							      <div class="modal-header">
							        <h5 class="modal-title" id="assetRequestModalLabel">Request Asset</h5>
							        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
							      </div>
							      <div class="modal-body">
							        <form id="assetRequestForm">
							          <input type="hidden" class="form-control" name="empId" th:value="${employee.empid}" readonly>
							          
							          <div class="mb-3">
							            <label>Asset Type:</label>
							            <input type="text" class="form-control" name="assetType" required placeholder="Enter Asset Type">
							          </div>
							
							          <div class="mb-3">
							            <label>Quantity:</label>
							            <input type="number" class="form-control" name="quantity" required placeholder="Enter Quantity">
							          </div>
							
							          <div class="mb-3">
							            <label>Description:</label>
							            <textarea class="form-control" name="description" required placeholder="Enter Description"></textarea>
							          </div>
							
							          <div class="text-center">
							            <button type="submit" class="btn btn-primary">Submit Request</button>
							          </div>
							        </form>
							      </div>
							    </div>
							  </div>
							</div>

  
  
  <!-- Message Display Area -->
		<div id="message" role="alert" style="display: none;" tabindex="0">

           <span id="messageSpan"></span>
           <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
        </div>
  <input type="hidden" id="emp_idSessionValue" th:value="${empDetailsByEmpId.empid}">
     <!-- Display Success Message -->
       <!-- Display Success Message -->
	<div class="alert alert-success alert-dismissible" style="display:none;" role="alert">
	    <span></span>
	    <button type="button" class="btn-close" aria-label="Close"></button>
	</div>
	
	<!-- Display Error Message -->
	<div class="alert alert-danger alert-dismissible" style="display:none;" role="alert">
	    <span></span>
	    <button type="button" class="btn-close" aria-label="Close"></button>
	</div>

    <div class="pagetitle mb-0 d-flex">
      <i class="bi bi-chevron-double-left toggle-sidebar-btn mb-1" onclick="toggleIconRotation()" style="font-size:24px;color:#2F73B9;padding:0 10px;margin-left:-10px;margin-top:-10px;cursor:pointer;"></i>
      <nav>
        <ol class="breadcrumb mb-0">
          <li class="breadcrumb-item"><a th:href="@{/userDashboard}">Home</a></li>
          <li class="breadcrumb-item active">Profile</li>
        </ol>
      </nav>
    </div><!-- End Page Title -->

    <section class="section profile">
    
    <div class="chat-app" style="display: none;">
                <div id="plist" class="people-list">
                        <div class="input-group mb-3">
                                <input type="text" id="searchInputModal" class="form-control" placeholder="Search..."
                                        aria-label="Search">
                                <span class="input-group-text">
                                        <i class="bi bi-search"></i>
                                </span>

                        </div>
                        <ul id="employeeNames" class="list-unstyled chat-list mt-2 mb-0">
                                <!-- Employee names will be dynamically populated here -->
                        </ul>
                </div>

                <div class="chat">
                        <div class="chat-header clearfix">
                                <div class="row w-100">

                                        <!-- Employee Photo and Name Section -->
                                        <div class="col-lg-6 d-flex align-items-center">
                                                <div class="chat-about d-flex align-items-center">
                                                        <img id="employeePhoto" class="employee-photo" src="default-avatar.png"
                                                                alt="Employee Photo" />
                                                        <h6 class="m-b-0 ml-2" id="employeeName">Select an Employee</h6>
                                                </div>
                                        </div>
                                        <!-- Right aligned three dots (Vertical) -->
                                        <div class="col-lg-6 text-right">
                                                <div class="dropdown custom-dropdown">
                                                        <button class="btn btn-outline-secondary" type="button" id="dropdownMenuButton"
                                                                data-bs-toggle="dropdown" aria-expanded="false">
                                                                <i class="fa fa-ellipsis-v"></i>
                                                        </button>
                                                        <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdownMenuButton">
                                                                <li><a class="dropdown-item" href="#">Delete Chat</a></li>
                                                                <li><a class="dropdown-item" href="#">Mute</a></li>
                                                                <li><a class="dropdown-item" href="#">Contact Info</a></li>
                                                        </ul>
                                                </div>
                                        </div>
                                </div>
                        </div>
                        <div id="chat-window" class="chat-history">
                                <ul class="m-b-0">
                                        <!-- Chat messages will be populated here dynamically -->

                                </ul>
                                <div id="message-icon-container" class="message-icon" style="display: none;">

                                        <!-- Plain square message icon SVG (behind) -->
                                        <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
                                                <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g>
                                                <g id="SVGRepo_iconCarrier">
                                                        <path
                                                                d="M10 9H17M10 13H17M7 9H7.01M7 13H7.01M21 20L17.6757 18.3378C17.4237 18.2118 17.2977 18.1488 17.1656 18.1044C17.0484 18.065 16.9277 18.0365 16.8052 18.0193C16.6672 18 16.5263 18 16.2446 18H6.2C5.07989 18 4.51984 18 4.09202 17.782C3.71569 17.5903 3.40973 17.2843 3.21799 16.908C3 16.4802 3 15.9201 3 14.8V7.2C3 6.07989 3 5.51984 3.21799 5.09202C3.40973 4.71569 3.71569 4.40973 4.09202 4.21799C4.51984 4 5.0799 4 6.2 4H17.8C18.9201 4 19.4802 4 19.908 4.21799C20.2843 4.40973 20.5903 4.71569 20.782 5.09202C21 5.51984 21 6.0799 21 7.2V20Z"
                                                                stroke="#94b7db" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path>
                                                </g>
                                        </svg>

                                        <!-- SVG with animation -->
                                        <svg class="animated-icon" viewBox="0 0 374 374" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                <g clip-path="url(#clip0)">
                                                        <path
                                                                d="M318.084 132.622C311.339 101.37 287.642 82 256.652 82C238.423 82 217.459 89.3248 197.954 102.509C191.574 106.904 182.642 106.904 176.079 102.672C155.298 88.9992 135.246 82 116.652 82C85.6626 82 61.9647 101.533 55.2199 133.111C44.2824 183.896 80.923 252.26 187.017 291C292.746 251.446 329.204 183.082 318.084 132.622Z" />
                                                        <path
                                                                d="M187.466 0C187.366 0 187.166 0 186.866 0C85.666 0 3.36603 82.3 3.36603 183.5C3.36603 224.8 17.466 264.9 43.266 297.2L16.566 359.3C14.366 364.4 16.766 370.3 21.766 372.4C23.566 373.2 25.566 373.4 27.466 373.1L125.366 355.9C144.966 363 165.566 366.6 186.366 366.5C287.566 366.5 369.866 284.2 369.866 183C370.066 82.1 288.366 0.1 187.466 0ZM192.966 269.8C188.966 271.3 184.666 271.3 180.666 269.8C149.066 257.1 124.466 238.3 109.466 215.4C95.966 194.7 90.766 171.4 94.866 149.9C100.466 121.4 121.866 102.3 148.266 102.3C160.966 102.3 173.866 106.5 186.766 114.7C199.366 106.5 212.466 102.3 225.066 102.3C251.866 102.3 272.866 120.9 278.466 149.6C286.066 188.8 262.666 241.3 192.966 269.8Z" />
                                                </g>
                                                <defs>
                                                        <clipPath id="clip0">
                                                                <rect width="373.232" height="373.232" fill="white" />
                                                        </clipPath>
                                                </defs>
                                        </svg>



                                        <!-- Dots Animation -->
                                        <div class="dots">
                                                <div class="dot"></div>
                                                <div class="dot"></div>
                                                <div class="dot"></div>
                                        </div>




                                </div>


                        </div>
                        <!-- Move the paragraph outside the chat window -->
                        <p id="logo-text"
                                style="text-align: center; font-size: 14px; color: #6c757d; margin-top: 10px; display: none;">
                                "Reach out to your colleagues and stay on top of your projects with quick, seamless communication."
                        </p>
                        <div class="chat-message clearfix">
                                <div class="custom-input-group mb-0">
                                        <input type="text" id="message" class="custom-form-control" placeholder="Enter your message..." />
                                        <div class="custom-input-group-append">
                                                <button class="custom-send-btn" onclick="sendMessage()">
                                                        <i class="ri ri-send-plane-2-fill"></i>
                                                </button>
                                        </div>
                                </div>

                        </div>
                </div>
        </div>
        <input type="hidden" th:value="${empDetailsByEmpId.email}" id="loggedInMail">
    
    
    <!-- Custom Modal for Inactive Reason -->
<div id="inactiveReasonModal" class="inactiveReasonModal">
    <div class="modal-content2">
        <h5>Reason for Inactive</h5>
        <textarea id="inactiveReasonInput" class="form-control" placeholder="Enter reason for Inactive" rows="3" style="width: 100%; font-size: 14px;"></textarea>
        
        <div class="modal-footer mt-3" style="gap: 10px;">
	        <button class="btn btn-primary" style="font-size: 14px;" id="submitInactiveReasonBtn">Submit</button>
	        <button class="btn btn-secondary" style="font-size: 14px;" id="cancelInactiveReasonBtn">Cancel</button>
	    </div>
    </div>
</div>
    
    
      <div class="row">
        <div class="col-xl-4">

          <div class="card">
            <div class="card-body profile-card pt-4 d-flex flex-column align-items-center">

              <img th:src="@{${employee.profilePicPath}}"  alt="Profile" class="rounded-circle">
              <h2 th:text="${employee.fullName}"></h2>
              <h3 th:text="${employee.roleName}"></h3>	
              <!-- <div class="social-links mt-2">
                <a th:href="${employee.twitter_link}" class="twitter"><i class="bi bi-twitter"></i></a>
                <a href="#" class="facebook"><i class="bi bi-facebook"></i></a>
                <a href="#" class="instagram"><i class="bi bi-instagram"></i></a>
                <a th:href="${employee.linkedin_link}" class="linkedin"><i class="bi bi-linkedin"></i></a>
              </div> -->
            </div>
            <div class="card-body profile-card profile-table pt-1 d-flex flex-column align-items-left" style="font-size:14px;">
			    <table class="table" style="width:100%; table-layout:fixed;">
			        <tbody>
			        	 <tr style="border-top:1px solid #E9EAEC">
			                <th class="col-lg-4 col-md-4 label">Emp Id</th>
			                <td class="col-lg-8 col-md-8" id="profileEmpId" th:text="${employee.empid}"></td>
			            </tr>
			            <tr>
			                <th class="col-lg-4 col-md-4 label">Name</th>
			                <td class="col-lg-8 col-md-8" th:text="${employee.fullName}"></td>
			            </tr>
			            <tr>
			                <th class="col-lg-4 col-md-4 label">Address</th>
			                <td class="col-lg-8 col-md-8" th:text="${employee.corr_address}"></td>
			            </tr>
			            <tr>
			                <th class="col-lg-4 col-md-4 label">Phone</th>
			                <td class="col-lg-8 col-md-8" th:text="${employee.mobileNo}"></td>
			            </tr>
			            <tr>
			                <th class="col-lg-4 col-md-4 label">Email</th>
			                <td class="col-lg-8 col-md-8" th:text="${employee.email}" id="employeeEmail"></td>
			            </tr>
			            <tr th:if="${fetchedEmpNameCount > 0}">
			                <th class="col-lg-4 col-md-4 label">Team Members</th>
			                <td class="col-lg-8 col-md-8" th:text=${fetchedEmpNamesUnderReportingManager}></td>
			            </tr>
			        </tbody>
			    </table>
			</div>

          </div>
          <div class="card">
             
          </div>
        </div>

        <div class="col-xl-8 custom-padding">

          <div class="card">
            <div class="card-body pt-3">
              <!-- Bordered Tabs -->
              <ul class="nav nav-tabs nav-tabs-bordered mb-3">

                <li class="nav-item">
                  <button class="nav-link active" data-bs-toggle="tab" data-bs-target="#profile-overview">Emmergency<br>Contact</button>
                </li>
                <li class="nav-item" th:if="${empDetailsByEmpId.deptId>0}">
                  <button class="nav-link" data-bs-toggle="tab" data-bs-target="#profile-edit">Update</button>
                </li>
                <li class="nav-item" th:if="${empDetailsByEmpId.deptId==0}">
                  <button class="nav-link" data-bs-toggle="tab" data-bs-target="#profile-edit2">Update</button>
                </li>
				<li class="nav-item" th:if="${empDetailsByEmpId.deptId>0}">
                  <button class="nav-link" data-bs-toggle="tab" data-bs-target="#profile-documents" onclick="documentOnlyUploadView();">Documents</button>
                </li>
                <li class="nav-item" th:if="${empDetailsByEmpId.deptId==0}">
                  <button class="nav-link" data-bs-toggle="tab" data-bs-target="#profile-documents2" onclick="documentOnlyUploadView2();">Documents</button>
                </li>
               	<li class="nav-item" th:if="${empDetailsByEmpId.deptId==0}">
                  <button class="nav-link" data-bs-toggle="tab" data-bs-target="#profile-settings">Permission</button>
                </li> 
                <li class="nav-item">
                  <button class="nav-link" data-bs-toggle="tab" data-bs-target="#profile-change-password">Change<br>Password</button>
                </li>
                <li class="nav-item">
                  <button class="nav-link" data-bs-toggle="tab" data-bs-target="#profile-leaveDetails">Leave Details</button>
                </li>
                <li class="nav-item">
                  <button class="nav-link" id="assetsTabBtn" data-bs-toggle="tab" data-bs-target="#profile-assets">Assets</button>
                </li>

              </ul>
              <div class="tab-content pt-2">

               <!--  <div class="tab-pane fade show active profile-overview" id="profile-overview">
                  
                  <h5 class="card-title">About</h5>
                  <p th:text="${employee.primary_emergency_contact_name}">
                  <p th:text="${employee.primary_emergency_contact_number}">
                  <p th:text="${employee.primary_emergency_contact_relation}">
                  
                  <p th:text="${employee.secondary_emergency_contact_name}">
                  <p th:text="${employee.secondary_emergency_contact_number}">
                  <p th:text="${employee.secondary_emergency_contact_relation}">
	
                </div> -->
                
                <div class="tab-pane fade show active profile-overview" id="profile-overview">
                	<div class=" d-flex justify-content-between">
					    <!-- Primary Emergency Contact Card -->
					    <div class="card mb-3 shadow-sm">
					        <div class="card-body">
					            <h6 class="card-subtitle mb-2 text-muted">Primary Contact</h6>
					            <div class="d-flex align-items-center">
					                <i class="bi bi-person-circle me-2 text-primary" style="font-size: 16px;"></i>
					                <p class="mb-1 fw-bold" th:text="${employee.primary_emergency_contact_name}" style="font-size: 14px;"></p>
					            </div>
					            <div class="d-flex align-items-center">
					                <i class="bi bi-telephone-fill me-2 text-primary" style="font-size: 14px;"></i>
					                <p class="mb-1" th:text="${employee.primary_emergency_contact_number}" style="font-size: 14px;"></p>
					            </div>
					            <div class="d-flex align-items-center">
					                <i class="bi bi-people-fill me-2 text-primary" style="font-size: 14px;"></i>
					                <p class="mb-0" th:text="${employee.primary_emergency_contact_relation}" style="font-size: 14px;"></p>
					            </div>
					        </div>
					    </div>
						<hr style="width: 100px; transform: rotate(90deg);">
					    <!-- Secondary Emergency Contact Card -->
					    <div class="card mb-3 shadow-sm" style="width:50%;">
					        <div class="card-body">
					            <h6 class="card-subtitle mb-2 text-muted">Secondary Contact</h6>
					            <div class="d-flex align-items-center">
					                <i class="bi bi-person-circle me-2 text-primary" style="font-size: 16px;"></i>
					                <p class="mb-1 fw-bold" th:text="${employee.secondary_emergency_contact_name}" style="font-size: 14px;"></p>
					            </div>
					            <div class="d-flex align-items-center">
					                <i class="bi bi-telephone-fill me-2 text-primary" style="font-size: 14px;"></i>
					                <p class="mb-1" th:text="${employee.secondary_emergency_contact_number}" style="font-size: 14px;"></p>
					            </div>
					            <div class="d-flex align-items-center">
					                <i class="bi bi-people-fill me-2 text-primary" style="font-size: 14px;"></i> 
					                <p class="mb-0" th:text="${employee.secondary_emergency_contact_relation}" style="font-size: 14px;"></p>
					            </div>
					        </div>
					    </div>
				    </div>
				</div>

                <div class="tab-pane fade profile-edit pt-3" id="profile-edit">

                  <!-- Profile Edit Form -->
                   <form class="updateEmployeeForm updateEmployeeFormWithValidation"
								th:action="@{/updateEmployee}" method="post"
								enctype="multipart/form-data" id="editForm"  onsubmit="return validatePAN()">
								<div class="row jumbotron box8">
								
								 <!-- <div class="row mb-3"> 
				                      <label for="profileImage" class="col-md-4 col-lg-3 col-form-label">Profile Image</label>
				                      <div class="col-md-8 col-lg-9">
				                        <img src="assets/img/profile-img.jpg" alt="Profile">
				                        <div class="pt-2">
				                          <a href="#" class="btn btn-primary btn-sm" title="Upload new profile image"><i class="bi bi-upload"></i></a>
				                          <a href="#" class="btn btn-danger btn-sm" title="Remove my profile image"><i class="bi bi-trash"></i></a>
				                        </div>
				                      </div>
				                    </div> -->
				                    
									<div class="col-sm-4 form-group mb-4">
										<label for="empId">Employee ID</label>
									    <input type="text" class="form-control custom_textfield"
									           name="empId" id="empId" placeholder=" " 
									           th:value="${employee.empid}" readonly required>									    
									    <span id="empId_error"></span>
									</div>
									
									<div class="col-sm-4 form-group mb-4 select-container">
									    <label for="deptId">Department</label>
									    <span id="dept_error"></span>
									    <select class="form-control custom-select browser-default custom_selectfield"
									            name="deptId" id="deptId" required
									            onchange="fetchDesignations(this.value)" th:disabled="${!permissions.doc_upload && empDetailsByEmpId.deptId > 0}">
									        <option th:value="${employee.deptId}" th:text="${employee.deptName}" selected></option>
									        <option th:each="dept : ${departments}" th:value="${dept.dept_id}" th:text="${dept.deptName}"></option>
									    </select> 
									</div>
									
									<div class="col-sm-4 form-group mb-4 select-container">
									    <label for="roleId">Designation</label>
									    <span id="designation_error"></span>
									    <select class="form-control custom-select browser-default custom_selectfield"
									            name="roleId" id="roleId" required
									            onchange="toggleReportingManager(document.getElementById('designation').value);" th:disabled="${!permissions.doc_upload  && empDetailsByEmpId.deptId > 0}">
									        <option th:value="${employee.roleId}" th:text="${employee.roleName}" selected>Select Designation</option>
									    </select> 	 								    
									</div>
									
									<div class="col-sm-6 form-group mb-4">
									 	<label for="first_name">First Name</label>
									    <span id="firstName_error"></span>
									    <input type="text" class="form-control custom_textfield"
									             name="firstName" id="first_name"
									           placeholder=" " th:value="${employee.fName}" required
									           th:readonly="${!permissions.doc_upload  && empDetailsByEmpId.deptId > 0}">
									</div>
									
									<div class="col-sm-6 form-group mb-4">
									    <label for="last_name">Last Name</label>
									    <span id="lastName_error"></span>
									    <input type="text" class="form-control custom_textfield"
									           name="lastName" id="last_name"
									           placeholder=" " th:value="${employee.lName}"
									           th:readonly="${!permissions.doc_upload  && empDetailsByEmpId.deptId > 0}">						    
									</div>
									
									<div class="col-sm-6 form-group mb-4">
									    <label for="email">Email</label>
									    <span id="email_error"></span>
									    <input type="email" class="form-control custom_emailfield"
									           name="email" id="email" placeholder=" " th:value="${employee.email}" required readonly>									   
									</div>
									
									<div class="col-sm-6 form-group mb-4">
										<label for="mobile_no">Mobile No</label>
									    <span id="mobile_error"></span>
									    <input type="text" class="form-control custom_textfield"
									           maxlength="10" name="mobileNo" id="mobile_no"
									           placeholder=" " th:value="${employee.mobileNo}" required pattern="\d{10}"
									           th:readonly="${!permissions.doc_upload && empDetailsByEmpId.deptId > 0}">									    
									</div>
									
									<div class="col-sm-12 form-group mb-4"> 
									    <label for="address">Permanent Address</label>
									    <span id="address_error"></span>
									    <textarea class="form-control" name="address"
									              id="address" rows="3"
									              placeholder=" " th:text="${employee.address}" required
									              th:readonly="${!permissions.doc_upload && empDetailsByEmpId.deptId > 0}"></textarea>
									</div>
									
									<div class="col-sm-6 form-group mb-4">
									    <label for="dob">Date Of Birth (dd-mm-yyyy)</label>
									    <span id="dob_error"></span>
									    <input type="date" name="dob" class="form-control custom_date" id="dob" placeholder=" " th:value="${employee.dob}" required
									    th:readonly="${!permissions.doc_upload  && empDetailsByEmpId.deptId > 0}">									    
									</div>
									
									<div class="col-sm-6 form-group mb-4">
									    <label for="doj">Date Of Joining (dd-mm-yyyy)</label>
									    <span id="doj_error"></span>
									    <input type="date" name="doj" class="form-control custom_date"
									           id="doj" placeholder=" " th:value="${employee.doj}" required
									           th:readonly="${!permissions.doc_upload && empDetailsByEmpId.deptId > 0}">									   
									</div>
									
									<div class="col-sm-6 form-group mb-4">
									    <label for="aadhar">Aadhar No</label>
									    <span id="aadhar_error"></span>
									    <input type="text" class="form-control custom_textfield"
									           maxlength="12"  pattern="\d{12}" name="adharNo" id="aadhar"
									           placeholder=" " th:value="${employee.adharNo}"
									           th:readonly="${!permissions.doc_upload && empDetailsByEmpId.deptId > 0}"
									          oninput="this.value = this.value.replace(/[^0-9]/g, '');" onblur="validateAadhar()">
									</div>
									
									<div class="col-sm-6 form-group mb-4">
									    <label for="pan">PAN No</label>
									    <span id="pan_error"></span>
									    <input type="text" class="form-control custom_textfield" maxlength="10"  
									           name="panCard" id="pan" placeholder=" " th:value="${employee.panCard}"
									           th:readonly="${!permissions.doc_upload && empDetailsByEmpId.deptId > 0}"								   
											   oninput="this.value = this.value.toUpperCase().replace(/[^A-Z0-9]/g, '');"
											   pattern="[a-zA-Z]{5}[0-9]{4}[a-zA-Z]{1}"
									           onblur="validatePAN()">
									</div>
									
									<div class="col-sm-6 form-group mb-4 ">
									    <label for="gender">Gender</label>
									    <span id="gender_error"></span>
									    <select class="form-control  browser-default custom_selectfield"
									            name="gender" id="gender" required
									            th:disabled="${!permissions.doc_upload && empDetailsByEmpId.deptId > 0}">
									        <option value="" disabled selected>Select gender</option>
									        <option value="Male" th:selected="${employee.gender == 'Male'}">Male</option>
									        <option value="Female" th:selected="${employee.gender == 'Female'}">Female</option>
									        <option value="Other" th:selected="${employee.gender == 'Other'}">Other</option>
									    </select>									    
									</div>
									
									<div class="col-sm-6 form-group mb-4">
									    						   
									</div>
									
									<label>Primary Contact</label><hr>
									<div class="col-sm-6 form-group mb-4">
									    <label for="primary_emergency_contact_name">Contact Name</label>
									    <span id="primary_emergency_contact_name"></span>
									    <input type="text" class="form-control custom_textfield"
									           name="primary_emergency_contact_name" id="primary_emergency_contact_name" placeholder=" " th:value="${employee.primary_emergency_contact_name}"
									           th:readonly="${!permissions.doc_upload && empDetailsByEmpId.deptId > 0}">									   
									</div>
									<div class="col-sm-6 form-group mb-4">
									    <label for="primary_emergency_contact_number">Contact No</label>
									    <!-- <span id="primary_emergency_contact_number"></span> -->
									    <span id="primary_emergency_contact_number_error"></span>
									    <input type="text" class="form-control custom_textfield"
									           maxlength="10"  pattern="\d{10}"
									           name="primary_emergency_contact_number" id="primary_emergency_contact_number"
									           placeholder=" " th:value="${employee.primary_emergency_contact_number}"
									           th:readonly="${!permissions.doc_upload && empDetailsByEmpId.deptId > 0}"
									           oninput="this.value = this.value.replace(/[^0-9]/g, '');"
          									   onblur="validatePrimaryContactMobile()">								   
									</div>
									<div class="col-sm-6 form-group mb-4">
									    <label for="primary_emergency_contact_relation">Relation</label>
									    <span id="primary_emergency_contact_relation"></span>
									    <input type="text" class="form-control custom_textfield"
									           name="primary_emergency_contact_relation" id="primary_emergency_contact_relation" placeholder=" " th:value="${employee.primary_emergency_contact_relation}"
									           th:readonly="${!permissions.doc_upload && empDetailsByEmpId.deptId > 0}">									   
									</div>
									<label>Secondary Contact</label><hr>
									<div class="col-sm-6 form-group mb-4">
									    <label for="secondary_emergency_contact_name">Contact Name</label>
									    <span id="secondary_emergency_contact_name"></span>
									    <input type="text" class="form-control custom_textfield"
									           name="secondary_emergency_contact_name" id="secondary_emergency_contact_name" placeholder=" " th:value="${employee.secondary_emergency_contact_name}"
									           th:readonly="${!permissions.doc_upload && empDetailsByEmpId.deptId > 0}">									   
									</div>
									<div class="col-sm-6 form-group mb-4">
									    <label for="secondary_emergency_contact_number">Contact No</label>
									    <!-- <span id="secondary_emergency_contact_number"></span> -->
									     <span id="secondary_emergency_contact_number_error"></span>
									    <input type="text" class="form-control custom_textfield"
									           maxlength="10" pattern="\d{10}"
									           name="secondary_emergency_contact_number" id="secondary_emergency_contact_number" placeholder=" " th:value="${employee.secondary_emergency_contact_number}"
									           th:readonly="${!permissions.doc_upload && empDetailsByEmpId.deptId > 0}"
									           oninput="this.value = this.value.replace(/[^0-9]/g, '');"
          									   onblur="validatePrimaryContactMobile()">										   
									</div>
									<div class="col-sm-6 form-group mb-4">
									    <label for="pan">Relation</label>
									    <span id="secondary_emergency_contact_relation"></span>
									    <input type="text" class="form-control custom_textfield"
									           name="secondary_emergency_contact_relation" id="secondary_emergency_contact_relation" placeholder=" " th:value="${employee.secondary_emergency_contact_relation}"
									           th:readonly="${!permissions.doc_upload && empDetailsByEmpId.deptId > 0}">									   
									</div>
									<!-- <div class="col-sm-6 form-group mb-4 custom-field">
									    <input type="text" name="password"
									           class="form-control custom_passwordfield" id="pass1"
									           placeholder=" " th:value="${employee.password}" required>
									    <label for="pass1">Password</label>
									    <span id="password_error"></span>
									</div> -->

									<!-- <div class="col-sm-3 form-group photo_div mb-4">
										<label for="Date">Profile Pic (Png/Jpg)</label> <input
											type="file" id="photo" class="form-control custom_textfield"
											name="profilePic" required>
									</div>
									<div class="col-sm-3 form-group photo_div mb-4">
										<label for="Date">Pancard document (Png/Jpg)</label> <input
											type="file" id="panDoc" class="form-control custom_textfield"
											name="panPic" required>
									</div> -->
									<div class="col-sm-12 form-group mb-0 customize_btn_div mb-4 text-end">
										<button type="submit" class="btn btn-primary" id="submitBtn"  th:if="${permissions.doc_upload or empDetailsByEmpId.deptId == 0}" >Update</button>
										<button type="reset" class="btn btn-secondary" th:if="${permissions.doc_upload or empDetailsByEmpId.deptId == 0}">Clear</button>
									</div>
								</div>
							</form><!-- End Profile Edit Form -->
                </div>
                
                <div class="tab-pane fade show profile-edit pt-3" id="profile-edit2">

                  <!-- Profile Edit Form -->
                   <form class="updateEmployeeForm updateEmployeeFormWithValidation"
								th:action="@{/updateEmployee}" method="post"
								enctype="multipart/form-data" onsubmit="showLoadingPopup()" id="updateEmployeeForm">
								<div class="row jumbotron box8">
									<div class="row mb-3">
				                      <label for="profileImage" class="col-md-4 col-lg-3 col-form-label">Profile Image</label>
				                      <div class="col-md-8 col-lg-9">
				                        <img th:src="@{${employee.profilePicPath}}" alt="Profile">
				                        <div class="pt-2" style="display: flex; align-items: center; gap: 4px;">
									      <div class="employee_type_btn_div">
									    	<button type="button" onclick="setEmployeeTypeStatus('active');" class="btn btn-outline-primary activeBtn">Active</button>
									    	<button type="button" onclick="setEmployeeTypeStatus('inactive');" class="btn btn-outline-danger inActiveBtn">In-active</button>
									      </div>
									      <!-- <a href="#" class="btn btn-primary btn-sm" title="Upload new profile image"><i class="bi bi-upload"></i></a> -->
				                         <!--  <a href="#" class="btn btn-outline-danger btn-sm" title="Remove my profile image"><i class="bi bi-trash"></i></a> -->
				                        </div>
				                      </div>
				                    </div>
				                    
				                    <div class="mb-4" style="padding: 5px 25px;">
										<div class="row jumbotron box8 border" style="padding: 10px 0; border-radius: 10px; font-size: 14px;">
											<div class="col-sm-3 form-group mb-4">
											<label class="customLabel" for="empId">Employee ID<span>*</span></label>
											    <input type="text" class="form-control custom_textfield"
											           name="empId" id="empId" placeholder=" " 
											           th:value="${employee.empid}" readonly required>
											    <span id="empId_error"></span>
											</div>
											
											<div class="col-sm-3 form-group mb-4">
											<label class="customLabel">Employee Type<span>*</span></label>
											    <select style="font-size: 14px;"
											        class="form-select custom-select browser-default custom_selectfield"
											        name="usertype" id="usertype" required>
											        <option th:value="${employee.usertype}" th:text="${employee.usertype}"></option>
											        <option value="Admin">Admin</option>
											        <option value="User">User</option>
											        <option value="HR">HR</option>
											    </select> 
											    <span id="userType_error"></span>
											</div>
											
											<div class="col-sm-3 form-group mb-4 select-container">
											<label class="customLabel" for="deptId">Department<span>*</span></label>
											    <select class="form-select custom-select browser-default custom_selectfield"
											     name="deptId" id="deptId" required onchange="fetchDesignations(this.value)">
											        <option th:value="${employee.deptId}" th:text="${employee.deptName}" selected></option>
											        <option th:each="dept : ${departments}" th:value="${dept.dept_id}" th:text="${dept.deptName}"></option>
											    </select> 
											    <span id="dept_error"></span>
											</div>
											
											<div class="col-sm-3 form-group mb-4 select-container">
											<label for="deptId">Sub Department</label>
												<select style="font-size: 14px;"
													class="form-select custom-select browser-default"
													 name="sub_dept_name" id="sub_dept_name">
													<option th:value="${employee.sub_dept_name}" th:text="${employee.sub_dept_name}" selected></option>
												</select> 
												<span id="subDept_error"></span>
											</div>
		
											<div class="col-sm-4 form-group mb-4 select-container">
											<label class="customLabel" for="roleId">Designation<span>*</span></label>
											    <select class="form-control custom-select browser-default custom_selectfield"
											            name="roleId" id="roleId" required
											            onchange="toggleReportingManager(document.getElementById('designation').value);">
											        <option th:value="${employee.roleId}" th:text="${employee.roleName}" selected>Select Designation</option>
											    </select> 
											    <span id="designation_error"></span>
											</div>
											
											<div class="col-sm-4 form-group mb-4 select-container">
											<label class="customLabel">Select Reporting Manager-1</label>
												<select style="font-size: 14px;"
													class="form-select custom-select browser-default custom_selectfield"
													name="team_lead_name" id="team_lead_name">
													<option value="">Select Reporting Manager-1</option>
													<option th:value="${employee.team_lead}" th:text="${employee.teamLeadFetchedName}" selected></option>
													<option th:each="data : ${empNamesAndEmpIdLists}" th:value="${data.empid}" th:text="${data.team_lead_name}"></option>
												</select> 
												<span id="teamLead_error"></span>
											</div>
											
											<div class="col-sm-4 form-group mb-4 select-container">
											<label class="customLabel">Select Reporting Manager-2</label>
												<select style="font-size: 14px;"
													class="form-select custom-select browser-default custom_selectfield"
													name="team_co_name" id="team_co_name">
													<option value="">Select Reporting Manager-2</option>
													<option th:value="${employee.team_coordinator}" th:text="${employee.teamCoFetchedName}" selected></option>
													<option th:each="data : ${empNamesAndEmpIdLists}" th:value="${data.empid}" th:text="${data.team_lead_name}"></option>
												</select> 
												<span id="teamco_error"></span>
											</div>
											
											<div class="col-sm-6 form-group mb-4">
											<label class="customLabel" for="first_name">First Name<span>*</span></label>
											    <input type="text" class="form-control custom_textfield"
											           maxlength="20" name="firstName" id="first_name"
											           placeholder=" " th:value="${employee.fName}" required>
											    <span id="firstName_error"></span>
											</div>
											
											<div class="col-sm-6 form-group mb-4">
											<label for="last_name">Last Name</label>
											    <input type="text" class="form-control custom_textfield"
											           maxlength="10" name="lastName" id="last_name"
											           placeholder=" " th:value="${employee.lName}">
											    <span id="lastName_error"></span>
											</div>
											
											<div class="col-sm-6 form-group mb-4">
											<label class="customLabel" for="email">Official Email<span>*</span></label>
											    <input type="email" class="form-control custom_emailfield"
											           name="email" id="email" placeholder=" " th:value="${employee.email}" required>
											    <span id="email_error"></span>
											</div>
											
											<div class="col-sm-6 form-group mb-4">
											<label for="mobile_no">Mobile No</label>
											    <input type="text" class="form-control custom_textfield"
											           maxlength="10" name="mobileNo" id="mobile_no"
											           placeholder=" " th:value="${employee.mobileNo}">
											    <span id="mobile_error"></span>
											</div>
											
											<div class="col-sm-6 form-group mb-4">
											<label for="corr_address">Current Address</label>
											    <textarea class="form-control" name="corr_address"
											              id="corr_address" rows="3"
											       placeholder=" " th:text="${employee.corr_address != null ? employee.corr_address : ''}"></textarea>
											    <span id="corr_address_error"></span>
											</div>
											
											<div class="col-sm-6 form-group mb-4">
											<label class="customLabel" for="address">Permanent Address<span>*</span></label>
											    <textarea class="form-control" name="address"
											              id="address" rows="3"
											              placeholder=" " th:text="${employee.address != null ? employee.address : ''}" required></textarea>
											    <span id="address_error"></span>
											</div>
											
											<div class="col-sm-4 form-group mb-4">
											<label>Personal Mail-id</label>
											    <input type="text" class="form-control custom_textfield"
											            name="personal_email" id="personal_email"
											           placeholder=" " th:value="${employee.personal_email != null ? employee.personal_email : ''}">
											    <span id="personal_mailId_error"></span>
											</div>
											
											<div class="col-sm-4 form-group mb-4">
											<label>Father Name</label>
											    <input type="text" class="form-control custom_textfield"
											           name="father_name" id="father_name"
											           placeholder=" " th:value="${employee.father_name != null ? employee.father_name : ''}">
											    <span id="fatherName_error"></span>
											</div>
											
											<div class="col-sm-4 form-group mb-4">
											<label>Mother Name</label>
											    <input type="text" class="form-control custom_textfield"
											           maxlength="20" name="mother_name" id="mother_name"
											           placeholder=" " th:value="${employee.mother_name != null ? employee.mother_name : ''}">
											    <span id="motherName_error"></span>
											</div>
											
											<div class="col-sm-6 form-group mb-4">
											<label class="customLabel" for="dob">Actual Date Of Birth<span>*</span></label>
											    <input type="date" name="dob" class="form-control custom_date"
											           id="dob" placeholder=" " th:value="${employee.dob}" required>
											    <span id="dob_error"></span>
											</div>
											
											<div class="col-sm-6 form-group mb-4">
											<label class="customLabel" for="officialDob">Official Date Of Birth</label>
											    <input type="date" name="official_dob" class="form-control custom_date"
											           id="officialDob" placeholder=" " th:value="${employee.official_dob}">
											</div>
											
											<div class="col-sm-6 form-group mb-4">
											<label class="customLabel" for="doj">Date Of Joining<span>*</span></label>
											    <input type="date" name="doj" class="form-control custom_date" onchange="filterProbationPeriodDays();"
											           id="doj2" placeholder=" " th:value="${employee.doj}" required>
											    <span id="doj_error"></span>
											</div>
											
											<div class="col-sm-6 form-group mb-4">
											<label class="customLabel" for="doj">Probation Completed Date<span>*</span></label>
												<input type="date" name="probation_completed_date" class="form-control custom_date" onchange="filterProbationPeriodDays();"
													id="probation_completed_date" th:value="${employee.probation_completed_date}" required> 
												<span id="probation_completed_date_error"></span>
												<span class="text-primary" id="probation_period_in_days"></span>
											</div>
											<div class="col-sm-4 form-group mb-4 select-container">
											<label class="customLabel">Select Blood Group</label>
												<select style="font-size: 14px;"
													class="form-select custom-select browser-default custom_selectfield"
													name="blood_group" id="blood_group">
													<option th:value="${employee.blood_group}" th:text="${employee.blood_group}" selected></option>
													<option value="A+">A+</option>
													<option value="A1+">A1+</option>
													<option value="A2+">A2+</option>
													<option value="A1B+">A1B+</option>
													<option value="A2B+">A2B+</option>
													<option value="A-">A-</option>
													<option value="A1-">A1-</option>
													<option value="A2-">A2-</option>
													<option value="A1B-">A1B-</option>
													<option value="A2B-">A2B-</option>
													<option value="B+">B+</option>
													<option value="B-">B-</option>
													<option value="O+">O+</option>
													<option value="O-">O-</option>
													<option value="AB+">AB+</option>
													<option value="AB-">AB-</option>
												</select> 
												<span id="blood_group_error"></span>
											</div>
											<div class="col-sm-4 form-group mb-4">
											<label for="aadhar">Aadhar No</label>
											    <input type="text" class="form-control custom_textfield"
											           maxlength="12" name="adharNo" id="aadhar"
											           placeholder=" " th:value="${employee.adharNo}">
											    <span id="aadhar_error"></span>
											</div>
											
											<div class="col-sm-4 form-group mb-4">
											<label for="pan">PAN No</label>
											    <input type="text" class="form-control custom_textfield"
											           name="panCard" id="pan" placeholder=" " th:value="${employee.panCard}">
											    <span id="pan_error"></span>
											</div>
											
											<div class="col-sm-6 form-group mb-4">
											<label for="doj">Alternate Saturday Leaves Effect From</label>
											    <input type="date" name="alternativeSaturdayEffectiveFrom" class="form-control custom_date"
											           id="alternative_saturday_effective_from" placeholder=" " 
											           th:value="${employee.alternative_saturday_effective_from}">
											    <span id="alternative_saturday_effective_from_error"></span>
											</div>
											
											<div class="col-sm-3 form-group mb-4 select-container">
											<label class="customLabel" for="gender">Gender<span>*</span></label>
											    <select class="form-control custom-select browser-default custom_selectfield"
											            name="gender" id="gender" required>
											        <option th:value="${employee.gender}" th:text="${employee.gender}" selected></option>
											        <option value="Male">Male</option>
											        <option value="Female">Female</option>
											        <option value="Other">Other</option>
											    </select>
											    <span id="gender_error"></span>
											</div>
											
											<div class="col-sm-3 form-group mb-4">
											<label class="customLabel" for="pass1">Password<span>*</span></label>
											    <input type="text" name="password"
											           class="form-control custom_passwordfield" id="pass1"
											           placeholder=" " th:value="${employee.password}" required>
											    <span id="password_error"></span>
											</div>
											
											<div class="col-sm-4 form-group mb-4">
											<label for="primary_emergency_contact_name">Primary Contact(Name)</label>
											    <input type="text" class="form-control custom_textfield"
											           name="primary_emergency_contact_name" id="primary_emergency_contact_name" th:value="${employee.primary_emergency_contact_name}">
											    <span id="primary_emergency_contact_name_error"></span>
											</div>
											
											<div class="col-sm-4 form-group mb-4">
											<label for="primary_emergency_contact_relation">Primary Contact(Relation)</label>
											    <input type="text" class="form-control custom_textfield"
											           name="primary_emergency_contact_relation" id="primary_emergency_contact_relation" th:value="${employee.primary_emergency_contact_relation}">
											    <span id="primary_emergency_contact_relation_error"></span>
											</div>
											
											<div class="col-sm-4 form-group mb-4">
											<label for="primary_emergency_contact_number">Primary Contact(Ph Num)</label>
											    <input type="text" class="form-control custom_textfield"
											           name="primary_emergency_contact_number" id="primary_emergency_contact_number" th:value="${employee.primary_emergency_contact_number}">
											    <span id="primary_emergency_contact_number_error"></span>
											</div>
											
											
											<div class="col-sm-4 form-group mb-4">
											<label for="secondary_emergency_contact_name">Secondary Contact(Name)</label>
											    <input type="text" class="form-control custom_textfield"
											           name="secondary_emergency_contact_name" id="secondary_emergency_contact_name" th:value="${employee.secondary_emergency_contact_name}">
											    <span id="secondary_emergency_contact_name_error"></span>
											</div>
											
											<div class="col-sm-4 form-group mb-4">
											<label for="secondary_emergency_contact_relation">Secondary Contact(Relation)</label>
											    <input type="text" class="form-control custom_textfield"
											           name="secondary_emergency_contact_relation" id="secondary_emergency_contact_relation" th:value="${employee.secondary_emergency_contact_relation}">
											    <span id="secondary_emergency_contact_relation_error"></span>
											</div>
											
											<div class="col-sm-4 form-group mb-4">
											<label for="secondary_emergency_contact_number">Secondary Contact(Ph Num)</label>
											    <input type="text" class="form-control custom_textfield"
											           name="secondary_emergency_contact_number" id="secondary_emergency_contact_number" th:value="${employee.secondary_emergency_contact_number}">
											    <span id="secondary_emergency_contact_number_error"></span>
											</div>
											
										</div>
									</div>
									
									<div class="mb-4" style="padding: 5px 25px;">
										<div class="row jumbotron box8 border" style="padding: 10px 0; border-radius: 10px; font-size:14px;">
											<div class="col-sm-4 form-group mb-4 select-container">
											<label>Qualification-1</label>
											    <select class="form-control custom-select browser-default custom_selectfield"
											            name="qualification_tenth" id="qualification_tenth">
											           <option value=""></option>
								                       <option value="10th" selected>10th</option>
								                       <option value="PUC">PUC</option>
								                       <option value="UG">UG</option>
								                       <option value="PG">PG</option>
								                       <option value="Other">Other</option>
											    </select> 
											    <span id="tenth_qualification_error"></span>
											</div>
		
											<div class="col-sm-4 form-group mb-4">
											<label>10th(School Name)</label>
											    <input type="text" class="form-control custom_textfield"
											            name="tenth_school_name" id="tenth_school_name"
											           placeholder=" " th:value="${employee.tenth_school_name != null and employee.tenth_school_name != '' ? employee.tenth_school_name : ''}">
											    <span id="tenth_schoolName_error"></span>
											</div>
											
											<div class="col-sm-4 form-group mb-4">
											<label>10th(Board)</label>
											    <input type="text" class="form-control custom_textfield"
											           name="tenth_board_name" id="tenth_board_name"
											           placeholder=" " th:value="${employee.tenth_board_name != null and employee.tenth_board_name != '' ? employee.tenth_board_name : ''}">
											    <span id="tenth_boardName_error"></span>
											</div>
											
											<div class="col-sm-6 form-group">
											<label>10th(Percentage)</label>
											    <input type="number" class="form-control custom_textfield" min="0.00" step="0.01"
											           name="tenth_percentage" id="tenth_percentage"
											           placeholder=" " th:value="${employee.tenth_percentage != null and employee.tenth_percentage != '' ? employee.tenth_percentage : 0}">
											    <span id="tenth_percentage_error"></span>
											</div>
											
											<div class="col-sm-6 form-group">
											<label>10th(Completed Date)</label>
											    <input type="month" class="form-control custom_textfield"
											           name="tenth_completed_date" id="tenth_completed_date"
											           placeholder=" " th:value="${employee.tenth_completed_date != null and employee.tenth_completed_date != '' ? employee.tenth_completed_date : ''}">
											    <span id="tenth_completed_error"></span>
											</div>
										</div>
									</div>
									
									<div class="mb-4" style="padding: 5px 25px;">
										<div class="row jumbotron box8 border" style="padding: 10px 0; border-radius: 10px; font-size:14px;">
											<div class="col-sm-4 form-group mb-4 select-container">
											<label>Qualification-2</label>
											    <select class="form-control custom-select browser-default custom_selectfield"
											            name="qualification_puc" id="qualification_puc">
											           <option value=""></option>
								                       <option value="10th">10th</option>
								                       <option value="PUC" selected>PUC</option>
								                       <option value="UG">UG</option>
								                       <option value="PG">PG</option>
								                       <option value="Other">Other</option>
											    </select> 
											   <span id="puc_qualification_error"></span>
											</div>
		
											<div class="col-sm-4 form-group mb-4">
											<label>PUC(College Name)</label>
											    <input type="text" class="form-control custom_textfield"
											            name="puc_college_name" id="puc_college_name"
											           placeholder=" " th:value="${employee.puc_college_name != null and employee.puc_college_name != '' ? employee.puc_college_name : ''}">
											    <span id="puc_collegeName_error"></span>
											</div>
											
											<div class="col-sm-4 form-group mb-4">
											<label>PUC(Board)</label>
											    <input type="text" class="form-control custom_textfield"
											           name="puc_board_name" id="puc_board_name"
											           placeholder=" " th:value="${employee.puc_board_name != null and employee.puc_board_name != '' ? employee.puc_board_name : ''}">
											    <span id="puc_boardName_error"></span>
											</div>
											
											<div class="col-sm-6 form-group">
											<label>PUC(Percentage)</label>
											    <input type="number" class="form-control custom_textfield" min="0.00" step="0.01"
											           name="puc_percentage" id="puc_percentage"
											           placeholder=" " th:value="${employee.puc_percentage != null and employee.puc_percentage != '' ? employee.puc_percentage : 0}">
											    <span id="puc_percentage_error"></span>
											</div>
											
											<div class="col-sm-6 form-group">
											<label>PUC(Completed Date)</label>
											    <input type="month" class="form-control custom_textfield"
											           name="puc_completed_date" id="puc_completed_date"
											           placeholder=" " th:value="${employee.puc_completed_date != null and employee.puc_completed_date != '' ? employee.puc_completed_date : ''}">
											    <span id="puc_completed_error"></span>
											</div>
										</div>
									</div>
									
									<div class="mb-4" style="padding: 5px 25px;">
										<div class="row jumbotron box8 border" style="padding: 10px 0; border-radius: 10px; font-size:14px;">
											<div class="col-sm-3 form-group mb-4 select-container">
											<label>Qualification-3</label>
											    <select class="form-control custom-select browser-default custom_selectfield"
											            name="qualification_ug" id="qualification_ug">
											           <option value=""></option>
								                       <option value="10th">10th</option>
								                       <option value="PUC">PUC</option>
								                       <option value="UG" selected>UG</option>
								                       <option value="PG">PG</option>
								                       <option value="Other">Other</option>
											    </select> 
											   <span id="ug_qualification_error"></span>
											</div>
		
											<div class="col-sm-3 form-group mb-4">
											<label>UG(College Name)</label>
											    <input type="text" class="form-control custom_textfield"
											            name="ug_college_name" id="ug_college_name"
											           placeholder=" " th:value="${employee.ug_college_name != null and employee.ug_college_name != '' ? employee.ug_college_name : ''}">
											    <span id="ug_collegeName_error"></span>
											</div>
											
											<div class="col-sm-3 form-group mb-4">
											<label>UG(Degree Name)</label>
											    <input type="text" class="form-control custom_textfield"
											            name="ug_degree_name" id="ug_degree_name"
											           placeholder=" " th:value="${employee.ug_degree_name != null and employee.ug_degree_name != '' ? employee.ug_degree_name : ''}">
											    <span id="ug_degreeName_error"></span>
											</div>
											
											<div class="col-sm-3 form-group mb-4">
											<label>UG(Type)</label>
											    <select class="form-select custom-select browser-default custom_selectfield"
											            name="ug_type" id="ug_type">
											           <option th:text="${employee.ug_type != null and employee.ug_type != '' ? employee.ug_type : ' '}"></option>
								                       <option value="Regular">Regular</option>
								                       <option value="Lateral">Lateral</option>
								                       <option value="Part-time">Part-time</option>
											    </select>
											    <span id="ug_type_error"></span>
											</div>
											
											<div class="col-sm-4 form-group">
											<label>UG(University Name)</label>
											    <input type="text" class="form-control custom_textfield"
											            name="ug_university_name" id="ug_university_name"
											           placeholder=" " th:value="${employee.ug_university_name != null and employee.ug_university_name != '' ? employee.ug_university_name : ''}">
											    <span id="ug_universityName_error"></span>
											</div>
											
											<div class="col-sm-4 form-group">
											<label>UG(Percentage)</label>
											    <input type="number" class="form-control custom_textfield" min="0.00" step="0.01"
											           name="ug_percentage" id="ug_percentage"
											           placeholder=" " th:value="${employee.ug_percentage != null and employee.ug_percentage != '' ? employee.ug_percentage : 0}">
											    <span id="ug_percentage_error"></span>
											</div>
											
											<div class="col-sm-4 form-group">
											<label>UG(Completed Date)</label>
											    <input type="month" class="form-control custom_textfield"
											           name="ug_completed_date" id="ug_completed_date"
											           placeholder=" " th:value="${employee.ug_completed_date != null and employee.ug_completed_date != '' ? employee.ug_completed_date : ''}">
											    <span id="ug_completed_error"></span>
											</div>
										</div>
									</div>
									
									<div class="mb-4" style="padding: 5px 25px;">
										<div class="row jumbotron box8 border" style="padding: 10px 0; border-radius: 10px; font-size:14px;">
											<div class="col-sm-3 form-group mb-4 select-container">
											<label>Qualification-4</label>
											    <select class="form-control custom-select browser-default custom_selectfield"
											            name="qualification_pg" id="qualification_pg">
											           <option value=""></option>
								                       <option value="10th">10th</option>
								                       <option value="PUC">PUC</option>
								                       <option value="UG">UG</option>
								                       <option value="PG" selected>PG</option>
								                       <option value="Other">Other</option>
											    </select> 
											   <span id="pg_qualification_error"></span>
											</div>
		
											<div class="col-sm-3 form-group mb-4">
											<label>PG(College Name)</label>
											    <input type="text" class="form-control custom_textfield"
											            name="pg_college_name" id="pg_college_name"
											           placeholder=" " th:value="${employee.pg_college_name != null and employee.pg_college_name != '' ? employee.pg_college_name : ''}">
											    <span id="pg_collegeName_error"></span>
											</div>
											
											<div class="col-sm-3 form-group mb-4">
											<label>PG(Degree Name)</label>
											    <input type="text" class="form-control custom_textfield"
											            name="pg_degree_name" id="pg_degree_name"
											           placeholder=" " th:value="${employee.pg_degree_name != null and employee.pg_degree_name != '' ? employee.pg_degree_name : ''}">
											    <span id="pg_degreeName_error"></span>
											</div>
											
											<div class="col-sm-3 form-group mb-4">
											<label>PG(Type)</label>
											    <select class="form-select custom-select browser-default custom_selectfield"
											            name="pg_type" id="pg_type">
											           <option th:text="${employee.pg_type != null and employee.pg_type != '' ? employee.pg_type : ' '}"></option>
								                       <option value="Regular">Regular</option>
								                       <option value="Lateral">Lateral</option>
								                       <option value="Part-time">Part-time</option>
											    </select>
											    <span id="pg_type_error"></span>
											</div>
											
											<div class="col-sm-4 form-group">
											<label>PG(University Name)</label>
											    <input type="text" class="form-control custom_textfield"
											            name="pg_university_name" id="pg_university_name"
											           placeholder=" " th:value="${employee.pg_university_name != null and employee.pg_university_name != '' ? employee.pg_university_name : ''}">
											    <span id="pg_universityName_error"></span>
											</div>
											
											<div class="col-sm-4 form-group">
											<label>PG(Percentage)</label>
											    <input type="number" class="form-control custom_textfield" min="0.00" step="0.01"
											           name="pg_percentage" id="pg_percentage"
											           placeholder=" " th:value="${employee.pg_percentage != null and employee.pg_percentage != '' ? employee.pg_percentage : 0}">
											    <span id="pg_percentage_error"></span>
											</div>
											
											<div class="col-sm-4 form-group">
											<label>PG(Completed Date)</label>
											    <input type="month" class="form-control custom_textfield"
											           name="pg_completed_date" id="pg_completed_date"
											           placeholder=" " th:value="${employee.pg_completed_date != null and employee.pg_completed_date != '' ? employee.pg_completed_date : ''}">
											    <span id="pg_completed_error"></span>
											</div>
										</div>
									</div>
									
									<div class="mb-4" style="padding: 5px 25px;">
										<div class="row jumbotron box8 border" style="padding: 10px 0; border-radius: 10px; font-size:14px;">
											<div class="col-sm-3 form-group mb-4 select-container">
											<label>Qualification-5</label>
											    <select class="form-control custom-select browser-default custom_selectfield"
											            name="qualification_other" id="qualification_other">
											           <option value=""></option>
								                       <option value="10th">10th</option>
								                       <option value="PUC">PUC</option>
								                       <option value="UG">UG</option>
								                       <option value="PG">PG</option>
								                       <option value="Other" selected>Other</option>
											    </select> 
											   <span id="other_qualification_error"></span>
											</div>
		
											<div class="col-sm-3 form-group mb-4">
											<label>Other(College Name)</label>
											    <input type="text" class="form-control custom_textfield"
											            name="other_college_name" id="other_college_name"
											           placeholder=" " th:value="${employee.other_college_name != null and employee.other_college_name != '' ? employee.other_college_name : ''}">
											    <span id="other_collegeName_error"></span>
											</div>
											
											<div class="col-sm-3 form-group mb-4">
											<label>Other(Degree Name)</label>
											    <input type="text" class="form-control custom_textfield"
											            name="other_degree_name" id="other_degree_name"
											           placeholder=" " th:value="${employee.other_degree_name != null and employee.other_degree_name != '' ? employee.other_degree_name : ''}">
											    <span id="other_degreeName_error"></span>
											</div>
											
											<div class="col-sm-3 form-group mb-4">
											<label>Other(Type)</label>
											    <select class="form-select custom-select browser-default custom_selectfield"
											            name="other_type" id="other_type">
											           <option th:text="${employee.other_type != null and employee.other_type != '' ? employee.other_type : ' '}"></option>
								                       <option value="Regular">Regular</option>
								                       <option value="Lateral">Lateral</option>
								                       <option value="Part-time">Part-time</option>
											    </select>
											    <span id="other_type_error"></span>
											</div>
											
											<div class="col-sm-4 form-group">
											<label>Other(University Name)</label>
											    <input type="text" class="form-control custom_textfield"
											            name="other_university_name" id="other_university_name"
											           placeholder=" " th:value="${employee.other_university_name != null and employee.other_university_name != '' ? employee.other_university_name : ''}">
											    <span id="other_universityName_error"></span>
											</div>
											
											<div class="col-sm-4 form-group">
											<label>Other(Percentage)</label>
											    <input type="number" class="form-control custom_textfield" min="0.00" step="0.01"
											           name="other_percentage" id="other_percentage"
											           placeholder=" " th:value="${employee.other_percentage != null and employee.other_percentage != '' ? employee.other_percentage : 0}">
											    <span id="other_percentage_error"></span>
											</div>
											
											<div class="col-sm-4 form-group">
											<label>Other(Completed Date)</label>
											    <input type="month" class="form-control custom_textfield"
											           name="other_completed_date" id="other_completed_date"
											           placeholder=" " th:value="${employee.other_completed_date != null and employee.other_completed_date != '' ? employee.other_completed_date : ''}">
											    <span id="other_completed_error"></span>
											</div>
										</div>
									</div>
									
									<div class="mb-4" style="padding: 5px 25px;">
									    <div class="row jumbotron box8 border" style="padding: 10px 0; border-radius: 10px; font-size:14px;">
									        <div class="col-sm-6 form-group select-container">
									        <label>Fresher/Experience</label>
									            <select class="form-control custom-select browser-default custom_selectfield"
									                    onchange="toggleCandidateTypeData(this.value)"
									                    name="candidate_type" id="candidate_type">
									                <!-- The value and text are populated from the database -->
									                <option value="" th:value="${employee.candidate_type != null and employee.candidate_type != '' ? employee.candidate_type : ''}"
									                        th:text="${employee.candidate_type != null and employee.candidate_type != '' ? employee.candidate_type : ''}">
									                </option>
									                <option value="Fresher">Fresher</option>
									                <option value="Experience">Experience</option>
									            </select>
									            <span id="candidateType_error"></span>
									        </div>
									
									        <div class="col-sm-6 form-group" id="fresher_expected_salary_box" style="display: none;">
									        <label>Current Salary(LPA)</label>
									            <input type="number" class="form-control custom_textfield" min="0.0" step="0.1" onchange="insertCurrentSalaryToHiddenInput($('#fresher_expected_salary').val())"
									                   id="fresher_expected_salary"
									                   placeholder=" " th:value="${employee.current_salary != null ? #numbers.formatDecimal(employee.current_salary, 2, 2) : '0.00'}">
									            <span id="fresher_expectedSalary_error"></span>
									        </div>
									
									        <div class="col-sm-3 form-group" id="experience_total_years_box" style="display: none;">
									        <label>Year of Experience</label>
									            <input type="number" class="form-control custom_textfield" min="0.0" step="0.1"
									                   name="experience_total_years" id="experience_total_years"
									                   placeholder=" " th:value="${employee.experience_total_years != null ? employee.experience_total_years : 0}">
									            <span id="yearOfExperience_error"></span>
									        </div>
									
									        <div class="col-sm-3 form-group" id="experience_expected_salary_box" style="display: none;">
									        <label>Current Salary(LPA)</label>
									            <input type="number" class="form-control custom_textfield" min="0.0" step="0.1" onchange="insertCurrentSalaryToHiddenInput($('#experience_expected_salary').val())"
									                   id="experience_expected_salary"
									                   placeholder=" " th:value="${employee.current_salary != null ? #numbers.formatDecimal(employee.current_salary, 2, 2) : '0.00'}">
									            <span id="experience_expectedSalary_error"></span>
									        </div>
									    </div>
									</div>
									
									<div class="mb-4" style="padding: 5px 25px;">
									    <div class="row jumbotron box8 border" style="padding: 10px 0; border-radius: 10px; font-size:14px;">
									
									        <div class="col-sm-6 form-group" id="resignation_date_div">
									        <label>Resignation Date</label>
									            <input type="date" class="form-control" name="resignation_date" id="resignation_date" th:value="${employee.resignation_date}">
									            <span id="resignation_date_error"></span>
									        </div>
									
									        <div class="col-sm-6 form-group" id="last_working_date_div">
									        <label>Last Working Date</label>
									            <input type="date" class="form-control" name="last_working_date" id="last_working_date" th:value="${employee.last_working_date}">
									            <span id="last_working_date_error"></span>
									        </div>
									    </div>
									</div>
									
									<div class="mb-4" style="padding: 5px 25px; display: none;" id="in_active_reason_div">
									    <div class="row jumbotron box8 border" style="padding: 10px 0; border-radius: 10px; font-size:14px;">
										    <div class="col-sm-12 form-group">
										    <label>Inactive Reason</label>
											    <textarea class="form-control" name="in_active_reason" style="font-size: 14px;"
												id="in_active_reason" rows="3" th:text="${employee.in_active_reason}"></textarea>
											</div>
									    </div>
									</div>
									
									<input type="hidden" th:value="${employee.employee_type}" id="hiddenEmployeeTypeValue" name="employee_type">
									<input type="hidden" th:value="${employee.current_salary}" id="current_salary_in_hidden_input" name="current_salary">
									
									<div class="col-sm-12 form-group mb-0 customize_btn_div mb-4 text-end">
										<button type="submit" id="updateEmpBtn" class="btn btn-primary" disabled>Submit</button>
										<div class="mt-2" style="display: none; font-size: 14px;" id="clickSubmitBtnReminderForActiveOrInactiveSelectedDiv">
											<span class="text-primary">Please click on the submit button to make it <span class="text-primary" id="activeOrInactiveSpan"></span></span>
										</div>
										<!-- <button type="reset" class="btn btn-secondary">Clear</button> -->
									</div>
								</div>
							</form><!-- End Profile Edit Form -->
							
							<input type="hidden" id="hiddenDefaultEmployeeTypeValue">
                	</div>
                
				<div class="tab-pane fade show profile-overview" id="profile-documents">
	                  <h5 class="card-title">Document Uploads</h5>
	                  
	                  <form id="docUploadForm" method="post" action="updateEmployeeDocUploads" enctype="multipart/form-data">
	                  	<input type="hidden" name="emp_id" id="emp_idValue" th:value="${employee.empid}">
		                  <div class="row">
			                  	<div class="col-sm-6 form-group photo_div mb-4">
							        <div class="d-flex justify-content-between"> <label for="photo" style="font-size: 14px;">Profile Pic (.png/.jpg)</label><span style="font-size:12px;color:#899499">   Max size:50MB</span></div>
							        
							        <!-- <div class="col-sm-4 form-group photo_div mb-4 profilePicDiv" style="width: 100%; height: 220px; margin-top: 10px; display: none;">
								    	<img id="profilePic" width="100%" height="100%" src="" />
								    </div> -->
								    
								    <div class="col-sm-4 form-group photo_div mb-4 profilePicDiv" style="width: 100%; height: 220px; margin-top: 10px; display: none;">
									    <iframe id="profilePicIframe" width="100%" height="100%" style="display: none;"></iframe>
									    <img id="profilePic" width="100%" height="100%" src="" style="display: none;" />
									</div>
							        
							        <input type="file" accept=".png,.jpg,.jpeg" style="font-size: 14px;" id="photo" class="form-control" name="profilePic" th:if="${permissions.doc_upload}">
							    </div>
							
							     <div class="col-sm-6 form-group photo_div mb-4">
							        <div class="d-flex justify-content-between"> <label for="panDoc" style="font-size: 14px;">Pancard Doc (.png/.jpg)</label><span style="font-size:12px;color:#899499">   Max size:50MB</span></div>
							        
							        <!-- <div class="col-sm-4 form-group photo_div mb-4 panPicDiv" style="width: 100%; height: 220px; margin-top: 10px; display: none;">
								    	<img id="panPic" width="100%" height="100%" src="" />
								    </div> --> 
								    
								    <div class="col-sm-4 form-group photo_div mb-4 panPicDiv" style="width: 100%; height: 220px; margin-top: 10px; display: none;">
									    <iframe id="panPicIframe" width="100%" height="100%" style="display: none;"></iframe>
									    <img id="panPic" width="100%" height="100%" src="" style="display: none;" />
									</div>
							        
							        <input type="file" accept=".png,.jpg,.jpeg" style="font-size: 14px;" id="panDoc" class="form-control" name="panPic" th:if="${permissions.doc_upload}">
							    </div>
						    </div>
						    
						    <div class="row">
							    <div class="col-sm-6 form-group photo_div mb-4">
							        <div class="d-flex justify-content-between"> <label for="aadharDoc" style="font-size: 14px;">Aadhar Doc (.png/.jpg)</label><span style="font-size:12px;color:#899499">   Max size:50MB</span></div>
							        
							        <div class="col-sm-4 form-group photo_div mb-4 aadharPicDiv" style="width: 100%; height: 300px; margin-top: 10px; display: none;">
									    <iframe id="aadharPicIframe" width="100%" height="100%" style="display: none;"></iframe>
									    <img id="aadharPic" width="100%" height="100%" src="" style="display: none;" />
									</div>
							        
							        <input type="file" accept=".pdf" style="font-size: 14px;" id="aadharDoc" class="form-control" name="aadharPic" th:if="${permissions.doc_upload}">
							   
							    </div>
							    
							   <div class="col-sm-6 form-group photo_div mb-4">
							        <div class="d-flex justify-content-between"> <label for="tenthDoc" style="font-size: 14px;">10th Doc (.png/.jpg)</label><span style="font-size:12px;color:#899499">   Max size:50MB</span></div>
							        
							        <!-- <div class="col-sm-4 form-group photo_div mb-4 tenthPicDiv" style="width: 100%; height: 220px; margin-top: 10px; display: none;">
								    	<img id="tenthPic" width="100%" height="100%" src="" />
								    </div> -->
								    
								    <div class="col-sm-4 form-group photo_div mb-4 tenthPicDiv" style="width: 100%; height: 300px; margin-top: 10px; display: none;">
									    <iframe id="tenthPicIframe" width="100%" height="100%" style="display: none;"></iframe>
									    <img id="tenthPic" width="100%" height="100%" src="" style="display: none;" />
									</div>
							        
							        <input type="file" accept=".pdf" style="font-size: 14px;" id="tenthDoc" class="form-control" name="tenthPic" th:if="${permissions.doc_upload}">
							    </div>
						    </div>
						    
						    <div class="row">
							    <div class="col-sm-6 form-group photo_div mb-4">
							        <div class="d-flex justify-content-between"> <label for="pucDoc" style="font-size: 14px;">PUC Doc (.png/.jpg)</label><span style="font-size:12px;color:#899499">   Max size:50MB</span></div>
							        
							        <!-- <div class="col-sm-4 form-group photo_div mb-4 pucPicDiv" style="width: 100%; height: 220px; margin-top: 10px; display: none;">
								    	<img id="pucPic" width="100%" height="100%" src="" />
								    </div> -->
								    
								    <div class="col-sm-4 form-group photo_div mb-4 pucPicDiv" style="width: 100%; height: 300px; margin-top: 10px; display: none;">
									    <iframe id="pucPicIframe" width="100%" height="100%" style="display: none;"></iframe>
									    <img id="pucPic" width="100%" height="100%" src="" style="display: none;" />
									</div>
							        
							        <input type="file" accept=".pdf" style="font-size: 14px;" id="pucDoc" class="form-control" name="pucPic" th:if="${permissions.doc_upload}">
							    </div>
							    
							    <div class="col-sm-6 form-group photo_div mb-4">
							        <div class="d-flex justify-content-between"> <label for="degreeDoc" style="font-size: 14px;">Degree Doc (.png/.jpg)</label><span style="font-size:12px;color:#899499">   Max size:50MB</span></div>
							        
							        <!-- <div class="col-sm-4 form-group photo_div mb-4 degreePicDiv" style="width: 100%; height: 220px; margin-top: 10px; display: none;">
								    	<img id="degreePic" width="100%" height="100%" src="" />
								    </div> -->
								    
								    <div class="col-sm-4 form-group photo_div mb-4 degreePicDiv" style="width: 100%; height: 300px; margin-top: 10px; display: none;">
									    <iframe id="degreePicIframe" width="100%" height="100%" style="display: none;"></iframe>
									    <img id="degreePic" width="100%" height="100%" src="" style="display: none;" />
									</div>
							        
							        <input type="file" accept=".pdf" style="font-size: 14px;" id="degreeDoc" class="form-control" name="degreePic" th:if="${permissions.doc_upload}">
							    </div> 
						    </div>
						    
						    <div class="col-sm-12 form-group mb-0 customize_btn_div mb-4 text-end" th:if="${permissions.doc_upload}">
								<button type="submit" class="btn btn-primary">Update Document</button>
							</div>
					    </form>
	                  </div>
	                  
	                  <div class="tab-pane fade show profile-overview" id="profile-documents2">
                  <h5 class="card-title">Document Uploads</h5>
                  
                  <form id="docUploadForm2" method="post" action="updateEmployeeDocUploads" enctype="multipart/form-data">
                  	<input type="hidden" name="emp_id" th:value="${employee.empid}">
	                  <div class="row">
		                  	<div class="col-sm-6 form-group photo_div mb-4">
						        <label for="photo" style="font-size: 14px;">Profile Pic (.png/.jpg)<span class="docSizeLabel">(Less than 50 MB only)</span></label>
						        
							    <p class="m-0 mt-1 p-1" style="text-align: right;">
								    <span class="profileDownloadSpan" id="profileDownload" title="Download">
								    	<i style="font-weight: bold; font-size: 18px;" class="bi bi-download"></i>
								    </span>
							    </p>
							    <div class="col-sm-4 form-group photo_div mb-4 profilePicDiv1" style="width: 100%; height: 270px; margin-top: 10px; display: none;">
								    <iframe id="profilePicIframe1" width="100%" height="100%" style="display: none;"></iframe>
								    <img id="profilePic1" width="100%" height="100%" src="" style="display: none; border: none; outline: none;" />
								</div>
						        
						        <input type="file" accept=".png,.jpg,.jpeg" style="font-size: 14px;" id="photo" class="form-control" name="profilePic">
						    </div>
						
								
						     <div class="col-sm-6 form-group photo_div mb-4">
						        <label for="panDoc" style="font-size: 14px;">Pancard Doc (.png/.jpg)<span class="docSizeLabel">(Less than 50 MB only)</span></label>
						        
						        <!-- <div class="col-sm-4 form-group photo_div mb-4 panPicDiv" style="width: 100%; height: 220px; margin-top: 10px; display: none;">
							    	<img id="panPic" width="100%" height="100%" src="" />
							    </div> -->
							    <p class="m-0 mt-1 p-1" style="text-align: right;">
							    	<span class="panDownloadSpan" id="panDownload" title="Download">
							    		<i style="font-weight: bold; font-size: 18px;" class="bi bi-download"></i>
							    	</span>
							    </p>
							    <div class="col-sm-4 form-group photo_div mb-4 panPicDiv1" style="width: 100%; height: 270px; margin-top: 10px; display: none;">
								    <iframe id="panPicIframe1" width="100%" height="100%" style="display: none;"></iframe>
								    <img id="panPic1" width="100%" height="100%" src="" style="display: none;" />
								</div>
						        
						        <input type="file" accept=".png,.jpg,.jpeg" style="font-size: 14px;" id="panDoc" class="form-control" name="panPic">
						    </div>
					    </div>
					    
					    <div class="row">
						    <div class="col-sm-6 form-group photo_div mb-4">
						        <label for="aadharDoc" style="font-size: 14px;">Aadhar Doc (.pdf)<span class="docSizeLabel">(Less than 50 MB only)</span></label>
						        
						        <div class="col-sm-4 form-group photo_div mb-4 aadharPicDiv1" style="width: 100%; height: 300px; margin-top: 10px; display: none;">
								    <iframe id="aadharPicIframe1" width="100%" height="100%" style="display: none;"></iframe>
								    <img id="aadharPic1" width="100%" height="100%" src="" style="display: none;" />
								</div>
						        
						        <input type="file" accept=".pdf" style="font-size: 14px;" id="aadharDoc" class="form-control" name="aadharPic">
						    </div>
						    
						   <div class="col-sm-6 form-group photo_div mb-4">
						        <label for="tenthDoc" style="font-size: 14px;">10th Doc (.pdf)<span class="docSizeLabel">(Less than 50 MB only)</span></label>
						        
						        <!-- <div class="col-sm-4 form-group photo_div mb-4 tenthPicDiv" style="width: 100%; height: 220px; margin-top: 10px; display: none;">
							    	<img id="tenthPic" width="100%" height="100%" src="" />
							    </div> -->
							    
							    <div class="col-sm-4 form-group photo_div mb-4 tenthPicDiv1" style="width: 100%; height: 300px; margin-top: 10px; display: none;">
								    <iframe id="tenthPicIframe1" width="100%" height="100%" style="display: none;"></iframe>
								    <img id="tenthPic1" width="100%" height="100%" src="" style="display: none;" />
								</div>
						        
						        <input type="file" accept=".pdf" style="font-size: 14px;" id="tenthDoc" class="form-control" name="tenthPic">
						    </div>
					    </div>
					    
					    <div class="row">
						    <div class="col-sm-6 form-group photo_div mb-4">
						        <label for="pucDoc" style="font-size: 14px;">PUC Doc (.pdf)<span class="docSizeLabel">(Less than 50 MB only)</span></label>
						        
						        <!-- <div class="col-sm-4 form-group photo_div mb-4 pucPicDiv" style="width: 100%; height: 220px; margin-top: 10px; display: none;">
							    	<img id="pucPic" width="100%" height="100%" src="" />
							    </div> -->
							    
							    <div class="col-sm-4 form-group photo_div mb-4 pucPicDiv1" style="width: 100%; height: 300px; margin-top: 10px; display: none;">
								    <iframe id="pucPicIframe1" width="100%" height="100%" style="display: none;"></iframe>
								    <img id="pucPic1" width="100%" height="100%" src="" style="display: none;" />
								</div>
						        
						        <input type="file" accept=".pdf" style="font-size: 14px;" id="pucDoc" class="form-control" name="pucPic">
						    </div>
						    
						    <div class="col-sm-6 form-group photo_div mb-4">
						        <label for="degreeDoc" style="font-size: 14px;">UG Doc (.pdf)<span class="docSizeLabel">(Less than 50 MB only)</span></label>
						        
						        <!-- <div class="col-sm-4 form-group photo_div mb-4 degreePicDiv" style="width: 100%; height: 220px; margin-top: 10px; display: none;">
							    	<img id="degreePic" width="100%" height="100%" src="" />
							    </div> -->
							    
							    <div class="col-sm-4 form-group photo_div mb-4 degreePicDiv1" style="width: 100%; height: 300px; margin-top: 10px; display: none;">
								    <iframe id="degreePicIframe1" width="100%" height="100%" style="display: none;"></iframe>
								    <img id="degreePic1" width="100%" height="100%" src="" style="display: none;" />
								</div>
						        
						        <input type="file" accept=".pdf" style="font-size: 14px;" id="degreeDoc" class="form-control" name="degreePic">
						    </div> 
					    </div>
					    
					    <div class="row">
						    <div class="col-sm-6 form-group photo_div mb-4">
						        <label for="pgDoc" style="font-size: 14px;">PG Doc (.pdf)<span class="docSizeLabel">(Less than 50 MB only)</span></label>
						        
							    <div class="col-sm-4 form-group photo_div mb-4 pgDiv1" style="width: 100%; height: 300px; margin-top: 10px; display: none;">
								    <iframe id="pgIframe1" width="100%" height="100%" style="display: none;"></iframe>
								    <img id="pgPic1" width="100%" height="100%" src="" style="display: none;" />
								</div>
						        
						        <input type="file" accept=".pdf" style="font-size: 14px;" id="pgDoc" class="form-control" name="pg_pic">
						    </div>
						    
						    <div class="col-sm-6 form-group photo_div mb-4">
						        <label for="expLetterDoc" style="font-size: 14px;">Experience Letter (.pdf)<span class="docSizeLabel">(Less than 50 MB only)</span></label>
						        
							    <div class="col-sm-4 form-group photo_div mb-4 expLetterDiv1" style="width: 100%; height: 300px; margin-top: 10px; display: none;">
								    <iframe id="expLetterIframe1" width="100%" height="100%" style="display: none;"></iframe>
								    <img id="expLetterPic1" width="100%" height="100%" src="" style="display: none;" />
								</div>
						        
						        <input type="file" accept=".pdf" style="font-size: 14px;" id="expLetterDoc" class="form-control" name="exp_letter_pic">
						    </div>
						</div>
					    
					    <div class="row">
					    	<div class="col-sm-6 form-group photo_div mb-4">
						        <label for="payslipDoc" style="font-size: 14px;">Payslip Doc (.pdf)<span class="docSizeLabel">(Less than 50 MB only)</span></label>
						        
							    <div class="col-sm-4 form-group photo_div mb-4 payslipDocDiv1" style="width: 100%; height: 300px; margin-top: 10px; display: none;">
								    <iframe id="payslipDocIframe1" width="100%" height="100%" style="display: none;"></iframe>
								    <img id="payslipDocPic1" width="100%" height="100%" src="" style="display: none;" />
								</div>
						        
						        <input type="file" accept=".pdf" style="font-size: 14px;" id="payslipDoc" class="form-control" name="payslip_pic">
						    </div>
					    
						    <div class="col-sm-6 form-group photo_div mb-4">
						        <label for="offer_letter" style="font-size: 14px;">Offer Letter (.pdf)<span class="docSizeLabel">(Less than 50 MB only)</span></label>
						        
							    <div class="col-sm-4 form-group photo_div mb-4 offerLetterDiv1" style="width: 100%; height: 300px; margin-top: 10px; display: none;">
								    <iframe id="offerLetterIframe1" width="100%" height="100%" style="display: none;"></iframe>
								    <img id="offerLetterPic1" width="100%" height="100%" src="" style="display: none;" />
								</div>
						        
						        <input type="file" accept=".pdf" style="font-size: 14px;" id="offer_letter" class="form-control" name="offer_letter">
						    </div>
						</div>
						
						<div class="row">
					    	<div class="col-sm-6 form-group photo_div mb-4">
						        <label for="diplomaDoc" style="font-size: 14px;">Diploma Doc (.pdf)<span class="docSizeLabel">(Less than 50 MB only)</span></label>
						        
							    <div class="col-sm-4 form-group photo_div mb-4 diplomaDocDiv1" style="width: 100%; height: 300px; margin-top: 10px; display: none;">
								    <iframe id="diplomaDocIframe1" width="100%" height="100%" style="display: none;"></iframe>
								    <img id="diplomaPic1" width="100%" height="100%" src="" style="display: none;" />
								</div>
						        
						        <input type="file" accept=".pdf" style="font-size: 14px;" id="diplomaDoc" class="form-control" name="diploma_pic">
						    </div>
					    
						    <div class="col-sm-6 form-group photo_div mb-4">
						        <label for="bankOrCheque" style="font-size: 14px;">Bank Passbook / Cheque Leaf (.pdf)<span class="docSizeLabel">(Less than 50 MB only)</span></label>
						        
							    <div class="col-sm-4 form-group photo_div mb-4 bankOrChequeDiv1" style="width: 100%; height: 300px; margin-top: 10px; display: none;">
								    <iframe id="bankOrChequeIframe1" width="100%" height="100%" style="display: none;"></iframe>
								    <img id="bankOrChequePic1" width="100%" height="100%" src="" style="display: none;" />
								</div>
						        
						        <input type="file" accept=".pdf" style="font-size: 14px;" id="bankOrCheque" class="form-control" name="bank_check_pic">
						    </div>
						</div>
						
						<div class="row">
					    	<div class="col-sm-6 form-group photo_div mb-4">
						        <label for="othersDoc" style="font-size: 14px;">Others Doc 1 (.pdf)<span class="docSizeLabel">(Less than 50 MB only)</span></label>
						        
							    <div class="col-sm-4 form-group photo_div mb-4 othersDocDiv1" style="width: 100%; height: 300px; margin-top: 10px; display: none;">
								    <iframe id="othersDocIframe1" width="100%" height="100%" style="display: none;"></iframe>
								    <img id="othersPic1" width="100%" height="100%" src="" style="display: none;" />
								</div>
						        
						        <input type="file" accept=".pdf" style="font-size: 14px;" id="othersDoc" class="form-control" name="other_pic">
						    </div>
						    
						    <div class="col-sm-6 form-group photo_div mb-4">
						        <label for="othersDoc2" style="font-size: 14px;">Others Doc 2 (.pdf)<span class="docSizeLabel">(Less than 50 MB only)</span></label>
						        
							    <div class="col-sm-4 form-group photo_div mb-4 othersDocDiv2" style="width: 100%; height: 300px; margin-top: 10px; display: none;">
								    <iframe id="othersDocIframe2" width="100%" height="100%" style="display: none;"></iframe>
								    <img id="othersPic2" width="100%" height="100%" src="" style="display: none;" />
								</div>
						        
						        <input type="file" accept=".pdf" style="font-size: 14px;" id="othersDoc2" class="form-control" name="other_pic2">
						    </div>
						</div>
						
						<div class="row">
					    	<div class="col-sm-6 form-group photo_div mb-4">
						        <label for="othersDoc3" style="font-size: 14px;">Others Doc 3 (.pdf)<span class="docSizeLabel">(Less than 50 MB only)</span></label>
						        
							    <div class="col-sm-4 form-group photo_div mb-4 othersDocDiv3" style="width: 100%; height: 300px; margin-top: 10px; display: none;">
								    <iframe id="othersDocIframe3" width="100%" height="100%" style="display: none;"></iframe>
								    <img id="othersPic3" width="100%" height="100%" src="" style="display: none;" />
								</div>
						        
						        <input type="file" accept=".pdf" style="font-size: 14px;" id="othersDoc3" class="form-control" name="other_pic3">
						    </div>
						    
						    <div class="col-sm-6 form-group photo_div mb-4">
						        <label for="othersDoc4" style="font-size: 14px;">Others Doc 2 (.pdf)<span class="docSizeLabel">(Less than 50 MB only)</span></label>
						        
							    <div class="col-sm-4 form-group photo_div mb-4 othersDocDiv4" style="width: 100%; height: 300px; margin-top: 10px; display: none;">
								    <iframe id="othersDocIframe4" width="100%" height="100%" style="display: none;"></iframe>
								    <img id="othersPic4" width="100%" height="100%" src="" style="display: none;" />
								</div>
						        
						        <input type="file" accept=".pdf" style="font-size: 14px;" id="othersDoc4" class="form-control" name="other_pic4">
						    </div>
						</div>
					    
					    <div class="col-sm-12 form-group mb-0 customize_btn_div mb-4 text-end">
							<button type="submit" id="docUploadUpdateBtn" class="btn btn-primary" disabled>Update Document</button>
						</div>
				    </form>
                  </div>
	                  
                <div class="tab-pane fade pt-3" id="profile-settings"  th:if="${empDetailsByEmpId.deptId==0}">

                  <!-- Settings Form -->
                  <form>

                    <div class="row mb-3">
                      <div class="col-md-8 col-lg-9">
                      
					<div class="form-check form-switch" data-empid="[[${employee.empid}]]">
					    <input class="form-check-input" type="checkbox" id="interviewAccess"
					           th:checked="${permissionstoDisplay.interviewAccess}">
					    <label class="form-check-label" for="interviewAccess">
					        Interview 
					    </label>						    
					</div>
					
					<div class="form-check form-switch" data-empid="[[${employee.empid}]]">
					    <input class="form-check-input" type="checkbox" id="salesAccess"
					           th:checked="${permissionstoDisplay.sales}">
					    <label class="form-check-label" for="salesAccess">
					        Sales
					    </label>
					</div>
					
					<div class="form-check form-switch" data-empid="[[${employee.empid}]]">
					    <input class="form-check-input" type="checkbox" id="accountsAccess"
					           th:checked="${permissionstoDisplay.accountsAccess}">
					    <label class="form-check-label" for="salesAccess">
					        Accounts
					    </label>
					</div>
					
					<div class="form-check form-switch" data-empid="[[${employee.empid}]]">
					    <input class="form-check-input" type="checkbox" id="storeAccess"
					           th:checked="${permissionstoDisplay.storeAccess}">
					    <label class="form-check-label" for="salesAccess">
					        Store
					    </label>
					</div>
					
					<div class="form-check form-switch" data-empid="[[${employee.empid}]]">
					    <input class="form-check-input" type="checkbox" id="assetAdmin"
					           th:checked="${permissionstoDisplay.asset_admin}">
					    <label class="form-check-label" for="assetAdmin">
					        Aasset Admin
					    </label>
					</div>
					
					<div class="form-check form-switch" data-empid="[[${employee.empid}]]">
					    <input class="form-check-input" type="checkbox" id="crm"
					           th:checked="${permissionstoDisplay.crm}">
					    <label class="form-check-label" for="crm">
					        Pre-sale Activity
					    </label>
					</div>
                     <div th:if="${viewUserDeptId==0}" class="form-check form-switch" data-empid="[[${employee.empid}]]">
					    <input class="form-check-input" type="checkbox" id="attendanceLink"
					           th:checked="${permissionstoDisplay.attendance_link}">
					    <label class="form-check-label" for="attendanceLink">
					        View Attendance
					    </label>
					</div>
					
                   </div>
                 </div>

                   <!--  <div class="text-center">
                      <button type="submit" class="btn btn-primary">Save Changes</button>
                    </div> -->
                  </form><!-- End settings Form -->

                </div>
                

                <div class="tab-pane fade pt-3 changePassword" id="profile-change-password">
                  <!-- Change Password Form -->
		             <form id="passwordChangeForm">
		   						<input type="hidden" id="employeeId" name="empId" th:value="${employee.empid}" />
							    <div class="row mb-3" >
							        <label for="currentPassword" class="col-md-4 col-lg-3 col-form-label">Current Password</label>
							        <div class="col-md-8 col-lg-9">
							            <input name="currentPassword" type="password" class="form-control" id="currentPassword">
							        </div>
							    </div>
							 
							    <div class="row mb-3">
							        <label for="newPassword" class="col-md-4 col-lg-3 col-form-label">New Password</label>
							        <div class="col-md-8 col-lg-9">
							            <input name="newPassword" type="password" class="form-control" id="newPassword">
							        </div>
							    </div>
							
							    <div class="row mb-3">
							        <label for="renewPassword" class="col-md-4 col-lg-3 col-form-label">Re-enter New Password</label>
							        <div class="col-md-8 col-lg-9">
							            <input name="renewPassword" type="password" class="form-control" id="renewPassword">
							        </div>
							    </div>
							
							     <div class="text-center">
							        <button type="submit" class="btn btn-primary">Change Password</button>
							    </div>
							</form><!-- End Change Password Form -->
                </div>
 				<div class="tab-pane fade profile-overview" id="profile-leaveDetails">
										<table class="table table-hover">
											<thead>
												<tr>
													<th>Leave Type</th>
													<th>Added</th>
													<th>Used</th>
													<th>Remaining</th>
													<!-- <th>Edit</th> -->
												</tr>
											</thead>
											<tbody id="leaveRecordsTable">
												<!-- Dynamic content will be inserted here -->
											</tbody>
										</table>
                  <!--  <h5 class="card-title">Profile Details</h5>

                  <div class="row">
                    <div class="col-lg-3 col-md-4 label ">Full Name</div>
                    <div class="col-lg-9 col-md-8" th:text="${employee.fullName}"></div>
                  </div>

                  <div class="row">
                    <div class="col-lg-3 col-md-4 label">Job</div>
                    <div class="col-lg-9 col-md-8" th:text="${employee.roleName}"></div>
                  </div>

                  <div class="row">
                    <div class="col-lg-3 col-md-4 label">Country</div>
                    <div class="col-lg-9 col-md-8">USA</div>
                  </div>

                  <div class="row">
                    <div class="col-lg-3 col-md-4 label">Address</div>
                    <div class="col-lg-9 col-md-8" th:text="${employee.address}"></div>
                  </div>

                  <div class="row">
                    <div class="col-lg-3 col-md-4 label">Phone</div>
                    <div class="col-lg-9 col-md-8" th:text="${employee.mobileNo}"></div>
                  </div>

                  <div class="row">
                    <div class="col-lg-3 col-md-4 label">Email</div>
                    <div class="col-lg-9 col-md-8" th:text="${employee.email}"></div>
                  </div>
 -->
                </div>
                <div class="tab-pane fade profile-overview" id="profile-assets">
                	<div id="profile-assets"></div>
                </div>
              </div><!-- End Bordered Tabs -->

            </div>
          </div>

        </div>
      </div>
    </section>
  </main><!-- End #main -->

  <!-- ======= Footer ======= -->
  <footer id="footer" class="footer">
    <div class="copyright">
      &copy; Copyright <strong><span>Melange System pvt ltd</span></strong>. All Rights Reserved
    </div>
  </footer><!-- End Footer -->

  <a href="#" class="back-to-top d-flex align-items-center justify-content-center"><i class="bi bi-arrow-up-short"></i></a>

  <!-- Vendor JS Files -->
  <script src="assets/vendor/apexcharts/apexcharts.min.js"></script>
  <script src="assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
  <script src="assets/vendor/chart.js/chart.umd.js"></script>
  <script src="assets/vendor/echarts/echarts.min.js"></script>
  <script src="assets/vendor/quill/quill.js"></script>
  <script src="assets/vendor/simple-datatables/simple-datatables.js"></script>
  <script src="assets/vendor/tinymce/tinymce.min.js"></script>
  <script src="assets/vendor/php-email-form/validate.js"></script>

  <!-- Template Main JS File -->
  <script src="assets/js/main.js"></script>
  
<!-- script to send feedback form -->
<script>

</script>

<!-- script to check the New Password and Re-enter New Password are equal or not if equal update the password -->
<script>
document.addEventListener('DOMContentLoaded', function () {
	
	const form = document.getElementById('passwordChangeForm');

    const currentPassword = document.getElementById('currentPassword');
    const newPasswordField = document.getElementById('newPassword');
    const renewPasswordField = document.getElementById('renewPassword');
    const empIdField = form ? form.querySelector('input[name="empId"]') : null;

    const successAlert = document.querySelector('.alert-success');
    const errorAlert = document.querySelector('.alert-danger');
 
    // Close buttons for the alerts
    const successCloseBtn = successAlert.querySelector('.btn-close');
    const errorCloseBtn = errorAlert.querySelector('.btn-close');

    // Handle the close button click to hide the alert
    successCloseBtn.addEventListener('click', () => successAlert.style.display = 'none');
    errorCloseBtn.addEventListener('click', () => errorAlert.style.display = 'none');

    if (form) {
        form.addEventListener('submit', async function (event) {
            event.preventDefault(); // Prevent the default form submission

            const newPassword = newPasswordField.value;
            const renewPassword = renewPasswordField.value;
            const currentPasswordValue = currentPassword.value;
            const empId = empIdField ? empIdField.value : '';

            // Clear any previous alerts
            successAlert.style.display = 'none';
            errorAlert.style.display = 'none';

            // Show loading popup
            // Show the loading modal
		    document.getElementById('loadingPopup').style.display = 'flex';
            	
            // Step 1: Verify the current password via /verifyCurrentPassword
            try {
                const response = await fetch('/verifyCurrentPassword', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/x-www-form-urlencoded'
                    },
                    body: new URLSearchParams({
                        empId: empId,
                        currentPassword: currentPasswordValue
                    })
                });

                const data = await response.json();

                if (!response.ok || !data.success) {
                    errorAlert.querySelector('span').textContent = data.message || 'Current password verification failed.';
                    errorAlert.style.display = 'block'; // Show the error alert
                    document.getElementById('loadingPopup').style.display = 'none';
                    
                    return;
                }
            } catch (error) {
                console.error('Error verifying current password:', error);
                errorAlert.querySelector('span').textContent = 'An error occurred while verifying the current password.';
                errorAlert.style.display = 'block'; // Show the error alert
                document.getElementById('loadingPopup').style.display = 'none';
                
                return;
            }

            // Step 2: Check if the new passwords match
            if (newPassword !== renewPassword) {
                errorAlert.querySelector('span').textContent = 'New Password and Re-enter New Password do not match.';
                errorAlert.style.display = 'block'; // Show the error alert
                document.getElementById('loadingPopup').style.display = 'none';
                return;
            }

            // Step 3: Proceed with updating the password
            const formData = new FormData();
            formData.append('newPassword', newPassword);
            formData.append('empId', empId);
            formData.append('currentPassword', currentPasswordValue);

            // Show the loading modal
		    document.getElementById('loadingPopup').style.display = 'flex';


            
            // Prepare the AJAX request for updating the password
            fetch('/updatePassword', {
                method: 'POST',
                body: formData
            })
                .then(response => response.json())
                .then(data => {
                    if (data.success) {
                        successAlert.querySelector('span').textContent = 'Password updated successfully!';
                        document.getElementById('passwordChangeForm').reset();
                        successAlert.style.display = 'block'; // Show the success alert
                        // hide the loading modal
        			    document.getElementById('loadingPopup').style.display = 'none';


                    } else {
                        errorAlert.querySelector('span').textContent = 'Error updating password: ' + data.message;
                        errorAlert.style.display = 'block'; // Show the error alert
                        // hide the loading modal
        			    document.getElementById('loadingPopup').style.display = 'none';
                    }
                })
                .catch(error => {
                	
                    console.error('Error:', error);
                    errorAlert.querySelector('span').textContent = 'An error occurred while updating the password.';
                    errorAlert.style.display = 'block'; // Show the error alert
                    // hide the loading modal
    			    document.getElementById('loadingPopup').style.display = 'none';

                });
        });
    }
});

</script>

<!-- script to fetch the designation based on selected department -->
<script>
function fetchDesignations(deptId) {
     if(deptId) {
        fetch(`/getDesignations?deptId=${deptId}`)
            .then(response => response.json())
            .then(data => {
                let designationSelect = document.getElementById('roleId');
                designationSelect.innerHTML = '<option value="" selected>Select Designation</option>';
                data.forEach(designation => {
                    let option = document.createElement('option');
                    option.value = designation.role_id;
                    option.text = designation.roleName;
                    designationSelect.add(option);
                });
            })
            .catch(error => console.error('Error fetching designations:', error));
    }
}
</script>

<!-- script to update the permission -->
<!-- <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script> -->
 <script src="assets/js/jquery-3.6.4.min.js"></script> 
<script>
$(document).ready(function() {
    $('#interviewAccess').on('change', function() {
        var isChecked = $(this).is(':checked');
        var employeeId = document.getElementById("employeeId").value;
        
        // Confirming values        
        $.ajax({
            url: '/updateInterviewPermission',
            type: 'POST',
            contentType: 'application/json', // Specify content type
            data: JSON.stringify({
                "userId": employeeId,
                "enabled": isChecked
            }),
            success: function(response) {
                console.log('Permission updated successfully');
            },
            error: function(xhr, status, error) {
                console.error('Failed to update permission:', error);
                console.error('Response text:', xhr.responseText);
            }
        });
    });
});
</script>
 <!-- script to notification -->
<!-- <script>
//Function to fetch flag value from the backend
function fetchFlag() {
    $.get("/flag", function(response) {
    	console.log("admin");
        var leaveRequestCountValue = response;
        console.log(leaveRequestCountValue);
       // If total notification count is greater than 0, show the bell icon
        if (leaveRequestCountValue.totalNotificationCount > 0) {
            $("#notificationBellIcon").show();  // Show bell icon
        } else {
            $("#notificationBellIcon").hide();  // Hide bell icon if no notifications
        }

        if (leaveRequestCountValue.leaveRequestFlagCount > 0) {
            $("#notificationBellIcon").show();  // Show bell icon
            $("#leaveRequestNotification").show();  // Show specific notification
            
            $("#leaveRequestMessage").text(leaveRequestCountValue.leaveRequestFlagCount + " leave request(s)");
            $(".badge-number").text(leaveRequestCountValue.leaveRequestFlagCount);
            $("#leaveRequestFlagCount").text(leaveRequestCountValue.leaveRequestFlagCount);
        }
        //display the asset notifu=ication based on asset count value
        if(leaveRequestCountValue.asseteRequestFlagCount>0){
        	 
        	 $("#notificationBellIcon").show();  // Show bell icon
             $("#assetRequestNotification").show();  // Show specific notification
              
             $("#assetRequestMessage").text(leaveRequestCountValue.asseteRequestFlagCount + " asset request(s)");
             $(".badge-number").text(leaveRequestCountValue.totalNotificationCount);
             $("#asseteRequestFlagCount").text(leaveRequestCountValue.asseteRequestFlagCount);
        	 	
        }
        
        //display the new project notification based on asset count value
        if(leaveRequestCountValue.newPrjectValueCount>0){
        	 $("#notificationBellIcon").show();  // Show bell icon
             $("#newProjectNotification").show();  // Show specific notification
             
             $("#newProjectMessage").text(leaveRequestCountValue.newPrjectValueCount + " project request(s)");
             $(".badge-number").text(leaveRequestCountValue.totalNotificationCount);
             $("#newPrjectValueCount").text(leaveRequestCountValue.asseteRequestFlagCount);
        }
        //display the appraisal from HR notification ]
        if(leaveRequestCountValue.appraisalCount>0){
        	 $("#notificationBellIcon").show();  // Show bell icon
             $("#hrAppraisal").show();  // Show specific notification
             
             $("#newProjectMessage").text(leaveRequestCountValue.appraisalCount + " Appraisal Form");
             $(".badge-number").text(leaveRequestCountValue.totalNotificationCount);
             $("#newPrjectValueCount").text(leaveRequestCountValue.asseteRequestFlagCount);
        }
      //display the appraisal from employee notification 
        if(leaveRequestCountValue.empAppraisalflag>0){
        	 $("#notificationBellIcon").show();  // Show bell icon
             $("#empAppraisal").show();  // Show specific notification
             
             $("#apprisalempNotification").text(leaveRequestCountValue.empAppraisalflag + " employees sent appraisal");
             $(".badge-number").text(leaveRequestCountValue.totalNotificationCount);
             $("#newPrjectValueCount").text(leaveRequestCountValue.asseteRequestFlagCount);
        }
        
        //display the appraisal Due date notification 
        if(leaveRequestCountValue.adminAppraisalDuedate>0){
        	 $("#dueAppraisal").show();  // Show bell icon
             $("#empAppraisal").show();  // Show specific notification
             
             $("#apprisalDueNotification").text("Tomorrow is the due date for submit appraisal");
             $(".badge-number").text(leaveRequestCountValue.totalNotificationCount);
             $("#newPrjectValueCount").text(leaveRequestCountValue.asseteRequestFlagCount);
        }
      //display the announcement notification based on asset count value
        if(leaveRequestCountValue.announcementNotification>0){
        	 $("#notificationBellIcon").show();  // Show bell icon
             $("#newAnnouncementNotification").show();  // Show specific notification
             
             $("#newannouncement").text(leaveRequestCountValue.announcementNotification + " announcement(s)");
             $(".badge-number").text(leaveRequestCountValue.totalNotificationCount);
        }
        //display the leave request status change notification
        if(leaveRequestCountValue.leaveRequestStatusChangeValue > 0){
        	 
        	 $("#notificationBellIcon").show();  // Show bell icon
             $("#leaveRequestSatusChangeNotification").show();  // Show specific notification
             
             $("#leaveRequestSatusChangeMessage").text("Your leave request status has been");
             $(".badge-number").text(leaveRequestCountValue.totalNotificationCount);             
        	 	
        } 
        //display the new feature notification
        if(leaveRequestCountValue.newFeatureNotification > 0){
        	 
        	 $("#notificationBellIcon").show();  // Show bell icon
             $("#new-feature").show();  // Show specific notification
             
             $("#new-featuretext").text("Latest Update, There is " + leaveRequestCountValue.newFeatureNotification + " new feature(s) update is now available.");
             $(".badge-number").text(leaveRequestCountValue.totalNotificationCount);             
        	 
        } 
    });
}

// Periodically fetch flag value every second (adjust as needed)
setInterval(fetchFlag, 1000);

</script>

  script to notification link redirect
script to notification link redirect
<script th:inline="javascript">
    function redirectToLeaveRequest() {
        var empid = /*[[${empDetailsByEmpId.empid}]]*/ 'defaultEmpId';
        window.location.href = '/viewAdminLeaves?empid=' + empid;
    }
    function redirectToAsset() {
        //var empid = /*[[${empDetailsByEmpId.empid}]]*/ 'defaultEmpId';
        window.location.href = '/asset';
    }
    function redirectToProject() {
        //var empid = /*[[${empDetailsByEmpId.empid}]]*/ 'defaultEmpId';
        window.location.href = '/ongoingProject';
    }    
    function redirectToAppraisal() {
    	var empid = /*[[${empDetailsByEmpId.empid}]]*/ 'defaultEmpId';
    	window.location.href = '/apprisal?empid=' + empid;
    }    
    function redirectToemployeeAppraisal() {
    	var empid = /*[[${empDetailsByEmpId.empid}]]*/ 'defaultEmpId';
    	window.location.href = '/employeeApprisal?empid=' + empid;
    }    
    function redirectToAnnouncement() {
    	var empid = /*[[${empDetailsByEmpId.empid}]]*/ 'defaultEmpId';
    	window.location.href = '/events';
    }
    
    function redirectToAttendence() {
    	var email = /*[[${empDetailsByEmpId.email}]]*/ 'defaultEmpId';
    	window.location.href = '/attendanceLive?email=' +email;
    }
</script> -->

<!-- script for profile pic -->
<script>
$.ajax({
    type: "GET",
    url: "fetchEmployeeDocumentDetailsOnlyByEmpId",
    data: {
        "emp_id": $('#emp_idSessionValue').val()
    },
    success: function(data) {
    	console.log("++++data"+JSON.stringify(data));
        $('#dynamicProfilePic').attr('src', `${data.profilePicPath}`);
        $('#dynamicProfilePic1').attr('src', `${data.profilePicPath}`);
    },
    error: function(xhr, status, error) {
        console.error("Error invoking data:", error);
    }
});
</script>


<!-- script to display document tab -->
<script>
function documentOnlyUploadView() {
    $.ajax({
        type: "GET",
        url: "fetchEmployeeDocumentDetailsOnlyByEmpId",
        data: {
            "emp_id": $('#emp_idValue').val()
        },
        success: function(data) {
            //console.log(JSON.stringify(data));
            
            // Apply displayFile for each document
            displayFile('.profilePicDiv', '#profilePic', '#profilePicIframe', `${data.profilePicPath}`, 'image');
            displayFile('.panPicDiv', '#panPic', '#panPicIframe', `${data.panPicPath}`, 'image');
            displayFile('.aadharPicDiv', '#aadharPic', '#aadharPicIframe', `${data.aadhar_pic}`, 'pdf');
            displayFile('.tenthPicDiv', '#tenthPic', '#tenthPicIframe', `${data.tenth_pic}`, 'pdf');
            displayFile('.pucPicDiv', '#pucPic', '#pucPicIframe', `${data.puc_pic}`, 'pdf');
            displayFile('.degreePicDiv', '#degreePic', '#degreePicIframe', `${data.degree_pic}`, 'pdf');
            displayFile('.offerLetterDiv', '#offerLetterPic', '#offerLetterIframe', `${data.offer_letter}`, 'pdf');

            function displayFile(divSelector, imgSelector, iframeSelector, fileData, fileType) {
                if (fileData) {
                    if (fileType === 'image') {
                        const imageSrc = fileData;
                        $(imgSelector).attr('src', imageSrc).show();
                        $(iframeSelector).hide();
                    } else if (fileType === 'pdf') {
                        const pdfSrc = fileData;
                        $(iframeSelector).attr('src', pdfSrc).show();
                        $(imgSelector).hide();
                    } else {
                        console.warn("Unsupported file format for selector:", divSelector);
                        $(iframeSelector).hide().after('<p>No data available</p>');
                    }
                    $(divSelector).show();
                } else {
                    console.warn("No file data provided for:", divSelector);
                    $(iframeSelector).hide();
                    $(imgSelector).hide();
                    $(divSelector).append('<p>No file uploaded</p>');
                }
            }
        },
        error: function(xhr, status, error) {
            console.error("Error invoking data:", error);
        }
    });
}

function documentOnlyUploadView2() {
	document.getElementById('loadingPopup').style.display = 'flex';
    $.ajax({
        type: "GET",
        url: "fetchEmployeeDocumentDetailsOnlyByEmpId",
        data: {
            "emp_id": $('#emp_idValue').val()
        },
        success: function(data) {
            //console.log("PGGGGGGGG ---- "+JSON.stringify(data.pg_pic));
            
            // Apply displayFile for each document
            displayFile('.profilePicDiv1', '#profilePic1', '#profilePicIframe1', `${data.profilePicPath}`, 'image');
            displayFile('.panPicDiv1', '#panPic1', '#panPicIframe1', `${data.panPicPath}`, 'image');
            displayFile('.aadharPicDiv1', '#aadharPic1', '#aadharPicIframe1', `${data.aadhar_pic}`, 'pdf');
            displayFile('.tenthPicDiv1', '#tenthPic1', '#tenthPicIframe1', `${data.tenth_pic}`, 'pdf');
            displayFile('.pucPicDiv1', '#pucPic1', '#pucPicIframe1', `${data.puc_pic}`, 'pdf');
            displayFile('.degreePicDiv1', '#degreePic1', '#degreePicIframe1', `${data.degree_pic}`, 'pdf');
            displayFile('.pgDiv1', '#pgPic1', '#pgIframe1', `${data.pg_pic}`, 'pdf');
            displayFile('.expLetterDiv1', '#expLetterPic1', '#expLetterIframe1', `${data.exp_letter_pic}`, 'pdf');
            displayFile('.payslipDocDiv1', '#payslipDocPic1', '#payslipDocIframe1', `${data.payslip_pic}`, 'pdf');
            displayFile('.offerLetterDiv1', '#offerLetterPic1', '#offerLetterIframe1', `${data.offer_letter}`, 'pdf');
            displayFile('.diplomaDocDiv1', '#diplomaPic1', '#diplomaDocIframe1', `${data.diploma_pic}`, 'pdf');
            displayFile('.bankOrChequeDiv1', '#bankOrChequePic1', '#bankOrChequeIframe1', `${data.bank_check_pic}`, 'pdf');
            displayFile('.othersDocDiv1', '#othersPic1', '#othersDocIframe1', `${data.other_pic}`, 'pdf');
            displayFile('.othersDocDiv2', '#othersPic2', '#othersDocIframe2', `${data.other_pic2}`, 'pdf');
            displayFile('.othersDocDiv3', '#othersPic3', '#othersDocIframe3', `${data.other_pic3}`, 'pdf');
            displayFile('.othersDocDiv4', '#othersPic4', '#othersDocIframe4', `${data.other_pic4}`, 'pdf');

            function displayFile(divSelector, imgSelector, iframeSelector, fileData, fileType) {
            	if (fileData && fileData !== "null" && fileData !== null) {
                    if (fileType === 'image') {
                        const imageSrc = fileData;
                        $(imgSelector).attr('src', imageSrc).show();
                        $(iframeSelector).hide();
                    } else if (fileType === 'pdf') {
                        const pdfSrc = fileData;
                        $(iframeSelector).attr('src', pdfSrc).show();
                        $(imgSelector).hide();
                    } else {
                        console.warn("Unsupported file format for selector:", divSelector);
                        $(iframeSelector).hide().after('<p>No data available</p>');
                    }
                    $(divSelector).show();
                } else {
                    console.warn("No file data provided for:", divSelector);
                    
                    if (fileType === 'image') {
                        $(imgSelector).attr('src', 'assets/img/no_img_available.png').show();
                        $(iframeSelector).hide();
                    } else if (fileType === 'pdf') {
                        $(iframeSelector).attr('src', 'assets/img/no_img_available.pdf').show();
                        $(imgSelector).hide();
                    } else {
                        console.warn("Unsupported file format for selector:", divSelector);
                        $(iframeSelector).hide().after('<p>No data available</p>');
                    }
                    
                    //$(iframeSelector).hide();
                   	//$(imgSelector).hide();
                    //$(divSelector).append('<p>No file uploaded</p>');
                    $(divSelector).show();
                }
            }
            
            document.getElementById('loadingPopup').style.display = 'none';
        },
        error: function(xhr, status, error) {
            console.error("Error invoking data:", error);
            document.getElementById('loadingPopup').style.display = 'none';
        }
    });
}
</script>



<script>
    document.getElementById("docUploadForm").addEventListener("submit", function(event) {
        event.preventDefault(); // Prevent default form submission

        let formData = new FormData(this); // Create form data object

        fetch("updateEmployeeDocUploads", {
            method: "POST",
            body: formData
        })
        .then(response => {
            if (response.ok) {
                return response.text();
            } else {
                throw new Error("Failed to update documents");
            }
        })
        .then(data => {
        	location.reload();
        	/* const messageDiv = document.getElementById("message");
            messageDiv.style.display = "block";
            messageDiv.className = "alert alert-success alert-dismissible fade show";
            document.getElementById("messageSpan").innerHTML = data;
            messageDiv.focus(); */
        })
        .catch(error => {
        	const messageDiv = document.getElementById("message");
            messageDiv.style.display = "block";
            messageDiv.className = "alert alert-danger alert-dismissible fade show";
            document.getElementById("messageSpan").innerHTML = error.message;
            messageDiv.focus();
        });
    });
    
    document.getElementById("docUploadForm2").addEventListener("submit", function(event) {
        event.preventDefault(); // Prevent default form submission

        let formData = new FormData(this); // Create form data object

        fetch("updateEmployeeDocUploads", {
            method: "POST",
            body: formData
        })
        .then(response => {
            if (response.ok) {
                return response.text();
            } else {
                throw new Error("Failed to update documents");
            }
        })
        .then(data => {
        	location.reload();
        	/* const messageDiv = document.getElementById("message");
            messageDiv.style.display = "block";
            messageDiv.className = "alert alert-success alert-dismissible fade show";
            document.getElementById("messageSpan").innerHTML = data;
            messageDiv.focus(); */
        })
        .catch(error => {
        	const messageDiv = document.getElementById("message");
            messageDiv.style.display = "block";
            messageDiv.className = "alert alert-danger alert-dismissible fade show";
            document.getElementById("messageSpan").innerHTML = error.message;
            messageDiv.focus();
        });
    });
</script>


<!-- script to validate user profile form -->
<script>
document.addEventListener('DOMContentLoaded', function () {
    // Validation functions for each field
    function validateEmpId() {
        const empId = document.getElementById('empId');
        const error = document.getElementById('empId_error');
        if (!empId.value.trim()) {
            error.textContent = 'Employee ID is required.';
        } else {
            error.textContent = '';
        }
    }

    function validateFirstName() {
        const firstName = document.getElementById('first_name');
        const error = document.getElementById('firstName_error');
        if (!firstName.value.trim()) {
            error.textContent = 'First name is required.';
        } else {
            error.textContent = '';
        }
    }

    function validateEmail() {
        const email = document.getElementById('email');
        const error = document.getElementById('email_error');
        const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        if (!email.value.trim() || !emailRegex.test(email.value)) {
            error.textContent = 'Enter a valid email address.';
        } else {
            error.textContent = '';
        }
    }

    function validateMobile() {
        const mobile = document.getElementById('mobile_no');
        const error = document.getElementById('mobile_error');
        const mobileRegex = /^\d{10}$/;
        if (!mobile.value.trim() || !mobileRegex.test(mobile.value)) {
            error.textContent = 'Enter a valid 10-digit mobile number.';
        } else {
            error.textContent = '';
        }
    }

    function validateDept() {
        const dept = document.getElementById('deptId');
        const error = document.getElementById('dept_error');
        if (!dept.value.trim()) {
            error.textContent = 'Please select a department.';
        } else {
            error.textContent = '';
        }
    }

    function validateGender() {
        const gender = document.getElementById('gender');
        const error = document.getElementById('gender_error');
        if (!gender.value.trim()) {
            error.textContent = 'Please select your gender.';
        } else {
            error.textContent = '';
        }
    }

    function validateAddress() {
        const address = document.getElementById('address');
        const error = document.getElementById('address_error');
        if (!address.value.trim()) {
            error.textContent = 'Address is required.';
        } else {
            error.textContent = '';
        }
    }

    function validateDOB() {
        const dob = document.getElementById('dob');
        const error = document.getElementById('dob_error');
        if (!dob.value.trim()) {
            error.textContent = 'Date of Birth is required.';
        } else {
            error.textContent = '';
        }
    }

    function validateDOJ() {
        const doj = document.getElementById('doj');
        const error = document.getElementById('doj_error');
        if (!doj.value.trim()) {
            error.textContent = 'Date of Joining is required.';
        } else {
            error.textContent = '';
        }
    }
    
    function validateprimaryContactMobile() {
        const mobile = document.getElementById('primary_emergency_contact_number');
        const error = document.getElementById('primary_emergency_contact_number_error');
        const mobileRegex = /^\d{10}$/;
        if (!mobile.value.trim() || !mobileRegex.test(mobile.value)) {
            error.textContent = 'Enter a valid 10-digit mobile number.';
        } else {
            error.textContent = '';
        }
    }
    
    function validateSecondaryContactMobile() {
        const mobile = document.getElementById('secondary_emergency_contact_number');
        const error = document.getElementById('secondary_emergency_contact_number_error');
        const mobileRegex = /^\d{10}$/;
        if (!mobile.value.trim() || !mobileRegex.test(mobile.value)) {
            error.textContent = 'Enter a valid 10-digit mobile number.';
        } else {
            error.textContent = '';
        }
    }
    
  /*   function validateAadhar() {
        const aadhar = document.getElementById('aadhar');
        const error = document.getElementById('aadhar_error');
        
        const aadharRegex = /^\d{12}$/;

        if (!aadhar.value.trim()) {
            error.textContent = 'Aadhar number is required.'; 
        } else if (!aadharRegex.test(aadhar.value)) {
            error.textContent = 'Enter a valid 12-digit Aadhar number.';
        } else {
            error.textContent = '';
        }
    }*/
    
    function validatePAN() {
        var panInput = document.getElementById("pan");
        var panError = document.getElementById("pan_error");
        //var panPattern = /^[A-Z]{5}[0-9]{4}[A-Z]$/;
        var panPattern     = /^([a-zA-Z]){5}([0-9]){4}([a-zA-Z]){1}?$/;
        if(panPattern.test(panVal)){
        	   // valid pan card number.
        	   panError.innerHTML = "";
               panInput.style.borderColor = "";
        	   return true;  // Allow form submission
        	} else {
        	   // invalid pan card number
        	   panError.innerHTML = "<span style='color: red;'>Invalid PAN format</span>";
               panInput.style.borderColor = "red";
        	   return false;  // Prevent form submission
        	}

       /*  if (!panPattern.test(panInput.value)) {
            panError.innerHTML = "<span style='color: red;'>Invalid PAN format</span>";
            panInput.style.borderColor = "red";
            return false;  // Prevent form submission
        } else {
            panError.innerHTML = "";
            panInput.style.borderColor = "";
            return true;  // Allow form submission
        } */
    }

    // Attach blur event listeners to fields
    document.getElementById('empId').addEventListener('blur', validateEmpId);
    document.getElementById('first_name').addEventListener('blur', validateFirstName);
    document.getElementById('email').addEventListener('blur', validateEmail);
    document.getElementById('mobile_no').addEventListener('blur', validateMobile);
    document.getElementById('deptId').addEventListener('blur', validateDept);
    document.getElementById('gender').addEventListener('blur', validateGender);
    document.getElementById('address').addEventListener('blur', validateAddress);
    document.getElementById('dob').addEventListener('blur', validateDOB);
    document.getElementById('doj').addEventListener('blur', validateDOJ);
    document.getElementById('primary_emergency_contact_number').addEventListener('blur', validateprimaryContactMobile);
    document.getElementById('secondary_emergency_contact_number').addEventListener('blur', validateSecondaryContactMobile);
    document.getElementById('aadhar').addEventListener('blur', validateAadhar);
    document.getElementById('pan').addEventListener('blur', validatePAN);
    
    // Allow only numbers in the mobile_no field
    document.getElementById('mobile_no').addEventListener('input', function () {
        this.value = this.value.replace(/[^0-9]/g, '');
    });
});
//Prevent form submission if PAN is invalid
document.getElementById("editForm").addEventListener("submit", function(event) {
    if (!validatePAN()) {  
        event.preventDefault();  // Prevent form submission  
        alert("Please enter a valid PAN number.");  
        return false;  // Ensure function stops further execution  
    }
});

//script to disable the update button upto all error clear

</script>
<!-- script to update the permission -->
<!-- <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script> -->
 <script src="assets/js/jquery-3.6.4.min.js"></script> 
<script>
$(document).ready(function() { 
    // Bind the 'change' event to both checkboxes
    $('.form-check-input').on('change', function() {
        var isChecked = $(this).is(':checked');
        var permissionType = $(this).attr('id');  // Get the id of the checkbox (e.g., 'interviewAccess' or 'salesAccess')
        
        // Retrieve employeeId from the parent div's data-empid attribute
        var employeeId = document.getElementById("employeeId").value;
        //alert(employeeId);
        // Data to be sent with the request
        var data = {
            "userId": employeeId,
            "permissionType": permissionType,  // Send the permission type (interviewAccess or salesAccess)
            "enabled": isChecked
        };
        
        // Confirming values        
        $.ajax({
            url: '/updateInterviewPermission',  // Same endpoint
            type: 'POST',
            contentType: 'application/json', // Specify content type
            data: JSON.stringify(data),  // Send the data with the request
            success: function(response) {
                console.log('Permission updated successfully');
            },
            error: function(xhr, status, error) {
                console.error('Failed to update permission:', error);
                console.error('Response text:', xhr.responseText);
            }
        });
    });
});

/* enable and disable the sales */

/* $(document).ready(function() {
    $('#salesAccess').on('change', function() {
        var isChecked = $(this).is(':checked');
        var employeeId = document.getElementById("employeeId").value;
        
        // Confirming values        
        $.ajax({
            url: '/updateSalesPermission',
            type: 'POST',
            contentType: 'application/json', // Specify content type
            data: JSON.stringify({
                "userId": employeeId,
                "enabled": isChecked
            }),
            success: function(response) {
                console.log('Permission updated successfully');
            },
            error: function(xhr, status, error) {
                console.error('Failed to update permission:', error);
                console.error('Response text:', xhr.responseText);
            }
        });
    });
}); */


</script>
<script>
document.addEventListener('DOMContentLoaded', function () {
    // Get the employee ID from the hidden input field
    const emailElement = document.getElementById("employeeEmail"); // Use ID for easier targeting
    const email = emailElement.textContent.trim();
    displayLeaveBalance(email);
});
//function to display leave balance modal
function displayLeaveBalance(email){
	
    // Remove surrounding double quotes if they exist
    email = email.replace(/^"|"$/g, ''); 
	
	
	fetch(`/leaveRecords/${email}`, { method: 'GET' })
		                .then(response => {
		                    console.log("Fetch request sent for leave records");

		                    if (!response.ok) {
		                        throw new Error('Network response was not ok for leave records');
		                    }
		                    return response.json();
		                })
		                .then(data => {
		                    console.log("Leave records data received from backend:", data);

		                    const tbody = document.querySelector('#leaveRecordsTable');
		                    tbody.innerHTML = ''; // Clear existing rows

		                    if (!data || data.length === 0) {
		                        const sickLeaveRow = document.createElement('tr');
		                        sickLeaveRow.innerHTML = `
		                            <td>Sick Leave</td>
		                            <td>0</td>
		                            <td>0</td>
		                            <td>0</td> 
		                        `;
		                        tbody.appendChild(sickLeaveRow);

		                        const casualLeaveRow = document.createElement('tr');
		                        casualLeaveRow.innerHTML = `
		                            <td>Casual Leave</td>
		                            <td>0</td>
		                            <td>0</td>
		                            <td>0</td>
		                        `;
		                        tbody.appendChild(casualLeaveRow);
		                    } else {
		                        data.forEach(record => {
		                            const row = document.createElement('tr');
		                            row.innerHTML = `
		                                <td>${record.leaveType}</td>
		                                <td>${record.totalAdded || '0'}</td>
		                                <td>${record.totalUsed || '0'}</td>
		                                <td>${record.remaining || '0'}</td>
		                            `;
		                            tbody.appendChild(row);
		                        });
		                    }

		                    return fetch('/fetchMaternityLeave/${email}', { method: 'GET' });
		                })
		                 .then(() => fetch(`/calculate-earned-leave?year=${new Date().getFullYear()}&email=${email}`, { method: 'GET' }))
		                .then(response => {
		                    console.log("Fetch request sent for calculated earned leave");
		                    console.log("Fetch request sent for calculated earned leave");
		                    console.log("Calculated Earned Leave Response Status:", response.status);

		                    if (!response.ok) {
		                        throw new Error('Network response was not ok for calculated earned leave');
		                    }
		                    return response.json();
		                })
		                .then(earnedLeave => {
		                    console.log("Calculated leave data received from backend:", earnedLeave);

		                    const row = document.createElement('tr');
		                    row.innerHTML = `
		                        <td>Earned Leave</td>
		                        <td>${earnedLeave.earnedLeave || '0'}</td>
		                        <td>${earnedLeave.elUsed || '0'}</td>
		                        <td>${earnedLeave.elRemaining || '0'}</td>
		                    `;
		                    const tbody = document.querySelector('#leaveRecordsTable');
		                    tbody.appendChild(row);

		                    // Hide the spinner and show the modal
		                   // loadingSpinner.style.display = "none";

		                    const modal = new bootstrap.Modal(document.getElementById('leaveDetailsModal'));
		                    modal.show();
		                })
		                .catch(error => {
		                    console.error('Error fetching data:', error);
		                    // Hide the spinner on error
		                    //loadingSpinner.style.display = "none";
		                });
	
	const modal = new bootstrap.Modal(document.getElementById('leaveDetailsModal'));
    modal.show();
}

function editLeave(leaveType) {
    alert(leaveType);
    // Add your edit functionality here
}
</script>

<!-- script to notification on bottom of the page-->
<!--CHAT BOOT-->

		<!-- Include SockJS and Stomp.js libraries -->
		<script src="https://cdnjs.cloudflare.com/ajax/libs/sockjs-client/1.3.0/sockjs.min.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/stomp.js/2.3.3/stomp.min.js"></script>

<!-- script to notification on bottom of the page-->
<script>
		//CODE FOR CHATBOOT NOTIFICATION 
		var stompClient = null;
		var employeeMap = {}; // To store the mapping of employee names to emails
		let employeePhotoMap = {};
		let emailToNameMap = {}; // New map for email -> name lookup
		var email = null;
		var visibilityState = document.visibilityState; // Track tab visibility
		var heartbeatInterval = null; // Track heartbeat interval

		function connectWebSocket() {
			
			var socket = new SockJS('/chat-websocket');
						  stompClient = Stomp.over(socket);

						  var email = document.getElementById('loggedInMail').value;
						  console.log(`Connecting WebSocket as: ${email}`);

						  stompClient.connect({ 'email': email }, function (frame) {
						      console.log('Connected to WebSocket:', frame);

							 // subscribeToTypingEvents();
						      // Mark user as active
						      stompClient.send("/app/userConnected", {}, JSON.stringify({ email }));

						      // Subscribe to active users list
						      stompClient.subscribe('/topic/activeUsers', function (message) {
						          var activeUsers = JSON.parse(message.body);
						          updateActiveUserUI(activeUsers);
						      });
							  // Subscribe to user messages
							        stompClient.subscribe('/user/queue/messages', function (message) {
									//	loadMessages();
									//	alert("po2");
							            console.log('Raw WebSocket Message:11', message);
							            var msg = JSON.parse(message.body);
										//alert(msg);
							            console.log('Parsed Messag111e:', msg);
							            console.log(`Received messagesdsd: ${JSON.stringify(msg)}`);
										//alert("(message.read"+msg.read);
									
							            // Display message if it matches the selected employee
							            if (selectedEmployee === msg.senderEmail || selectedEmployee === msg.recipientEmail) {
											console.log(`New message fromss ${msg.senderEmail}: ${msg.content}`);
											console.log("plk "+selectedEmployee);
											console.log("plk "+msg.senderEmail);
											console.log("plk "+msg.recipientEmail);
											//loadMessages();
							                showMessage(
							                    msg.id,               // Message ID
							                    msg.senderEmail,      // Sender's email
							                    msg.content,          // Message content
							                    msg.recipientEmail,   // Recipient's email
							                    msg.timestamp,        // Message timestamp
							                    email,
												msg.read                    // Logged-in user's email
							                );
							            }
								
										loadEmployees();
										loadMessages();
									 	
							        });

							        // Subscribe to notifications
							        stompClient.subscribe('/user/queue/notifications', function (notification) {
										//alert("00");
							            console.log('New Notification:', notification.body);
							            showToastNotification(notification.body);
										loadEmployees();
										//alert("01");
							        });

									//alert("Subscribing to chat updates...");
									stompClient.subscribe('/user/queue/messages', function (message) {
									    console.log('WebSocket Chat Update Received:', message.body); // Log raw message

									    let parsedMessage = JSON.parse(message.body);
									    console.log('Parsed Message:', parsedMessage); // Log parsed JSON

									    if (Array.isArray(parsedMessage)) {
									        parsedMessage.forEach(msg => {
									            console.log(`Message ID: ${msg.id}, Read: ${msg.read}`);
									            if (msg.read) {
									                updateMessageUI(msg);
									            }
									        });
									    } else {
									        console.log("Unexpected message format:", parsedMessage);
									    }

									    // Refresh messages after a delay
									    setTimeout(() => {
									        console.log("Refreshing messages...");
									        loadMessages();
									    }, 3000);
									});

									stompClient.subscribe('/topic/typing', function (message) {
									    console.log("📩 Typing notification received:", message.body);

									    let typingData;
									    try {
									        typingData = JSON.parse(message.body);
									        console.log("✅ Parsed Typing Data:", typingData);
									    } catch (error) {
									        console.error("❌ Error parsing typing notification message:", error);
									        return;
									    }

									    let loggedInUserEmail = document.getElementById('loggedInMail')?.value;
									    if (!loggedInUserEmail) return;

									    if (loggedInUserEmail === typingData.recipientEmail && typingData.senderEmail === selectedEmployee) {
									        // Fetch actual typing status from the backend
									        fetch(`/getTypingStatus?senderEmail=${typingData.senderEmail}&recipientEmail=${typingData.recipientEmail}`)
									            .then(response => response.json())
									            .then(data => {
									                console.log("🎯 Actual Typing Status from DB:", data.typing);
													console.log("🎯 Actual Typing Status from DB:", data);
													                console.log("ℹ️ Typing Status (0 or 1):", data.typing);
													                
									                let chatMessages = document.querySelector(".chat-history ul");
									                let chatContainer = document.querySelector(".chat-history"); // The scrollable chat area

									                let typingIndicator = document.getElementById("typingIndicator");
									                
									                if (!typingIndicator) {
									                    typingIndicator = document.createElement("li");
									                    typingIndicator.id = "typingIndicator";
									                    typingIndicator.classList.add("typing-indicator");
									                    typingIndicator.innerHTML = `
									                        <img src="${employeePhotoMap[selectedEmployee] || 'default-profile.jpg'}" alt="User Photo" class="typing-photo">
									                        <span>Typing...</span>
									                    `;
									                    chatMessages.appendChild(typingIndicator);
									                }

									                if (data.typing === 1) { // Ensure it checks the latest typing status
									                    typingIndicator.style.display = "flex";

									                    // Move typing indicator to the bottom
									                    chatMessages.appendChild(typingIndicator);

									                    // Auto-scroll to the bottom
									                    setTimeout(() => {
									                        chatContainer.scrollTop = chatContainer.scrollHeight;
									                    }, 100);
									                } else {
									                    typingIndicator.style.display = "none";
									                }
									            })
									            .catch(error => console.error("❌ Error fetching typing status:", error));
									    }
									});


						      // Start heartbeat initially
						      heartbeatInterval = setInterval(() => {
						          if (stompClient && stompClient.connected) {
						              stompClient.send("/app/userHeartbeat", {}, JSON.stringify({ email }));
						              console.log("Heartbeat sent for user: " + email);
						          }
						      }, 20000); // 30 seconds

						      // Detect tab visibility change
						  /*    document.addEventListener("visibilitychange", function () {
						          if (document.hidden) {
						              console.log("User switched to another tab. Marking as inactive.");
						              stompClient.send("/app/userInactive", {}, JSON.stringify({ email }));
						              clearInterval(heartbeatInterval); // Stop heartbeat
						              heartbeatInterval = null;
						          } else {
						              console.log("User returned to the application tab. Marking as active.");
						              stompClient.send("/app/userConnected", {}, JSON.stringify({ email }));
						              if (!heartbeatInterval) {
						                  heartbeatInterval = setInterval(() => {
						                      if (stompClient && stompClient.connected) {
						                          stompClient.send("/app/userHeartbeat", {}, JSON.stringify({ email }));
						                          console.log("Heartbeat sent for user: " + email);
						                      }
						                  }, 30000);
						              }
						          }
						      });*/

						      // Detect tab close or WebSocket disconnect
						      socket.onclose = function () {
						          console.log("WebSocket disconnected. Updating user status.");
						          stompClient.send("/app/userDisconnected", {}, JSON.stringify({ email }));
						      };

						      window.addEventListener('beforeunload', function () {
						          stompClient.send("/app/userDisconnected", {}, JSON.stringify({ email }));
						      });

						  });
		}

		function updateActiveUserUI(activeUsers) {
		//	alert("1");
		    const employeeItems = document.getElementById('employeeNames').getElementsByTagName('li');

		    Array.from(employeeItems).forEach(item => {
		        const employeeName = item.querySelector('span').textContent;
		        const email = employeeMap[employeeName]; 
		        const statusIndicator = item.querySelector('.status-indicator'); // Get the status dot

		        if (activeUsers.includes(email)) {
		            item.classList.add('active-user');
		            statusIndicator.style.backgroundColor = '#66cc66'; // Green for active users
		        } else {
		            item.classList.remove('active-user');
		            statusIndicator.style.backgroundColor = '#ff6666'; // Red for inactive users
		        }

		        // If this employee is currently selected, update chat header status
				if (selectedEmployee === email) {
				           const chatStatusIndicator = document.getElementById('chatStatusIndicator');
				           if (activeUsers.includes(email)) {
				               chatStatusIndicator.style.backgroundColor = '#66cc66'; // Green (Online)
				           } else {
				               chatStatusIndicator.style.backgroundColor = '#ff6666'; // Red (Offline)
				           }
				       }
		    });
		}


		// Select an employee to chat with
		function selectEmployee(employeeName) {
			selectedEmployee = employeeMap[employeeName]; // Get the email from the map
			//console.log(`Employee selected: ${selectedEmployee}`);

			// Highlight the selected employee
			var employeeItems = document.querySelectorAll('#employeeNames li');
			employeeItems.forEach(function (item) {
				item.classList.remove('active');
			});
			var selectedItem = Array.from(employeeItems).find(item => item.innerHTML === employeeName);
			if (selectedItem) {
				selectedItem.classList.add('active');
			}

			// Update chat header with employee name and photo
			document.querySelector('.chat-about h6').innerText = employeeName;
			document.querySelector('#employeePhoto').src = employeePhotoMap[selectedEmployee] || 'default-profile.jpg';

			// Hide the message icon and dots when an employee is selected
			document.getElementById('message-icon-container').style.display = 'none';
			// Hide the paragraph when an employee is selected
			document.getElementById('logo-text').style.display = 'none';

			// Load messages for the selected employee
			loadMessages();
		}

		function loadEmployees() {
			//console.log("Loading employee names...");

			// Fetch employee names from the endpoint
			fetch('/employees/names')
				.then(response => {
					//console.log("Response received:", response);
					if (!response.ok) {
						throw new Error(`HTTP error! status: ${response.status}`);
					}
					return response.json();
				})
				.then(data => {
					//console.log("Employee data fetched:", data); // Log the raw data

					const employeeList = document.getElementById('employeeNames');
					if (!employeeList) {
						console.error("Element with ID 'employeeNames' not found.");
						return;
					}

					employeeList.innerHTML = ''; // Clear the list before adding new items

					// Iterate through employee data
					data.forEach(employee => {
						//console.log("Processing employee:", employee);

						// Create a list item for each employee
						const li = document.createElement('li');
						li.classList.add('d-flex', 'align-items-center', 'employee-item');

						// Handle missing or empty profile photo paths
						const profilePic = employeePhotoMap[employee.email] || '/static/default-profile.jpg';
						//console.log(`Profile picture for ${employee.name}: ${profilePic}`);

						li.innerHTML = `
			                    <img src="${profilePic}" 
			                         alt="Employee Photo" 
			                         class="employee-photo mr-2" />
			                    <span>${employee.name}</span>
			                `;

						// Map employee name to email
						employeeMap[employee.name] = employee.email;
						console.log("Mapped employee:", employee.name, "->", employee.email);
						// Add new reverse mapping (email -> name)
						emailToNameMap[employee.email] = employee.name;
						// Add click event to list item
						li.onclick = () => {
							console.log(`Selected employee: ${employee.name}`);
							selectEmployee(employee.name);
						};

						// Append the list item to the employee list
						employeeList.appendChild(li);

					});

					//console.log("Employee names loaded successfully. Employee map:", employeeMap);
					// Call the unread messages function after loading employee data
					fetchUnreadMessages();

					// Set interval to check for new messages every 10 seconds
						setInterval(fetchUnreadMessages, 10000);
				})
				.catch(error => {
					console.error("Error loading employees:", error);
				});
		}


		function loadMessages() {
			// alert("Loading messages...");
			// Get the logged-in user's email and selected employee's email
			var loggedInEmail = document.getElementById('loggedInMail').value;
			var selectedEmployeeEmail = selectedEmployee; // Email is already stored in selectedEmployee

			//console.log(`Loading messages between: ${loggedInEmail} and ${selectedEmployeeEmail}`);

			fetch(`/messages?loggedInEmail=${encodeURIComponent(loggedInEmail)}&selectedEmployeeEmail=${encodeURIComponent(selectedEmployeeEmail)}`)
				.then(response => response.json())
				.then(data => {
					//console.log("Chat messages loaded:", data);
					// Clear the chat window before displaying messages
					var chatWindow = document.getElementById('chat-window').querySelector('ul');
					chatWindow.innerHTML = '';

					// Display messages
					data.forEach(function (msg) {
						// showMessage(msg.senderEmail, msg.content, msg.recipientEmail, loggedInEmail);
						showMessage(msg.id, msg.senderEmail, msg.content, msg.recipientEmail, msg.timestamp, loggedInEmail);
					});
				})
				.catch(error => console.error("Error loading chat messages:", error));
		}
		let activeDeleteDropdown = null;
		function showMessage(id, senderEmail, message, recipientEmail, timestamp, loggedInEmail, read, repliedMessage) {
		    console.log("Message ID:", id);
		    console.log(`LoggedInEmail: ${loggedInEmail}, SenderEmail: ${senderEmail}`);
		    console.log(`Message ID: ${id}, Read Status: ${read}`);

		    const isSender = senderEmail === loggedInEmail;
		    const senderName = isSender ? "Me" : Object.keys(employeeMap).find(name => employeeMap[name] === senderEmail) || senderEmail;
		    const senderPhoto = employeePhotoMap[senderEmail] || 'default-avatar.png';
		    const formattedTime = new Date(timestamp).toLocaleString(); // Format timestamp

		    var chatWindow = document.getElementById('chat-window').querySelector('ul');
		    var li = document.createElement('li');
		    li.className = isSender ? 'clearfix right' : 'clearfix left';

			let replySection = "";
			if (repliedMessage) {
			    const isReplySender = repliedMessage.senderEmail === loggedInEmail;
			    const repliedSenderName = isReplySender ? "Me" : Object.keys(employeeMap).find(name => employeeMap[name] === repliedMessage.senderEmail) || repliedMessage.senderEmail;

			    replySection = `
			        <div class="replied-message ${isSender ? 'right' : 'left'}">
			            <strong>${repliedSenderName}:</strong> ${repliedMessage.content}
			        </div>`;
			}


		    li.innerHTML = `
		        <div class="message-container" data-message-id="${id}" >
		            <img class="sender-photo" src="${senderPhoto}" alt="Sender Photo" />
		            <div class="message ${isSender ? 'my-message' : 'other-message'}">
		                ${replySection} <!-- Show the replied message if available -->
		                <strong>${senderName}:</strong> ${message}
		            </div>
					
		        </div>
		        <div class="timestamp" style="text-align: ${isSender ? 'right' : 'left'};">
		            ${formattedTime} ${isSender && read ? '<span class="read-receipt" style="font-size: 12px; color: gray; margin-left: 2px; display: inline;position: relative; top: -2px;">✔️</span>' : ''}
		        </div>
		        ${isSender ? `
		            <div class="message-action-dropdown">
		                <a class="dropdown-item" href="#" onclick="deleteMessage(this, ${id})">Delete Message</a>
		            </div>
		        ` : ''}
		    `;

		    chatWindow.appendChild(li);
		    li.scrollIntoView({ block: "end" });
		}
		
		function deleteMessage(deleteButton, messageId) {
			// Check if the message ID is valid
			if (!messageId) {
				console.error('Message ID is invalid or undefined.');
				return;
			}

			// Show confirmation dialog before proceeding
			Swal.fire({
				title: 'Delete message for you?',
				text: "This will remove the message only for you!",
				icon: 'warning',
				showCancelButton: true,
				confirmButtonColor: '#d33',
				cancelButtonColor: '#3085d6',
				confirmButtonText: 'Yes, delete it!',
				customClass: {
					popup: 'smaller-swal-popup', // Apply custom CSS class
				},
			}).then((result) => {
				if (result.isConfirmed) {
					// Proceed with deletion if confirmed
					console.log(`Sending DELETE request for message ID: ${messageId}`);

					// Find the parent `li` containing the message
					const messageElement = deleteButton.closest('li');
					console.log('Message container (li):', messageElement);

					if (!messageElement) {
						console.error('Could not find the message container (li).');
						return;
					}
					var loggedInEmail = document.getElementById('loggedInMail').value;
					// Send an AJAX request to delete the message from the backend
					fetch(`/deleteMessage/${messageId}?loggedInEmail=${loggedInEmail}`, {
						method: 'DELETE',
						headers: {
							'Content-Type': 'application/json',
						},
					})
						.then((response) => {
							if (response.ok) {
								// Remove the message from the chat window
								messageElement.remove();
								console.log(`Message ID ${messageId} deleted successfully`);

								// Show smaller success message
								Swal.fire({
									title: 'Deleted!',
									text: 'Your message has been deleted.',
									icon: 'success',
									customClass: {
										popup: 'smaller-swal-success', // Apply custom CSS class for success message
									},
								});
							} else {
								console.error(
									`Failed to delete the message with ID ${messageId}`
								);
							}
						})
						.catch((error) => {
							console.error('Error deleting message:', error);
						});
				}
			});
		}

		
		/*function fetchUnreadMessages() {
			console.log("Fetching unread messages...");
			var loggedInEmail = document.getElementById('loggedInMail').value;

			fetch(`/unread?email=${loggedInEmail}`)
				.then(response => response.json())
				.then(messages => {
					messages.forEach(message => {
						let senderName = emailToNameMap[message.senderEmail] || message.senderEmail;

						// Show notification with sender's email as a parameter
						showToastNotification(`New message from ${senderName}: ${message.content}`, message.senderEmail);
					});
				})
				.catch(error => console.error("Error fetching unread messages:", error));
		}*/

		let displayedMessageIds = new Set(); // Track displayed messages
		let closedMessageIds = new Set(); // Track closed messages

		function fetchUnreadMessages() {
		    //console.log("Fetching unread messages...");
		    var loggedInEmail = document.getElementById('loggedInMail').value;

		    fetch(`/unread?email=${loggedInEmail}`)
		        .then(response => response.json())
		        .then(messages => {
		            messages.forEach(message => {
		                //console.log("Processing message ID:", message.id); // Print message ID to console
		                
		                // Ignore messages that were previously closed
		                if (!displayedMessageIds.has(message.id) && !closedMessageIds.has(message.id)) {
							//alert(1);
		                    let senderName = emailToNameMap[message.senderEmail] || message.senderEmail;
		                    showToastNotification(`New message from ${senderName}: ${message.content}`, message.id, message.senderEmail);
		                    displayedMessageIds.add(message.id); // Mark message as displayed
		                }
						//alert(2);
		            });
		        })
		        .catch(error => console.error("Error fetching unread messages:", error));
		}
		// Global flag to track if the user manually dismissed notifications
		
		/*function showToastNotification(message, senderEmail) {
			
			var toastContainer = document.createElement('div');
			toastContainer.className = 'toast-notification';

			// Add message and close button
			toastContainer.innerHTML = `<p>${message}</p> <span class="toast-close">✖</span>`;

			document.body.appendChild(toastContainer);

			// Animate in
			setTimeout(() => {
				toastContainer.classList.add('show');
			}, 100);

			// Auto-hide after 8 seconds
			let autoHideTimeout = setTimeout(() => closeToast(toastContainer), 10000);

			// Prevent opening chat when clicking the close button
			toastContainer.querySelector('.toast-close').addEventListener('click', (event) => {
				event.stopPropagation(); // Prevent click from bubbling to toastContainer
				clearTimeout(autoHideTimeout);
				
				closeToast(toastContainer);
			});

			// Open chat when clicking on the notification
			toastContainer.addEventListener('click', () => {
				openChatWithSender(senderEmail);
				closeToast(toastContainer); // Remove notification when chat opens
			});
		}*/
		function showToastNotification(message, messageId, senderEmail) {
			//alert(1);
		    var toastContainer = document.createElement('div');
		    toastContainer.className = 'toast-notification';
		    toastContainer.innerHTML = `<p>${message}</p> <span class="toast-close">✖</span>`;

		    document.body.appendChild(toastContainer);

		    // Animate in
		    setTimeout(() => {
		        toastContainer.classList.add('show');
		    }, 100);

		    // Auto-hide after 8 seconds
		    let autoHideTimeout = setTimeout(() => closeToast(toastContainer, messageId), 8000);

		    // Prevent opening chat when clicking the close button
		    toastContainer.querySelector('.toast-close').addEventListener('click', (event) => {
		        event.stopPropagation(); // Prevent click from bubbling to toastContainer
		        clearTimeout(autoHideTimeout);
		        closedMessageIds.add(messageId); // Mark as closed so it won't be shown again
		        closeToast(toastContainer, messageId);
		    });

		    // Open chat when clicking on the notification
		    toastContainer.addEventListener('click', () => {
		        openChatWithSender(senderEmail);
		        closeToast(toastContainer, messageId); // Remove notification when chat opens
		    });
		}

		// Function to handle toast closing
		/*function closeToast(toast) {
			toast.classList.remove('show');
			setTimeout(() => toast.remove(), 300); // Faster fade-out
		}*/
		// Function to handle toast closing and mark as dismissed
		// Function to handle toast closing
		function closeToast(toast, messageId) {
		    toast.classList.remove('show');
		    setTimeout(() => toast.remove(), 300); // Faster fade-out
		}
		/*	function openChatWithSender(senderEmail) {
				console.log("Opening chat with:", senderEmail);
			    
				// Construct the URL for the UserFavorite page with the senderEmail as a query parameter
				const url = `/my-favorites?email=${encodeURIComponent(senderEmail)}`;
			    
				// Redirect to the UserFavorite page
				window.location.href = url;
			}*/

		function openChatWithSender(senderEmail) {
			//console.log("Opening chat with:", senderEmail);

			// Store sender email in sessionStorage
			sessionStorage.setItem("chatSenderEmail", senderEmail);

			// Redirect to the UserFavorite page
			window.location.href = `/my-favorites`;
		}

		// Connect to the WebSocket server and load employees when the page is loaded
		document.addEventListener('DOMContentLoaded', function () {
			//fetchUnreadMessages();
			loadEmployees();
			connectWebSocket();
		});

	</script>

<!-- script to fetch the asset detail based profile employee id -->
<script>
document.addEventListener("DOMContentLoaded", function () {
    const assetTabButton = document.getElementById("assetsTabBtn");
    const empId = document.getElementById("profileEmpId").textContent.trim();

    assetTabButton.addEventListener("click", function () {
        const container = document.getElementById("profile-assets");

        // Show the request button regardless of data
        let contentHTML = `
            <div class="d-flex justify-content-end mb-2">
                <button type="button" class="btn btn-primary mb-1" data-bs-toggle="modal" data-bs-target="#assetRequestModal">
                    Request
                </button>
            </div>
        `;

        fetch(`/getAssetsByEmpId?empId=${encodeURIComponent(empId)}`)
            .then(response => {
                if (response.status === 204) {
                    container.innerHTML = contentHTML + `<p>No assets assigned.</p>`;
                    return [];
                }
                if (!response.ok) throw new Error("Network error");
                return response.json();
            })
            .then(data => {
                if (!data || data.length === 0) {
                    container.innerHTML = contentHTML + `<p>No assets assigned.</p>`;
                    return;
                }

                // Append table if data exists
                let tableHTML = `
                    <div class="table-fixed-height">
                        <table class="table table-hover sticky-header-table">
                            <thead class="table-light">
                                <tr>
                                    <th>Sl</th>
                                    <th>Asset Type</th>
                                    <th>Asset ID</th>
                                    <th>Assigned Asset ID</th>
                                    <th>Remarks</th>
                                </tr>
                            </thead>
                            <tbody>
                `;

                data.forEach((item, index) => {
                    tableHTML += `
                        <tr>
                            <td>${index + 1}</td>
                            <td>${item.assetType}</td>
                            <td>${item.ref_asset_id}</td>
                            <td>${item.assignedAssetId}</td>
                            <td>${item.remarks}</td>
                        </tr>
                    `;
                });

                tableHTML += `
                            </tbody>
                        </table>
                    </div>
                `;

                container.innerHTML = contentHTML + tableHTML;
            })
            .catch(error => {
                console.error("Error fetching assets:", error);
                container.innerHTML = contentHTML + `<p class='text-danger'>Failed to load assets.</p>`;
            });
    });
});
</script>

<!-- script to submit the asset request -->
<script>
document.addEventListener("DOMContentLoaded", function () {
    const form = document.getElementById("assetRequestForm");

    form.addEventListener("submit", function (event) {
        event.preventDefault(); // Prevent normal form submission

        const formData = new FormData(form);

        fetch("/save", {
            method: "POST",
            body: formData
        })
        .then(response => {
            if (response.ok) {
                // ✅ Reload the page after successful submission
                location.reload();
            } else {
                return response.text().then(text => { throw new Error(text); });
            }
        })
        .catch(error => {
            console.error("Request failed:", error);
            alert("Failed to submit asset request.");
        });
    });
});
</script>

<script>
	function showLoadingPopup(){
		document.getElementById('loadingPopup').style.display = 'flex';
	}
	
	document.addEventListener('DOMContentLoaded', function () {
		
		const form = document.querySelector("#updateEmployeeForm");
	    const submitButton = document.getElementById("updateEmpBtn");
	    
	    const form2 = document.querySelector("#docUploadForm2");
	    const submitButton2 = document.getElementById("docUploadUpdateBtn");
	    
	    form.addEventListener("input", function() {
	        submitButton.removeAttribute("disabled");
	    });
	    
	    form2.addEventListener("input", function() {
	        submitButton2.removeAttribute("disabled");
	    });
		
	    /* const form = document.getElementById('passwordChangeForm');
	    
	    const currentPassword = document.getElementById('currentPassword');
	    const newPasswordField = document.getElementById('newPassword');
	    const renewPasswordField = document.getElementById('renewPassword');
	    const empIdField = form.querySelector('input[name="empId"]');
	    
	    const successAlert = document.querySelector('.alert-success');
	    const errorAlert = document.querySelector('.alert-danger');

	    form.addEventListener('submit', function (event) {
	        event.preventDefault(); // Prevent the default form submission

	        const newPassword = newPasswordField.value;
	        const renewPassword = renewPasswordField.value;

	        // Clear any previous alerts
	        successAlert.style.display = 'none';
	        errorAlert.style.display = 'none';

	        if (newPassword !== renewPassword) {
	            errorAlert.querySelector('span').textContent = 'New Password and Re-enter New Password do not match.';
	            errorAlert.style.display = 'block';
	            return;
	        }
			
	        // Create a FormData object from the form
	        const formData = new FormData();
	        formData.append('newPassword', newPassword);
	        formData.append('empId', empIdField.value);
	        formData.append('currentPassword', currentPassword.value);
	        
	        // Prepare the AJAX request
	        fetch('/updatePassword', {
	            method: 'POST',
	            body: formData
	        })
	        .then(response => response.json())
	        .then(data => {
	            if (data.success) {
	                successAlert.querySelector('span').textContent = 'Password updated successfully!';
	                successAlert.style.display = 'block';
	            } else {
	                errorAlert.querySelector('span').textContent = 'Error updating password: ' + data.message;
	                errorAlert.style.display = 'block';
	            }
	        })
	        .catch(error => {
	            console.error('Error:', error);
	            errorAlert.querySelector('span').textContent = 'An error occurred while updating the password.';
	            errorAlert.style.display = 'block';
	        });
	    }); */
	});
</script>
<input type="hidden" th:value="${fetchedEmpNameCount}" id="teamMembersCountValue">
<input type="hidden" th:value="${fetchedAssetsCount}" id="assetsCountValue">
<script>

$('#hiddenDefaultEmployeeTypeValue').val($('#hiddenEmployeeTypeValue').val());

function setEmployeeTypeStatus(employeeTypeStatus){
    if (employeeTypeStatus === "active") {
        $('#hiddenEmployeeTypeValue').val('1');
        $('.activeBtn').addClass('activeBtnStyle');  // Add 'activeBtnStyle' class
        $('.inActiveBtn').removeClass('inActiveBtnStyle');  // Remove 'inActiveBtnStyle' class, if applied
        
        //used to make update button as enable
        document.getElementById("updateEmpBtn").removeAttribute("disabled");
        
        $('#clickSubmitBtnReminderForActiveOrInactiveSelectedDiv').show();
        $('#activeOrInactiveSpan').text("Active");
        
        // Scroll to the submit button
        document.querySelector('#updateEmpBtn').scrollIntoView({ behavior: 'smooth', block: 'center' });
    } else if (employeeTypeStatus === "inactive") {
    	if($('#teamMembersCountValue').val() != 0){
    		alert("This employee has team members assigned under them. Please reassign these team members to another reporting manager before marking this employee as inactive!");
    		return;
    	}
    	if($('#assetsCountValue').val() != 0){
    		alert("This employee has assets currently assigned. Ensure all assigned assets are retrieved before proceeding to mark the employee as inactive!");
    		return;
    	}
        $('#hiddenEmployeeTypeValue').val('0');
        $('.inActiveBtn').addClass('inActiveBtnStyle');  // Add 'inActiveBtnStyle' class
        $('.activeBtn').removeClass('activeBtnStyle');  // Remove 'activeBtnStyle' class, if applied
        showInactiveReasonModal(); // Show custom modal
    }
}
    
    function showInactiveReasonModal() {
        // Show modal
        document.getElementById('inactiveReasonModal').style.display = 'block';
        
        document.body.style.overflow = 'hidden';

        // Close modal on cancel
        document.getElementById('cancelInactiveReasonBtn').onclick = function() {
        	
        	if($('#hiddenDefaultEmployeeTypeValue').val() === '1'){
        		$('.activeBtn').addClass('activeBtnStyle');  // Add 'activeBtnStyle' class
                $('.inActiveBtn').removeClass('inActiveBtnStyle');  // Remove 'inActiveBtnStyle' class, if applied
        	}else if($('#hiddenDefaultEmployeeTypeValue').val() === '0'){
        		$('.inActiveBtn').addClass('inActiveBtnStyle');  // Add 'inActiveBtnStyle' class
                $('.activeBtn').removeClass('activeBtnStyle');  // Remove 'activeBtnStyle' class, if applied
        	}
        	
        	document.body.style.overflow = 'auto';
            document.getElementById('inactiveReasonModal').style.display = 'none';
        };

        // Handle form submission when the user enters a reason
        document.getElementById('submitInactiveReasonBtn').onclick = function() {
            var reason = document.getElementById('inactiveReasonInput').value.trim();

            if (!reason) {
                alert('To make an Inactive employee, reason is required!');
                return;
            }

            // Set the reason to a hidden input (or form field)
            $('#in_active_reason').val(reason);

            // Hide the modal
            document.getElementById('inactiveReasonModal').style.display = 'none';
            
          //used to make update button as enable
            document.getElementById("updateEmpBtn").removeAttribute("disabled");

            // Show submit reminder and scroll to the submit button
            $('#clickSubmitBtnReminderForActiveOrInactiveSelectedDiv').show();
            $('#activeOrInactiveSpan').text("Inactive");

            // Scroll to the submit button
            document.querySelector('#updateEmpBtn').scrollIntoView({ behavior: 'smooth', block: 'center' });
        };
    }
	
	function getEmployeeTypeData(){
		$.ajax({
			type: 'GET',
			url: 'fetchEmployeeTypeData',
			data: {emp_id: $('#emp_idValue').val()},
			success: function (data) {
				//alert(JSON.stringify(data));
				
				if (data === "1") {
			        $('.activeBtn').addClass('activeBtnStyle');  // Add 'activeBtnStyle' class
			        $('.inActiveBtn').removeClass('inActiveBtnStyle');  // Remove 'inActiveBtnStyle' class, if applied
			        $('#in_active_reason_div').hide();
			    } else if (data === "0") {
			        $('.inActiveBtn').addClass('inActiveBtnStyle');  // Add 'inActiveBtnStyle' class
			        $('.activeBtn').removeClass('activeBtnStyle');  // Remove 'activeBtnStyle' class, if applied
			        $('#in_active_reason_div').show();
			    }else{
			    	$('.inActiveBtn').removeClass('inActiveBtnStyle');
			        $('.activeBtn').removeClass('activeBtnStyle');
			        $('#in_active_reason_div').hide();
			    }
				
			},
			error: function (xhr, status, error) {
				console.error('Error fetching data:', error);
				console.log('Error fetching data. Please try again.');
			}
		});
	}
	
	$(document).ready(function() {
		getEmployeeTypeData();
	});
	
</script>
<input type="hidden" id="employeeProfileFechedName" th:value="${employee.fullName}">
<script>
document.getElementById("profileDownload").addEventListener("click", function () {
    var profilePic = document.getElementById("profilePic1");
    
    // Ensure the image has a source before downloading
    if (profilePic.src && profilePic.src !== window.location.href) {
        var link = document.createElement("a");
        link.href = profilePic.src;
        link.download = "profile_pic_("+$('#employeeProfileFechedName').val()+").png"; // Sets the download filename
        document.body.appendChild(link);
        link.click();
        document.body.removeChild(link);
    } else {
        alert("No image available for download!");
    }
});

document.getElementById("panDownload").addEventListener("click", function () {
    var panPic = document.getElementById("panPic1");
    
    // Ensure the image has a source before downloading
    if (panPic.src && panPic.src !== window.location.href) {
        var link = document.createElement("a");
        link.href = panPic.src;
        link.download = "pan_pic_("+$('#employeeProfileFechedName').val()+").png"; // Sets the download filename
        document.body.appendChild(link);
        link.click();
        document.body.removeChild(link);
    } else {
        alert("No image available for download!");
    }
});
</script>


<script>
function filterProbationPeriodDays() {
    var dojDateValue = $('#doj2').val();
    var probationCompletedDateValue = $('#probation_completed_date').val();

    if (dojDateValue && probationCompletedDateValue) {
        var startDate = new Date(dojDateValue);
        var endDate = new Date(probationCompletedDateValue);

        if (startDate > endDate) {
            alert("Probation completed date should be after Date of Joining.");
            return;
        }

        var startDay = startDate.getDate();
        var startMonth = startDate.getMonth();
        var startYear = startDate.getFullYear();

        var endDay = endDate.getDate();
        var endMonth = endDate.getMonth();
        var endYear = endDate.getFullYear();

        var totalMonths = (endYear - startYear) * 12 + (endMonth - startMonth);
        var remainingDays = endDay - startDay;

        if (remainingDays < 0) {
            totalMonths--; // Take one month back
            var prevMonth = new Date(endYear, endMonth, 0); // Last day of previous month
            remainingDays = prevMonth.getDate() + remainingDays;
        }

        $('#probation_period_in_days').text("Period: "+totalMonths + " month(s) " + remainingDays + " day(s)");
    }
}

filterProbationPeriodDays();
</script>

	<script>
		document.getElementById("feedbackForm").addEventListener("submit", function (event) {
			    event.preventDefault(); // Prevent default form submission

			    $.ajax({
			        url: 'recentlySavedTicketNumber',
			        type: 'GET',
			        success: function (response) {
			            let recentlyInsertedTicketIdData = response;

			            // Get the current date
			            var today = new Date();
			            var year = today.getFullYear();
			            var month = today.getMonth() + 1; // JavaScript months are 0-based

			            // Calculate the financial year
			            var financialYearStart = month >= 4 ? year : year - 1; // Fiscal year starts in April
			            var financialYearEnd = financialYearStart + 1;

			            // Format as FYY-YY
			            var financialYear = `F${financialYearStart % 100}-${financialYearEnd % 100}`;

			            // Department Name
			            var loggedInDeptName = $('#loggedInDeptName').val();

			            let incrementedNumber = "0001"; // Default number if response is empty or null

			            // Check if recentlyInsertedTicketIdData is not empty or null
			            if (recentlyInsertedTicketIdData) {
			                // Extract the last part of the ticket (e.g., 0001)
			                let ticketParts = recentlyInsertedTicketIdData.split("/");
			                let lastPart = ticketParts[ticketParts.length - 1];

			                // Increment the extracted number
			                let numericValue = parseInt(lastPart, 10) + 1;
			                incrementedNumber = numericValue.toString().padStart(4, '0'); // Pad with leading zeros
			            }

			            // Construct the feedback ticket
			            var feedbackTicket = `MSPL/FT/${financialYear}/${loggedInDeptName}/${incrementedNumber}`;

			            // Add feedback ticket to the form data
			            let formData = new FormData(document.getElementById("feedbackForm"));
			            formData.append("id", feedbackTicket);
			            formData.append("emp_id", $('#emp_idSessionValue').val());

			            const submitButton = document.getElementById("submitFeedbackBtn");
			            submitButton.disabled = true; // Disable the submit button to prevent multiple submissions

			            const loadingSwal = Swal.fire({
			                title: 'Submitting feedback...',
			                text: 'Please wait while we submit your feedback.',
			                showConfirmButton: false,
			                allowOutsideClick: false, // Prevent closing when clicking outside
			                            allowEscapeKey: false, // Prevent closing when pressing escape key
			                didOpen: () => {
			                    Swal.showLoading(); // Display the loading spinner
			                }
			            });

			            // Append files to form data
			            let files = document.getElementById("feedbackAttachment").files;
			            if (files.length > 0) {
			                for (let i = 0; i < files.length; i++) {
			                    formData.append(`attachment[${i}]`, files[i]); // Use unique keys
			                }
			            }

			            let bugType = document.getElementById("bugType").value;
			            formData.append("bugTypeff", bugType); // Add the bug type to the form data

			            // Debugging: Log formData entries before the fetch call
			            console.log("Logging formData entries:");
			            for (let [key, value] of formData.entries()) {
			                if (value instanceof File) {
			                    console.log(`Key: ${key}, File Name: ${value.name}, Size: ${value.size}`);
			                } else {
			                    console.log(`Key: ${key}, Value: ${value}`);
			                }
			            }

			            // Make AJAX request to submit feedback
			            fetch("/submitFeedback", {
			                method: "POST",
			                body: formData
			            })
			                .then(response => response.json())
			                .then(data => {
			                    loadingSwal.close();
			                    submitButton.disabled = false; // Re-enable the button
			                    if (data.success) {
			                        $('#feedbackModal').modal('hide');
			                        Swal.fire({
			                            title: 'Success!',
			                            text: 'Your feedback has been submitted successfully.',
			                            icon: 'success',
			                            allowOutsideClick: false, // Prevent closing when clicking outside
			                                        allowEscapeKey: false, // Prevent closing when pressing escape key
			                            customClass: {
			                                popup: 'custom-swal-font'
			                            },
			                            confirmButtonText: 'OK'
			                        }).then((result) => {
			                            if (result.isConfirmed) {
			                                    Swal.fire({
			                                            html: 'We sincerely appreciate your feedback! Please find your feedback ticket details below.<br><br>' + 
			                                    '<strong>' + feedbackTicket + '</strong>', // Display the feedback ticket on a new line
			                                    allowOutsideClick: false, // Prevent closing when clicking outside
			                                                allowEscapeKey: false, // Prevent closing when pressing escape key
			                                    customClass: {
			                                        popup: 'custom-swal-font'
			                                    },
			                                    confirmButtonText: 'OK'
			                                });
			                            }
			                        });
			                    } else {
			                        Swal.fire({
			                            title: 'Error!',
			                            text: 'There was an error submitting your feedback.',
			                            icon: 'error',
			                            allowOutsideClick: false, // Prevent closing when clicking outside
			                                        allowEscapeKey: false, // Prevent closing when pressing escape key
			                            customClass: {
			                                popup: 'custom-swal-font'
			                            },
			                            confirmButtonText: 'OK'
			                        });
			                    }
			                })
			                .catch(error => {
			                    console.error('Error:', error);
			                    loadingSwal.close();
			                    submitButton.disabled = false; // Re-enable the button
			                    Swal.fire({
			                        title: 'Error!',
			                        text: 'There was an error submitting your feedback.',
			                        icon: 'error',
			                        allowOutsideClick: false, // Prevent closing when clicking outside
			                                    allowEscapeKey: false, // Prevent closing when pressing escape key
			                        customClass: {
			                            popup: 'custom-swal-font'
			                        },
			                        confirmButtonText: 'OK'
			                    });
			                });
			        },
			        error: function (xhr, status, error) {
			            alert('Failed to fetch recently inserted feedback ticket: ' + error);
			        }
			    });
			});


			   // Clear form fields when the modal is closed
			   document.getElementById('feedbackModal').addEventListener('hidden.bs.modal', function () {
			       const feedbackForm = document.getElementById('feedbackForm');
			       feedbackForm.reset(); // Reset the form fields
			       document.getElementById('feedbackAttachment').value = ""; // Clear file input manually
			   });
	</script>

</body>

</html>